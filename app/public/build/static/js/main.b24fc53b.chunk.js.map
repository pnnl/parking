{"version":3,"sources":["constants/palette.js","utils/utils.js","controllers/util.js","controllers/busy/action.js","controllers/busy/saga.js","controllers/common/saga.js","controllers/action.js","controllers/error/action.js","controllers/error/saga.js","controllers/map/action.js","controllers/api.js","controllers/map/api.js","controllers/map/saga.js","controllers/occupancies/action.js","controllers/occupancies/api.js","controllers/occupancies/saga.js","controllers/organizations/action.js","controllers/organizations/api.js","controllers/organizations/saga.js","controllers/spaces/action.js","controllers/spaces/api.js","controllers/spaces/saga.js","controllers/user/action.js","controllers/user/api.js","controllers/user/saga.js","controllers/users/action.js","controllers/users/api.js","controllers/users/saga.js","controllers/preference/action.js","controllers/preference/api.js","controllers/preference/saga.js","controllers/busy/reducer.js","controllers/common/action.js","controllers/common/reducer.js","controllers/error/reducer.js","controllers/map/reducer.js","controllers/occupancies/reducer.js","controllers/organizations/reducer.js","controllers/spaces/reducer.js","controllers/user/reducer.js","controllers/users/reducer.js","controllers/preference/reducer.js","controllers/reducer.js","components/PrkBusy/styles.js","components/PrkBusy/index.js","components/PrkControl/styles.js","components/PrkControl/index.js","components/PrkDialog/styles.js","components/PrkDialog/index.js","components/PrkFooter/styles.js","components/PrkFooter/index.js","components/PrkHeader/styles.js","components/PrkHeader/index.js","components/PrkLayout/styles.js","components/PrkLayout/index.js","components/PrkLogin/styles.js","components/PrkLogin/index.js","utils/analytics.js","routes/RouteBase.jsx","routes/Error/styles.js","routes/Error/Error.jsx","routes/Error/route.js","routes/Error/index.jsx","routes/NotFound/styles.js","routes/NotFound/NotFound.jsx","routes/NotFound/route.js","routes/NotFound/index.jsx","routes/PrkMap/styles.js","routes/PrkMap/PrkMap.jsx","routes/index.js","routes/PrkMap/route.js","routes/PrkMap/index.jsx","components/PrkNavigation/PrkLink.js","components/PrkNavigation/styles.js","components/PrkNavigation/index.js","components/PrkNotice/styles.js","components/PrkNotice/index.js","components/PrkStepper/styles.js","components/PrkStepper/index.js","components/PrkTheme/styles.js","components/PrkTheme/theme.js","components/PrkTheme/index.js","Router.jsx","controllers/store.js","controllers/saga.js","serviceWorker.js","index.js"],"names":["background","primary","secondary","color","brighter","formatHex","darker","accent","error","errorTint","warning","warningTint","info","infoTint","verifiedTint","available","unknown","unavailable","text","isTrue","value","test","logError","getTimestamp","Date","ResetType","RESET","ActionTypes","REQUEST","BUSY","SUCCESS","UPDATE","ERROR","POLL","clearError","payload","_","set","getKeyType","type","types","split","length","getActionType","isResetType","key","concat","isActionType","createSuccessPayload","isBoolean","timestamp","createUpdatePayload","createErrorPayload","createBusyPayload","generateType","name","generateTypes","generateSelector","input","state","getIn","createSelector","toJS","generateSelectors","generateAction","generateActions","BUSY_GLOBAL","BUSY_TOKENS","busyTokens","selectBusyTokens","MAKE_BUSY","makeBusy","makeBusySuccess","makeBusyError","makeBusyBusy","selectBusy","selectBusyError","selectBusyBusy","selectBusyRequest","modifyBusyToken","action","tokens","isBusySaga","select","call","put","isBusyAction","makeBusySaga","delay","message","busySaga","takeEvery","takeLatest","commonSaga","reset","ERROR_TOKENS","errorTokens","selectErrorTokens","CLEAR_ERROR","clearErrorSuccess","clearErrorError","clearErrorBusy","selectError","selectErrorError","selectErrorBusy","modifyErrorToken","assign","cleared","Boolean","isUnauthorized","get","isErrorSaga","isErrorAction","clearErrorSaga","errorAction","errorSaga","FETCH_MAP_INFO","fetchMapInfo","fetchMapInfoSuccess","fetchMapInfoError","fetchMapInfoBusy","selectMapInfo","selectMapInfoError","selectMapInfoBusy","selectMapInfoRequest","FETCH_MAP_STYLE","fetchMapStyle","fetchMapStyleSuccess","fetchMapStyleError","fetchMapStyleBusy","selectMapStyle","selectMapStyleError","selectMapStyleBusy","selectMapStyleRequest","setAuthorization","token","localStorage","setItem","getAuthorization","getItem","isEmpty","validateResponse","async","response","status","Error","ok","statusText","result","JSON","parse","isString","isObject","handleResponse","handleError","defaultOptions","authenticated","authorization","redirect","credentials","headers","Accept","Authorization","createTarget","endpoint","params","target","query","Object","keys","map","join","createQuery","read","arguments","undefined","options","merge","method","fetch","then","catch","update","body","stringify","create","remove","authenticate","process","readMapInfo","readMapStyle","readMapInfoSaga","readMapStyleSaga","mapSaga","FETCH_OCCUPANCIES","fetchOccupancies","fetchOccupanciesSuccess","fetchOccupanciesError","fetchOccupanciesBusy","selectOccupancies","selectOccupanciesError","selectOccupanciesBusy","selectOccupanciesRequest","FETCH_OCCUPANCY","fetchOccupancy","fetchOccupanciesuccess","fetchOccupancyError","fetchOccupancyBusy","selectOccupancy","selectOccupancyError","selectOccupancyBusy","selectOccupancyRequest","SERVICE_ENDPOINT","readOccupancies","readOccupancy","id","readOccupanciesaga","readOccupanciesSaga","occupanciesSaga","FETCH_ORGANIZATIONS","fetchOrganizations","fetchOrganizationsSuccess","fetchOrganizationsError","fetchOrganizationsBusy","selectOrganizations","selectOrganizationsError","selectOrganizationsBusy","selectOrganizationsRequest","FETCH_ORGANIZATION","fetchOrganization","fetchOrganizationSuccess","fetchOrganizationError","fetchOrganizationBusy","selectOrganization","selectOrganizationError","selectOrganizationBusy","selectOrganizationRequest","UPDATE_ORGANIZATION","updateOrganization","updateOrganizationSuccess","updateOrganizationError","updateOrganizationBusy","selectUpdateOrganization","selectUpdateOrganizationError","selectUpdateOrganizationBusy","selectUpdateOrganizationRequest","REMOVE_ORGANIZATION","removeOrganization","removeOrganizationSuccess","removeOrganizationError","removeOrganizationBusy","selectRemoveOrganization","selectRemoveOrganizationError","selectRemoveOrganizationBusy","selectRemoveOrganizationRequest","CREATE_ORGANIZATION","createOrganization","createOrganizationSuccess","createOrganizationError","createOrganizationBusy","selectCreateOrganization","selectCreateOrganizationError","selectCreateOrganizationBusy","selectCreateOrganizationRequest","readOrganizations","readOrganization","createOrganizationSaga","readOrganizationSaga","removeOrganizationSaga","updateOrganizationSaga","readOrganizationsSaga","organizationsSaga","FETCH_SPACES","fetchSpaces","fetchSpacesSuccess","fetchSpacesError","fetchSpacesBusy","selectSpaces","selectSpacesError","selectSpacesBusy","selectSpacesRequest","FETCH_SPACE","fetchSpace","fetchSpaceSuccess","fetchSpaceError","fetchSpaceBusy","selectSpace","selectSpaceError","selectSpaceBusy","selectSpaceRequest","readSpaces","readSpace","readSpaceSaga","readSpacesSaga","spacesSaga","FETCH_USER","fetchUser","fetchUserSuccess","fetchUserError","fetchUserBusy","selectUser","selectUserError","selectUserBusy","selectUserRequest","UPDATE_USER","updateUser","updateUserSuccess","updateUserError","updateUserBusy","selectUpdateUser","selectUpdateUserError","selectUpdateUserBusy","selectUpdateUserRequest","REMOVE_USER","removeUser","removeUserSuccess","removeUserError","removeUserBusy","selectRemoveUser","selectRemoveUserError","selectRemoveUserBusy","selectRemoveUserRequest","LOGIN_USER","loginUser","loginUserSuccess","loginUserError","loginUserBusy","selectLoginUser","selectLoginUserError","selectLoginUserBusy","selectLoginUserRequest","LOGOUT_USER","logoutUser","logoutUserSuccess","logoutUserError","logoutUserBusy","selectLogoutUser","selectLogoutUserError","selectLogoutUserBusy","selectLogoutUserRequest","CONTINUE_USER","continueUser","continueUserSuccess","continueUserError","continueUserBusy","selectContinueUser","selectContinueUserError","selectContinueUserBusy","selectContinueUserRequest","readUser","email","password","preferences","login","defaultPreferences","user","markers","predictions","requirement","availability","json","parseJson","readUserSaga","removeUserSaga","updateUserSaga","loginSaga","logoutSaga","continueSaga","auth","usersSaga","FETCH_USERS","fetchUsers","fetchUsersSuccess","fetchUsersError","fetchUsersBusy","selectUsers","selectUsersError","selectUsersBusy","selectUsersRequest","CREATE_USER","createUser","createUserSuccess","createUserError","createUserBusy","selectCreateUser","selectCreateUserError","selectCreateUserBusy","selectCreateUserRequest","readUsers","organization","scope","organizationId","createUserSaga","readUsersSaga","FETCH_PREFERENCE","fetchPreference","fetchPreferenceSuccess","fetchPreferenceError","fetchPreferenceBusy","selectPreference","selectPreferenceError","selectPreferenceBusy","selectPreferenceRequest","UPDATE_PREFERENCE","updatePreference","updatePreferenceSuccess","updatePreferenceError","updatePreferenceBusy","selectUpdatePreference","selectUpdatePreferenceError","selectUpdatePreferenceBusy","selectUpdatePreferenceRequest","readPreference","Promise","resolve","reject","item","window","console","log","preference","vehicle","Passenger","label","deferred","readPreferenceSaga","updatePreferenceSaga","preferencesSaga","initialState","replace","reducer","fromJS","setIn","NOTICE","setNotice","selectNotice","isUpdateType","combineReducers","commonKey","commonReducer","preferenceKey","preferenceReducer","userKey","userReducer","usersKey","usersReducer","organizationsKey","organizationsReducer","spacesKey","spacesReducer","occupanciesKey","occupanciesReducer","busyKey","busyReducer","errorKey","errorReducer","mapKey","mapReducer","styles","modal","progress","outline","position","left","top","PrkBusy","React","Component","render","classes","busy","this","props","_jsx","Modal","open","className","children","CircularProgress","defaultProps","connect","values","filter","v","withStyles","isLogin","theme","root","display","textAlign","margin","zIndex","breakpoints","down","title","marginLeft","flex","card","width","maxWidth","actions","icons","padding","content","maxHeight","overflow","expand","transform","transition","transitions","duration","shortest","expandOpen","form","marginBottom","formEntry","infoIcon","bottom","selectAvailability","selectDeferred","timeIcon","truckIcon","labelRequirement","marginRight","marginTop","selectRequirement","avatar","symbol","textShadow","labelAvailable","arrowUpward","arrowDownward","PrkControl","constructor","super","isMarkers","isPredictions","isDeferred","isVehicleType","isVehicleLength","getLayoutProperty","property","mapStyle","layers","layer","find","layout","setLayoutProperty","onMapStyle","updated","ids","Array","isArray","includes","forEach","updateLayoutProperties","_ref","updateUserPreferences","prev","cloneDeep","temp","isEqual","onChange","handleChange","event","setState","expanded","componentDidMount","renderExtraSpaces","guest","FormControl","component","FormGroup","_jsxs","FormControlLabel","control","Switch","checked","disabled","labelPlacement","Tooltip","InfoIcon","renderPredictions","Select","MenuItem","renderDeferred","_user$scope","m","moment","startOf","t","Math","floor","k","AccessTimeIcon","Typography","variant","isUndefined","renderValue","clone","add","format","range","renderVehicleType","AirportShuttleIcon","Commercial","Transport","renderVehicleLength","renderLegend","_Fragment","ArrowUpwardIcon","clsx","RemoveIcon","ArrowDownwardIcon","Card","CardActions","IconButton","onClick","ExpandMoreIcon","Collapse","in","timeout","unmountOnExit","CardContent","mapActionToProps","PrkDialog","handleClick","button","buttons","fullScreen","fullWidth","Dialog","DialogTitle","DialogContent","DialogActions","Button","height","PrkFooter","handleClear","errors","sort","a","b","Fragment","AppBar","Snackbar","anchorOrigin","vertical","horizontal","ContentProps","style","autoHideDuration","min","max","onClose","size","CloseIcon","fontSize","right","space","paddingRight","icon","paddingTop","paddingLeft","PrkHeader","findUsername","findButtonText","handleLogout","Paper","AccountCircleIcon","flexGrow","view","toolbar","mixins","PrkLayout","updatePageSize","forceUpdate","addEventListener","componentWillUnmount","removeEventListener","componentDidCatch","page","Redirect","push","to","document","documentElement","clientHeight","minHeight","withTheme","PrkLogin","tab","confirm","validate","handleLogin","handleCreate","handleGuest","handleRef","ref","dialog","PrkTheme","noValidate","autoComplete","Grid","container","spacing","xs","Tabs","Tab","TextField","created","Analytics","getInstance","instance","_this","initialize","_initialized","ReactGA","pageview","path","send","hitType","category","Root","isNotice","_page$path","notice","renderRoute","PrkNotice","success","backgroundColor","iconVariant","opacity","snackbar","center","pad","CheckCircleIcon","WarningIcon","ErrorIcon","location","queryString","search","Icon","SnackbarContent","withRouter","route","sequence","hidden","element","RouteBase","p","NotFound","popup","borderRadius","border","spaces","occupied","indeterminate","popupHeader","popupSpacer","PrkMap","isAuthenticate","templateFormat","template","transformRequest","url","resourceType","viewport","zoom","latitude","longitude","querySourceDataDebounced","handleLoad","handleViewStateChange","popupInfo","handleMapStyle","handleMouseDown","handleMouseMove","current","getMap","features","queryRenderedFeatures","x","y","feature","lngLat","properties","isAuthenticated","createRef","bearing","pitch","updateWindowDimensions","bind","querySourceData","debounce","getDerivedStateFromProps","intid","setInterval","parseInt","clearInterval","innerWidth","innerHeight","predict","getStyle","bounds","getBounds","VehicleType","uuid","valueOf","z","n","_ne","lat","e","lng","s","_sw","w","r","d","source","getSource","_options","data","setData","renderPopup","sensors","precise","required","shapeLength","occupancies","occupancy","prediction","blockId","blockfaceId","cvlzId","spaceType","spaceTyped","total","isNumber","segment","ceil","extra","po","pmin","pmax","Popup","tipSize","anchor","closeButton","round","alignContent","justifyContent","ReactMapGL","onViewportChange","onViewStateChange","onLoad","onError","onMouseDown","disableTokenWarning","mapOptions","userProperties","customAttribution","GeolocateControl","positionOptions","enableHighAccuracy","showUserLocation","ScaleControl","unit","routes","exact","AppsIcon","notFoundRoute","errorRoute","index","PrkLink","Link","drawer","list","listItemNotSelected","paddingBottom","listItemSelected","textTransform","borderLeft","listItemIcon","minWidth","listItemText","noPadding","noStyle","PrkNavigation","home","windowWidth","admin","CanEditAccounts","navWidth","indent","indentWidth","Drawer","PaperProps","List","PrkIcon","selected","ListItem","disableGutters","forwardRef","ListItemIcon","withWidth","handleAcknowledge","stepper","PrkStepper","notifyStepChange","step","onStepChange","handleNext","handleBack","handleReset","steps","Toolbar","indexOf","ArrowBackIcon","Stepper","activeStep","Step","StepLabel","ArrowForwardIcon","overrides","MuiCssBaseline","backgroundRepeat","backgroundPosition","backgroundAttachment","MuiStepIcon","active","completed","MuiList","MuiExpansionPanelSummary","MuiExpansionPanelDetails","palette","main","contrastText","paper","default","createTheme","typography","useNextVariants","MuiThemeProvider","CssBaseline","reduxStore","sagaMiddleware","createSagaMiddleware","enhancers","middleware","applyMiddleware","createStore","runSaga","run","configureStore","REDUX_INITIAL_DATA","all","preferenceSaga","userSaga","Router","Element","Route","omit","Provider","store","HashRouter","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b24fc53b.chunk.js","sourcesContent":["// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { color } from \"d3\";\r\n\r\n// grays\r\nexport const background = \"#ffffff\";\r\nexport const lighter = \"#ffffff\";\r\nexport const darker = \"#e8e8e8\";\r\nexport const darkest = \"#9b9b9b\";\r\n// colors\r\nexport const primary = \"#C6B773\";\r\nexport const primaryTint = color(primary).brighter(1.0).formatHex();\r\nexport const primaryShade = color(primary).darker(1.0).formatHex();\r\nexport const secondary = \"#4ea1d3\";\r\nexport const secondaryTint = color(secondary).brighter(1.0).formatHex();\r\nexport const secondaryShade = color(secondary).darker(1.0).formatHex();\r\nexport const accent = \"#f4a4a4\";\r\nexport const accentTint = color(accent).brighter(1.0).formatHex();\r\nexport const accentShade = color(accent).darker(1.0).formatHex();\r\nexport const error = \"#d96a64\";\r\nexport const errorTint = color(error).brighter(1.0).formatHex();\r\nexport const errorShade = color(error).darker(1.0).formatHex();\r\nexport const warning = \"#d98164\";\r\nexport const warningTint = color(warning).brighter(1.0).formatHex();\r\nexport const warningShade = color(warning).darker(1.0).formatHex();\r\nexport const info = \"#d9bc64\";\r\nexport const infoTint = color(info).brighter(1.0).formatHex();\r\nexport const infoShade = color(info).darker(1.0).formatHex();\r\n// conditions\r\nexport const verified = \"#01c353\"; // green\r\nexport const verifiedTint = \"#66db97\"; // light green\r\nexport const selected = \"#1c96f8\"; // blue\r\nexport const selectedTint = \"#d2e6fb\"; // light blue\r\nexport const active = \"#9013fe\"; // bright purple\r\nexport const disabled = \"#d8d8d8\";\r\nexport const invalid = \"#d65000\"; // dark orange\r\n// availability\r\nexport const available = \"#43ba6a\";\r\nexport const unknown = \"#C6B773\";\r\nexport const unavailable = \"#c44a40\";\r\n// text\r\nexport const text = {\r\n  light: \"#ffffff\",\r\n  dark: \"#393a41\",\r\n  subtle: \"#88888d\",\r\n};\r\n// chart\r\nexport const chart = {\r\n  gray: \"#36454f\",\r\n  red: \"#d96464\",\r\n  green: \"#64d964\",\r\n  blue: \"#6464d9\",\r\n  sequence: [\r\n    \"#1f78b4\",\r\n    \"#b2df8a\",\r\n    \"#33a02c\",\r\n    \"#fb9a99\",\r\n    \"#e31a1c\",\r\n    \"#fdbf6f\",\r\n    \"#ff7f00\",\r\n    \"#cab2d6\",\r\n    \"#6a3d9a\",\r\n    \"#ffff99\",\r\n    \"#b15928\",\r\n  ],\r\n};\r\n// utils\r\nexport const hexToRgba = (hex, alpha = 1) => {\r\n  const [r, g, b] = hex.match(/\\w\\w/g).map((x) => parseInt(x, 16));\r\n  return `rgba(${r},${g},${b},${alpha})`;\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { selectedTint } from \"constants/palette\";\r\nimport jsonpath from \"jsonpath\";\r\nimport _ from \"lodash\";\r\nimport React from \"react\";\r\n\r\nexport function getDocumentWidth() {\r\n  // We always want the client width\r\n  return Math.max(\r\n    // document.body.scrollWidth,\r\n    // document.documentElement.scrollWidth,\r\n    // document.body.offsetWidth,\r\n    // document.documentElement.offsetWidth,\r\n    document.documentElement.clientWidth\r\n  );\r\n}\r\n\r\nexport function getDocumentHeight() {\r\n  // We always want the client height\r\n  return Math.max(\r\n    // document.body.scrollHeight,\r\n    // document.documentElement.scrollHeight,\r\n    // document.body.offsetHeight,\r\n    // document.documentElement.offsetHeight,\r\n    document.documentElement.clientHeight\r\n  );\r\n}\r\n\r\n/**\r\n * Tests whether a string value is true or false.\r\n *  true = true, yes, t, or y\r\n *  false = anything else\r\n * @param {String} value\r\n */\r\nexport const isTrue = (value) => {\r\n  return /^[/s]*true|yes|t|y[/s]*$/i.test(value);\r\n};\r\n\r\n/**\r\n * Log the error stack to console if running in development environment.\r\n * @param {Error} error\r\n */\r\nexport const logError = (error) => {\r\n  if (error && process.env.NODE_ENV === \"development\") {\r\n    console.log(`[${error.message}]: ${error.stack}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Find the lowest unused number given a sequence of numbers.\r\n *\r\n * @param {number[]} sequence the sequence of numbers\r\n * @param {Integer} from the lowest number to look for\r\n */\r\nexport function lowestUnusedNumber(sequence, from) {\r\n  const arr = sequence.slice(0);\r\n  arr.sort((a, b) => a - b);\r\n\r\n  return arr.reduce((lowest, num, i) => {\r\n    const seqIndex = i + from;\r\n    return num !== seqIndex && seqIndex < lowest ? seqIndex : lowest;\r\n  }, arr.length + from);\r\n}\r\n\r\n/**\r\n * Returns an appropriate aria-label given the element's props.\r\n * @param {*} props\r\n * @throws {Error} if no aria-label could be derived\r\n */\r\nexport const getAriaLabel = (props) => {\r\n  const { \"aria-label\": ariaLabel, header, placeholder, children } = props;\r\n  if (ariaLabel) {\r\n    return ariaLabel;\r\n  } else if (!_.isEmpty(header)) {\r\n    return header;\r\n  } else if (!_.isEmpty(placeholder)) {\r\n    return placeholder;\r\n  } else if (_.isString(children)) {\r\n    return children;\r\n  } else {\r\n    throw new Error(\r\n      \"Must explicitely specify aria-label if header, placeholder, or tooltip is not defined and children is not plain text.\"\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Wraps the child component(s) only if the condition is met.\r\n * Requires three props: condition, wrapper, and children.\r\n * The condition is a boolean which determines if the wrapper should be utilized.\r\n * The wrapper is a callback function which passes the children elements.\r\n * The children are standard React children elements.\r\n * @param {*} props\r\n */\r\nexport const ConditionalWrapper = ({ condition, wrapper, children }) => {\r\n  return condition ? wrapper(children) : children;\r\n};\r\n\r\n/**\r\n * Create a text span for displaying a search term.\r\n * Looks through the list of fields until it finds the first one with a search term.\r\n * @param {*} item the item which may contain terms\r\n * @param {String} fields the field(s) to return\r\n */\r\nexport const createTerm = (item, ...fields) => {\r\n  const terms = fields\r\n    .map((field) => _.get(item, [\"terms\", field]))\r\n    .find((v) => v);\r\n  if (terms) {\r\n    return (\r\n      <span>\r\n        {terms[0]}\r\n        <span style={{ backgroundColor: selectedTint }}>\r\n          <strong>{terms[1]}</strong>\r\n        </span>\r\n        {terms[2]}\r\n      </span>\r\n    );\r\n  } else {\r\n    return <span>{item[fields[0]]}</span>;\r\n  }\r\n};\r\n\r\n/**\r\n * Alternative to createTerm for highlighting and bolding multiple instances\r\n * @param {Array<String>} terms\r\n */\r\nexport const generateTerm = (terms) => {\r\n  if (terms.length === 1 && !terms[0].text) {\r\n    return <span key={`key-${terms[0]}`}>{terms[0]}</span>;\r\n  }\r\n\r\n  const generatedTerms = terms.map((term, index) => {\r\n    if (!term || !term.text) {\r\n      return null;\r\n    }\r\n    if (term.fontWeight === \"bold\") {\r\n      return (\r\n        <span key={`key-${index}`} style={{ backgroundColor: selectedTint }}>\r\n          <strong>{term.text}</strong>\r\n        </span>\r\n      );\r\n    } else if ((term.fontWeight === \"normal\" && term.text) || term.length) {\r\n      return <span key={`key-${index}`}>{term.text}</span>;\r\n    } else {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  return _.compact(generatedTerms);\r\n};\r\n\r\n/**\r\n * Get the index of all instances in a string\r\n * @param {String} str\r\n * @param {String} term\r\n */\r\nconst getIndices = (str, term) => {\r\n  const indices = [];\r\n  let startIndex = 0;\r\n  let index;\r\n  while ((index = str.indexOf(term, startIndex)) > -1) {\r\n    indices.push(index);\r\n    startIndex = index + term.length;\r\n  }\r\n\r\n  return indices;\r\n};\r\n\r\n/**\r\n * Chunk string into an array of terms to be styled\r\n * @param {String} item\r\n * @param {String} field\r\n */\r\nexport const chunkTerms = (item, field) => {\r\n  const terms = [];\r\n  const termsBold = [];\r\n  const termsNormal = [];\r\n\r\n  if (!field || field.length === 0) {\r\n    return [item];\r\n  }\r\n\r\n  let stringCopy = item.toLowerCase();\r\n  const termCopy = field.toLowerCase();\r\n\r\n  const indices = getIndices(stringCopy, termCopy);\r\n\r\n  indices.forEach((index) => {\r\n    const slice = item.slice(index, index + termCopy.length);\r\n    termsBold.push(slice);\r\n  });\r\n\r\n  let line = \"\";\r\n\r\n  for (let i = 0; i < item.length; i++) {\r\n    if (!indices.includes(i)) {\r\n      line += item[i];\r\n    } else {\r\n      if (line) {\r\n        termsNormal.push(line);\r\n        line = \"\";\r\n      }\r\n\r\n      i += termCopy.length - 1;\r\n    }\r\n\r\n    if (i === item.length - 1) {\r\n      termsNormal.push(line);\r\n    }\r\n  }\r\n\r\n  for (let i = 0; i < termsNormal.length + termsBold.length; i++) {\r\n    const term = {};\r\n\r\n    if (indices.includes(0)) {\r\n      if (!(i % 2)) {\r\n        term.text = termsBold[i / 2];\r\n        term.fontWeight = \"bold\";\r\n      } else {\r\n        term.text = termsNormal[(i - 1) / 2];\r\n        term.fontWeight = \"normal\";\r\n      }\r\n    } else {\r\n      if (!(i % 2)) {\r\n        term.text = termsNormal[i / 2];\r\n        term.fontWeight = \"normal\";\r\n      } else {\r\n        term.text = termsBold[(i - 1) / 2];\r\n        term.fontWeight = \"bold\";\r\n      }\r\n    }\r\n\r\n    terms.push(term);\r\n  }\r\n\r\n  return terms;\r\n};\r\n\r\nconst getTerm = (item, key, term) => {\r\n  const value = item[key];\r\n  const index = _.isString(value) ? value.toLowerCase().indexOf(term) : -1;\r\n  const temp =\r\n    index === -1 || term.length === 0\r\n      ? [value, \"\", \"\"]\r\n      : [\r\n          value.slice(0, index),\r\n          value.slice(index, index + term.length),\r\n          value.slice(index + term.length),\r\n        ];\r\n  return { [key]: temp };\r\n};\r\n\r\nconst addTerm = (item, key, term) => {\r\n  _.assign(item, { terms: getTerm(item, key, term) });\r\n};\r\n\r\n/**\r\n * Searches all of the text fields in the list of items which contain the search value.\r\n * Returns the complete array if search is not specified.\r\n * The terms are placed into a terms field which contains an array with three values: prefix, matching term, and suffix.\r\n * The keys array can contain either a list of fields or jsonpaths (https://www.npmjs.com/package/jsonpath).\r\n * Fields and jsonpaths can not be mixed. Jsonpaths must start with $.\r\n * @param {Array} items the list of items to filter\r\n * @param {String} search the search term\r\n * @param {Array[String]} keys an optional list of field keys to search in\r\n */\r\nexport const filter = (items, search, keys) => {\r\n  const regex = new RegExp(\r\n    `${search}`.replace(/\\*+/i, \".*\").replace(/^\"/, \"^\").replace(/\"$/, \"$\"),\r\n    \"i\"\r\n  );\r\n  const term =\r\n    search && search.length > 0\r\n      ? search.toLowerCase().replace(/^\"|\"$/i, \"\")\r\n      : \"\";\r\n  const jsonpaths =\r\n    Array.isArray(keys) && keys.filter((key) => key.startsWith(\"$\"));\r\n  if (jsonpaths && jsonpaths.length > 0) {\r\n    return items\r\n      .filter((item) => {\r\n        return term\r\n          ? jsonpaths.find((jp) => {\r\n              const tmp = jsonpath\r\n                .query(item, jp)\r\n                .find((v) => (_.isString(v) ? regex.test(v) : false));\r\n              return tmp && tmp.length > 0;\r\n            })\r\n          : true;\r\n      })\r\n      .map((item) => {\r\n        const copy = _.cloneDeep(item);\r\n        jsonpaths.forEach((jp) =>\r\n          jsonpath.nodes(copy, jp).forEach((node) => {\r\n            if (_.isString(node.value) && regex.test(node.value)) {\r\n              const tmp =\r\n                node.path.length <= 2\r\n                  ? copy\r\n                  : _.get(copy, node.path.splice(1, node.path.length - 2));\r\n              addTerm(tmp, node.path[node.path.length - 1], term);\r\n            }\r\n          })\r\n        );\r\n        return copy;\r\n      });\r\n  } else {\r\n    return items\r\n      .filter((item) =>\r\n        term\r\n          ? (keys ? keys : Object.keys(item)).find((key) =>\r\n              _.isString(item[key]) ? regex.test(item[key]) : false\r\n            )\r\n          : true\r\n      )\r\n      .map((item) => {\r\n        const terms = (keys ? keys : Object.keys(item))\r\n          .map((key) => {\r\n            return getTerm(item, key, term);\r\n          })\r\n          .reduce((terms, term) => ({ ...terms, ...term }), {});\r\n        return { ...item, terms };\r\n      });\r\n  }\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport _ from \"lodash\";\r\nimport { createSelector } from \"reselect\";\r\n\r\nexport var getTimestamp = () => new Date();\r\n\r\n/**\r\n * Override this function within testing to return a static timestamp.\r\n */\r\nexport const timestampGenerator = (generator) => (getTimestamp = generator);\r\n\r\nexport const ResetType = {\r\n  RESET: \"reset\",\r\n};\r\nconst { RESET } = ResetType;\r\n\r\nexport const ActionTypes = {\r\n  REQUEST: \"request\",\r\n  BUSY: \"busy\",\r\n  SUCCESS: \"success\",\r\n  UPDATE: \"update\",\r\n  ERROR: \"error\",\r\n  POLL: \"poll\",\r\n};\r\nconst { REQUEST, BUSY, SUCCESS, UPDATE, ERROR, POLL } = ActionTypes;\r\n\r\n/**\r\n * Set an error as cleared so that it does not display a toast.\r\n *\r\n * @param {Object} payload\r\n */\r\nexport const clearError = (payload) => {\r\n  return _.set(payload, [\"payload\", \"cleared\"], true);\r\n};\r\n\r\n/**\r\n * Get the key used to create this type.\r\n *\r\n * @param {String} type\r\n * @returns {String}\r\n */\r\nexport const getKeyType = (type) => {\r\n  const types = type.split(\"/\");\r\n  if (types.length < 2) {\r\n    return \"\";\r\n  } else {\r\n    return types[0];\r\n  }\r\n};\r\n\r\n/**\r\n * Get the action type used to create this type.\r\n *\r\n * @param {String} type\r\n * @returns {String}\r\n */\r\nexport const getActionType = (type) => {\r\n  const types = type.split(\"/\");\r\n  if (types.length < 2) {\r\n    return \"\";\r\n  } else {\r\n    return types[types.length - 1];\r\n  }\r\n};\r\n\r\n/**\r\n * Checks whether this is a reset type.\r\n *\r\n * @param {String} key\r\n * @param {String} type\r\n * @returns {Boolean}\r\n */\r\nexport const isResetType = (key, type) => {\r\n  switch (type) {\r\n    case RESET:\r\n    case `${key}/${RESET}`:\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Checks whether this is an action type of: REQUEST, BUSY, SUCCESS, or ERROR.\r\n *\r\n * @param {String} key\r\n * @param {String} type\r\n * @returns {Boolean}\r\n */\r\nexport const isActionType = (key, type) => {\r\n  if (getKeyType(type) !== key) {\r\n    return false;\r\n  }\r\n  switch (getActionType(type)) {\r\n    case REQUEST:\r\n    case BUSY:\r\n    case SUCCESS:\r\n    case ERROR:\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Checks whether this is an action type of: UPDATE.\r\n *\r\n * @param {String} key\r\n * @param {String} type\r\n * @returns {Boolean}\r\n */\r\nexport const isUpdateType = (key, type) => {\r\n  if (getKeyType(type) !== key) {\r\n    return false;\r\n  }\r\n  switch (getActionType(type)) {\r\n    case UPDATE:\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Create a payload for a successful action result.\r\n * Pass null to clear the result.\r\n *\r\n * @param {*} payload\r\n * @returns {*}\r\n */\r\nexport const createSuccessPayload = (payload) => {\r\n  if (payload === null) {\r\n    return null;\r\n  } else if (_.isBoolean(payload)) {\r\n    const timestamp = getTimestamp();\r\n    return {\r\n      timestamp: timestamp,\r\n    };\r\n  } else {\r\n    return payload;\r\n  }\r\n};\r\n\r\n/**\r\n * Create a payload for an update action result.\r\n * Pass null to clear the result.\r\n *\r\n * @param {*} payload\r\n * @returns {*}\r\n */\r\nexport const createUpdatePayload = (payload) => {\r\n  if (payload === null) {\r\n    return null;\r\n  } else if (_.isBoolean(payload)) {\r\n    const timestamp = getTimestamp();\r\n    return {\r\n      timestamp: timestamp,\r\n    };\r\n  } else {\r\n    return payload;\r\n  }\r\n};\r\n\r\n/**\r\n * Create a payload for an action that produced an error.\r\n * Pass null to clear the error.\r\n *\r\n * @param {*} payload\r\n * @returns {*}\r\n */\r\nexport const createErrorPayload = (payload) => {\r\n  if (payload) {\r\n    const timestamp = getTimestamp();\r\n    return {\r\n      timestamp: timestamp,\r\n      error: payload,\r\n    };\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Create a payload for an action that is busy.\r\n * Pass null to clear the busy state.\r\n *\r\n * @param {*} payload\r\n * @returns {*}\r\n */\r\nexport const createBusyPayload = (payload) => {\r\n  if (payload) {\r\n    const timestamp = getTimestamp();\r\n    return {\r\n      timestamp: timestamp,\r\n      ...(!_.isBoolean(payload) && { type: payload }),\r\n    };\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Generate a single type.\r\n *\r\n * @param {String} key\r\n * @param {String} name\r\n * @returns {String}\r\n */\r\nexport const generateType = (key, name) => {\r\n  return `${key}/${name}`;\r\n};\r\n\r\n/**\r\n * Generates a map of action types for the specified unique key and name.\r\n *\r\n * @param {String} key\r\n * @param {*} name\r\n */\r\nexport const generateTypes = (key, name) => {\r\n  const obj = {\r\n    key: key,\r\n    [REQUEST]: `${key}/${name}/${REQUEST}`,\r\n    [BUSY]: `${key}/${name}/${BUSY}`,\r\n    [SUCCESS]: `${key}/${name}/${SUCCESS}`,\r\n    [UPDATE]: `${key}/${name}/${UPDATE}`,\r\n    [ERROR]: `${key}/${name}/${ERROR}`,\r\n    [POLL]: `${key}/${name}/${POLL}`,\r\n    [RESET]: `${key}/${RESET}`,\r\n  };\r\n  return obj;\r\n};\r\n\r\n/**\r\n * Create types from the specified action by reverse engineering.\r\n *\r\n * @param {} action\r\n */\r\nexport const createTypes = (action) => {\r\n  const { type } = action;\r\n  const types = type.split(\"/\");\r\n  const key = types[0];\r\n  const name = types.slice(1, -1).join(\"/\");\r\n  return generateTypes(key, name);\r\n};\r\n\r\nexport const createToJSSelector = (input) => {\r\n  return createSelector(input, (value) =>\r\n    value && value.toJS ? value.toJS() : value\r\n  );\r\n};\r\n\r\nexport const generateSelector = (key, type) => {\r\n  return createToJSSelector((state) => state.getIn([key, ...type.split(\"/\")]));\r\n};\r\n\r\n/**\r\n * Generate selectors for the specified types generated using generateTypes().\r\n *\r\n * @see this#generateTypes\r\n * @param {*} types\r\n * @returns {Array} [SUCCESS, ERROR, BUSY, POLL, REQUEST]\r\n */\r\nexport const generateSelectors = (types) => {\r\n  return [\r\n    generateSelector(types.key, types[SUCCESS]),\r\n    generateSelector(types.key, types[ERROR]),\r\n    generateSelector(types.key, types[BUSY]),\r\n    generateSelector(types.key, types[POLL]),\r\n    generateSelector(types.key, types[REQUEST]),\r\n  ];\r\n};\r\n\r\nexport const generateAction = (type) => {\r\n  const t = getActionType(type);\r\n  switch (t) {\r\n    case BUSY:\r\n      return (payload) => ({\r\n        type,\r\n        payload: createBusyPayload(payload),\r\n      });\r\n    case ERROR:\r\n      return (payload) => ({\r\n        type,\r\n        payload: createErrorPayload(payload),\r\n      });\r\n    case SUCCESS:\r\n      return (payload) => ({\r\n        type,\r\n        payload: createSuccessPayload(payload),\r\n      });\r\n    case UPDATE:\r\n      return (payload) => ({\r\n        type,\r\n        payload: createUpdatePayload(payload),\r\n      });\r\n    case REQUEST:\r\n    default:\r\n      return (payload) => ({ type, payload });\r\n  }\r\n};\r\n\r\n/**\r\n * Generate actions for the specified types generated using generateTypes().\r\n *\r\n * @see this#generateTypes\r\n * @param {*} types\r\n * @returns {Array} [REQUEST, SUCCESS, ERROR, BUSY, POLL, UPDATE]\r\n */\r\nexport const generateActions = (types) => {\r\n  return [\r\n    generateAction(types[REQUEST]),\r\n    generateAction(types[SUCCESS]),\r\n    generateAction(types[ERROR]),\r\n    generateAction(types[BUSY]),\r\n    generateAction(types[POLL]),\r\n    generateAction(types[UPDATE]),\r\n  ];\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  generateAction,\r\n  generateSelector,\r\n  generateTypes,\r\n  generateActions,\r\n  generateSelectors\r\n} from \"../util\";\r\n\r\nexport const key = \"busy\";\r\n\r\n// key used to specify whether a busy tokan is a global type\r\nexport const BUSY_GLOBAL = \"global\";\r\n\r\n// global busy state\r\nexport const BUSY_TOKENS = `${key}/tokens`;\r\nexport const busyTokens = generateAction(BUSY_TOKENS);\r\nexport const selectBusyTokens = generateSelector(key, BUSY_TOKENS);\r\n// test to make busy... busy\r\nexport const MAKE_BUSY = generateTypes(key, \"make\");\r\nexport const [\r\n  makeBusy,\r\n  makeBusySuccess,\r\n  makeBusyError,\r\n  makeBusyBusy\r\n] = generateActions(MAKE_BUSY);\r\nexport const [\r\n  selectBusy,\r\n  selectBusyError,\r\n  selectBusyBusy,\r\n  selectBusyRequest\r\n] = generateSelectors(MAKE_BUSY);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  call,\r\n  delay,\r\n  put,\r\n  select,\r\n  takeEvery,\r\n  takeLatest,\r\n} from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  busyTokens,\r\n  BUSY_GLOBAL,\r\n  makeBusyBusy,\r\n  makeBusyError,\r\n  makeBusySuccess,\r\n  MAKE_BUSY,\r\n  selectBusyTokens,\r\n} from \"./action\";\r\nconst { REQUEST, BUSY } = ActionTypes;\r\n\r\nconst modifyBusyToken = (action, tokens) => {\r\n  const { type, payload } = action;\r\n  if (payload) {\r\n    tokens[type] = payload;\r\n  } else {\r\n    delete tokens[type];\r\n  }\r\n  return tokens;\r\n};\r\n\r\nexport function* isBusySaga(action) {\r\n  const tokens = yield select(selectBusyTokens);\r\n  yield call(modifyBusyToken, action, tokens);\r\n  yield put(busyTokens(tokens));\r\n}\r\n\r\nconst isBusyAction = (action) => {\r\n  const types = action.type.split(\"/\");\r\n  return types[types.length - 1] === BUSY;\r\n};\r\n\r\nexport function* makeBusySaga() {\r\n  try {\r\n    yield put(makeBusyBusy(BUSY_GLOBAL));\r\n    yield put(makeBusyError());\r\n    yield delay(5000);\r\n    yield put(makeBusySuccess(\"successfully busied\"));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(makeBusyError(error.message));\r\n  } finally {\r\n    yield put(makeBusyBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* busySaga() {\r\n  yield takeEvery(isBusyAction, isBusySaga);\r\n  yield takeLatest(MAKE_BUSY[REQUEST], makeBusySaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nexport default function* commonSaga() {}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { ResetType, generateAction } from \"./util\";\r\nconst { RESET } = ResetType;\r\n\r\n// reset all of the state\r\nexport const reset = generateAction(RESET);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  generateAction,\r\n  generateSelector,\r\n  generateType,\r\n  generateTypes,\r\n  generateActions,\r\n  generateSelectors\r\n} from \"../util\";\r\n\r\nexport const key = \"error\";\r\n\r\n// global error state\r\nexport const ERROR_TOKENS = generateType(key, \"tokens\");\r\nexport const errorTokens = generateAction(ERROR_TOKENS);\r\nexport const selectErrorTokens = generateSelector(key, ERROR_TOKENS);\r\n// test to clear error\r\nexport const CLEAR_ERROR = generateTypes(key, \"clear\");\r\nexport const [\r\n  clearError,\r\n  clearErrorSuccess,\r\n  clearErrorError,\r\n  clearErrorBusy\r\n] = generateActions(CLEAR_ERROR);\r\nexport const [\r\n  selectError,\r\n  selectErrorError,\r\n  selectErrorBusy\r\n] = generateSelectors(CLEAR_ERROR);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport _ from \"lodash\";\r\nimport { call, put, select, takeEvery } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { reset } from \"../action\";\r\nimport { ActionTypes, generateAction } from \"../util\";\r\nimport {\r\n  clearErrorBusy,\r\n  clearErrorError,\r\n  clearErrorSuccess,\r\n  CLEAR_ERROR,\r\n  errorTokens,\r\n  selectErrorTokens,\r\n} from \"./action\";\r\nconst { REQUEST, ERROR } = ActionTypes;\r\n\r\nconst modifyErrorToken = (action, tokens) => {\r\n  const { type, payload } = action;\r\n  tokens[type] = _.assign({}, tokens[type], payload, {\r\n    cleared: !Boolean(payload),\r\n  });\r\n  return tokens;\r\n};\r\n\r\nconst isUnauthorized = (action) => {\r\n  const { payload } = action;\r\n  return /unauthorized|expired|session is invalid/gim.test(\r\n    _.get(payload, \"error\", \"\")\r\n  );\r\n};\r\n\r\nexport function* isErrorSaga(action) {\r\n  const tokens = yield select(selectErrorTokens);\r\n  yield call(modifyErrorToken, action, tokens);\r\n  if (isUnauthorized(action)) {\r\n    yield put(reset());\r\n  }\r\n  yield put(errorTokens(tokens));\r\n}\r\n\r\nconst isErrorAction = (action) => {\r\n  const types = action.type.split(\"/\");\r\n  return types[types.length - 1] === ERROR;\r\n};\r\n\r\nexport function* clearErrorSaga(action) {\r\n  const { payload: key } = action;\r\n  if (!key) {\r\n    return;\r\n  }\r\n  const errorAction = generateAction(key);\r\n  try {\r\n    yield put(clearErrorBusy());\r\n    yield put(clearErrorError());\r\n    const tokens = yield select(selectErrorTokens);\r\n    yield call(modifyErrorToken, errorAction(), tokens);\r\n    yield put(clearErrorSuccess(\"successfully cleared error\"));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(clearErrorError(error.message));\r\n  } finally {\r\n    yield put(clearErrorBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* errorSaga() {\r\n  yield takeEvery(isErrorAction, isErrorSaga);\r\n  yield takeEvery(CLEAR_ERROR[REQUEST], clearErrorSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"map\";\r\n\r\n// fetch map info\r\nexport const FETCH_MAP_INFO = generateTypes(key, \"info\");\r\nexport const [\r\n  fetchMapInfo,\r\n  fetchMapInfoSuccess,\r\n  fetchMapInfoError,\r\n  fetchMapInfoBusy\r\n] = generateActions(FETCH_MAP_INFO);\r\nexport const [\r\n  selectMapInfo,\r\n  selectMapInfoError,\r\n  selectMapInfoBusy,\r\n  selectMapInfoRequest\r\n] = generateSelectors(FETCH_MAP_INFO);\r\n// fetch map style\r\nexport const FETCH_MAP_STYLE = generateTypes(key, \"style\");\r\nexport const [\r\n  fetchMapStyle,\r\n  fetchMapStyleSuccess,\r\n  fetchMapStyleError,\r\n  fetchMapStyleBusy\r\n] = generateActions(FETCH_MAP_STYLE);\r\nexport const [\r\n  selectMapStyle,\r\n  selectMapStyleError,\r\n  selectMapStyleBusy,\r\n  selectMapStyleRequest\r\n] = generateSelectors(FETCH_MAP_STYLE);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport _ from \"lodash\";\r\n\r\nexport const SERVICE_URL = \"/api\";\r\n\r\nexport const setAuthorization = (token) => {\r\n  localStorage.setItem(\"authorization\", token);\r\n};\r\n\r\nexport const getAuthorization = () => {\r\n  const token = localStorage.getItem(\"authorization\");\r\n  if (!_.isEmpty(token) && token !== \"null\") {\r\n    return token;\r\n  }\r\n};\r\n\r\nexport const createQuery = (params) => {\r\n  return Object.keys(params)\r\n    .map((key) => key + \"=\" + params[key])\r\n    .join(\"&\");\r\n};\r\n\r\nconst validateResponse = async (response) => {\r\n  switch (response.status) {\r\n    case 0:\r\n    case 302:\r\n    case 401:\r\n      throw Error(\"Session is invalid.\");\r\n    default:\r\n      if (!response.ok) {\r\n        let message = response.statusText;\r\n        try {\r\n          let result = await response.text();\r\n          result = JSON.parse(result);\r\n          if (_.isString(result) && result.length > 0) {\r\n            message = result;\r\n          } else if (\r\n            _.isObject(result) &&\r\n            _.isString(result.message) &&\r\n            result.message.length > 0\r\n          ) {\r\n            message = result.message;\r\n          }\r\n        } catch {\r\n          // purposefully ducked catch\r\n        }\r\n        throw Error(message);\r\n      }\r\n      return response;\r\n  }\r\n};\r\n\r\nconst handleResponse = async (response) => {\r\n  let result = null;\r\n  try {\r\n    result = await response.text();\r\n    result = JSON.parse(result);\r\n  } catch {\r\n    // purposely ducked catch\r\n  }\r\n  return result;\r\n};\r\n\r\nconst handleError = (error) => {\r\n  throw error;\r\n};\r\n\r\nconst defaultOptions = (authenticated) => {\r\n  const authorization = getAuthorization();\r\n  if (\r\n    authenticated &&\r\n    _.isEmpty(authorization) &&\r\n    process.env.NODE_ENV !== \"test\"\r\n  ) {\r\n    throw Error(\"Session is invalid.\");\r\n  }\r\n  return {\r\n    // mode: \"cors\", // no-cors, *cors, same-origin\r\n    // cache: \"default\", // *default, no-cache, reload, force-cache, only-if-cached\r\n    redirect: \"manual\", // manual, *follow, error\r\n    // referrerPolicy: \"client\", // no-referrer, *client\r\n    ...(authenticated && { credentials: \"include\" }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      ...(authenticated && { Authorization: `Token ${getAuthorization()}` }),\r\n    },\r\n  };\r\n};\r\n\r\nconst createTarget = (endpoint, params) => {\r\n  let target = `${SERVICE_URL}/${endpoint}`;\r\n  if (params) {\r\n    const query = createQuery(params);\r\n    target = `${target}?${query}`;\r\n  }\r\n  return target;\r\n};\r\n\r\nexport const read = (endpoint, query = null, authenticated = false) => {\r\n  const options = _.merge({}, defaultOptions(authenticated), {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\",\r\n      \"Content-Type\": \"application/json\",\r\n      ...(query === null && { \"Cache-Control\": \"no-store\" }),\r\n    },\r\n  });\r\n  let target = createTarget(endpoint, query);\r\n  return fetch(target, options)\r\n    .then(validateResponse)\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const update = (endpoint, body, query = null, authenticated = false) => {\r\n  const options = _.merge({}, defaultOptions(authenticated), {\r\n    method: \"PUT\",\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n  let target = createTarget(endpoint, query);\r\n  return fetch(target, options)\r\n    .then(validateResponse)\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const create = (endpoint, body, query = null, authenticated = false) => {\r\n  const options = _.merge({}, defaultOptions(authenticated), {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n  let target = createTarget(endpoint, query);\r\n  return fetch(target, options)\r\n    .then(validateResponse)\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const remove = (endpoint, query = null, authenticated = false) => {\r\n  const options = _.merge({}, defaultOptions(authenticated), {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  });\r\n  let target = createTarget(endpoint, query);\r\n  return fetch(target, options)\r\n    .then(validateResponse)\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const upload = (endpoint, file, query = null, authenticated = false) => {\r\n  const data = new FormData();\r\n  data.append(\"file\", file.files[0]);\r\n  const options = _.merge({}, defaultOptions(authenticated), {\r\n    method: \"POST\",\r\n    headers: {\r\n      // setting the header here will cause the multipart post upload to fail\r\n      // 'Content-Type': '?',\r\n      Accept: \"application/json\",\r\n    },\r\n    body: data,\r\n  });\r\n  let target = createTarget(endpoint, query);\r\n  return fetch(target, options)\r\n    .then(validateResponse)\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { read } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"map\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readMapInfo = () => {\r\n  return read(`${SERVICE_ENDPOINT}/info`, null, authenticate);\r\n};\r\n\r\nexport const readMapStyle = () => {\r\n  return read(`${SERVICE_ENDPOINT}/style`, null, authenticate);\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  fetchMapInfoBusy,\r\n  fetchMapInfoError,\r\n  fetchMapInfoSuccess,\r\n  fetchMapStyleBusy,\r\n  fetchMapStyleError,\r\n  fetchMapStyleSuccess,\r\n  FETCH_MAP_INFO,\r\n  FETCH_MAP_STYLE,\r\n} from \"./action\";\r\nimport { readMapInfo, readMapStyle } from \"./api\";\r\nconst { REQUEST } = ActionTypes;\r\n\r\nexport function* readMapInfoSaga() {\r\n  try {\r\n    yield put(fetchMapInfoBusy(true));\r\n    yield put(fetchMapInfoError());\r\n    const response = yield call(readMapInfo);\r\n    yield put(fetchMapInfoSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchMapInfoError(error.message));\r\n  } finally {\r\n    yield put(fetchMapInfoBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readMapStyleSaga() {\r\n  try {\r\n    yield put(fetchMapStyleBusy(true));\r\n    yield put(fetchMapStyleError());\r\n    const response = yield call(readMapStyle);\r\n    yield put(fetchMapStyleSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchMapStyleError(error.message));\r\n  } finally {\r\n    yield put(fetchMapStyleBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* mapSaga() {\r\n  yield takeLatest(FETCH_MAP_INFO[REQUEST], readMapInfoSaga);\r\n  yield takeLatest(FETCH_MAP_STYLE[REQUEST], readMapStyleSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"occupancies\";\r\n\r\n// fetch occupancies\r\nexport const FETCH_OCCUPANCIES = generateTypes(key, \"list\");\r\nexport const [\r\n  fetchOccupancies,\r\n  fetchOccupanciesSuccess,\r\n  fetchOccupanciesError,\r\n  fetchOccupanciesBusy\r\n] = generateActions(FETCH_OCCUPANCIES);\r\nexport const [\r\n  selectOccupancies,\r\n  selectOccupanciesError,\r\n  selectOccupanciesBusy,\r\n  selectOccupanciesRequest\r\n] = generateSelectors(FETCH_OCCUPANCIES);\r\n// fetch occupancy\r\nexport const FETCH_OCCUPANCY = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchOccupancy,\r\n  fetchOccupanciesuccess,\r\n  fetchOccupancyError,\r\n  fetchOccupancyBusy\r\n] = generateActions(FETCH_OCCUPANCY);\r\nexport const [\r\n  selectOccupancy,\r\n  selectOccupancyError,\r\n  selectOccupancyBusy,\r\n  selectOccupancyRequest\r\n] = generateSelectors(FETCH_OCCUPANCY);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { read } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"occupancies\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readOccupancies = () => {\r\n  return read(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const readOccupancy = (id) => {\r\n  return read(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  fetchOccupanciesBusy,\r\n  fetchOccupanciesError,\r\n  fetchOccupanciesSuccess,\r\n  fetchOccupanciesuccess,\r\n  fetchOccupancyBusy,\r\n  fetchOccupancyError,\r\n  FETCH_OCCUPANCIES,\r\n  FETCH_OCCUPANCY,\r\n} from \"./action\";\r\nimport { readOccupancies, readOccupancy } from \"./api\";\r\nconst { REQUEST } = ActionTypes;\r\n\r\nexport function* readOccupanciesaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(fetchOccupancyBusy(true));\r\n    yield put(fetchOccupancyError());\r\n    const response = yield call(readOccupancy, id);\r\n    yield put(fetchOccupanciesuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchOccupancyError(error.message));\r\n  } finally {\r\n    yield put(fetchOccupancyBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readOccupanciesSaga() {\r\n  try {\r\n    yield put(fetchOccupanciesBusy(true));\r\n    yield put(fetchOccupanciesError());\r\n    const response = yield call(readOccupancies);\r\n    yield put(fetchOccupanciesSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchOccupanciesError(error.message));\r\n  } finally {\r\n    yield put(fetchOccupanciesBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* occupanciesSaga() {\r\n  yield takeLatest(FETCH_OCCUPANCIES[REQUEST], readOccupanciesSaga);\r\n  yield takeLatest(FETCH_OCCUPANCY[REQUEST], readOccupanciesaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"organizations\";\r\n\r\n// fetch organizations\r\nexport const FETCH_ORGANIZATIONS = generateTypes(key, \"list\");\r\nexport const [\r\n  fetchOrganizations,\r\n  fetchOrganizationsSuccess,\r\n  fetchOrganizationsError,\r\n  fetchOrganizationsBusy\r\n] = generateActions(FETCH_ORGANIZATIONS);\r\nexport const [\r\n  selectOrganizations,\r\n  selectOrganizationsError,\r\n  selectOrganizationsBusy,\r\n  selectOrganizationsRequest\r\n] = generateSelectors(FETCH_ORGANIZATIONS);\r\n// fetch organization\r\nexport const FETCH_ORGANIZATION = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchOrganization,\r\n  fetchOrganizationSuccess,\r\n  fetchOrganizationError,\r\n  fetchOrganizationBusy\r\n] = generateActions(FETCH_ORGANIZATION);\r\nexport const [\r\n  selectOrganization,\r\n  selectOrganizationError,\r\n  selectOrganizationBusy,\r\n  selectOrganizationRequest\r\n] = generateSelectors(FETCH_ORGANIZATION);\r\n// update organization\r\nexport const UPDATE_ORGANIZATION = generateTypes(key, \"update\");\r\nexport const [\r\n  updateOrganization,\r\n  updateOrganizationSuccess,\r\n  updateOrganizationError,\r\n  updateOrganizationBusy\r\n] = generateActions(UPDATE_ORGANIZATION);\r\nexport const [\r\n  selectUpdateOrganization,\r\n  selectUpdateOrganizationError,\r\n  selectUpdateOrganizationBusy,\r\n  selectUpdateOrganizationRequest\r\n] = generateSelectors(UPDATE_ORGANIZATION);\r\n// remove organization\r\nexport const REMOVE_ORGANIZATION = generateTypes(key, \"remove\");\r\nexport const [\r\n  removeOrganization,\r\n  removeOrganizationSuccess,\r\n  removeOrganizationError,\r\n  removeOrganizationBusy\r\n] = generateActions(REMOVE_ORGANIZATION);\r\nexport const [\r\n  selectRemoveOrganization,\r\n  selectRemoveOrganizationError,\r\n  selectRemoveOrganizationBusy,\r\n  selectRemoveOrganizationRequest\r\n] = generateSelectors(REMOVE_ORGANIZATION);\r\n// create organization\r\nexport const CREATE_ORGANIZATION = generateTypes(key, \"create\");\r\nexport const [\r\n  createOrganization,\r\n  createOrganizationSuccess,\r\n  createOrganizationError,\r\n  createOrganizationBusy\r\n] = generateActions(CREATE_ORGANIZATION);\r\nexport const [\r\n  selectCreateOrganization,\r\n  selectCreateOrganizationError,\r\n  selectCreateOrganizationBusy,\r\n  selectCreateOrganizationRequest\r\n] = generateSelectors(CREATE_ORGANIZATION);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { create, read, update, remove } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"organizations\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readOrganizations = () => {\r\n  return read(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const readOrganization = (id) => {\r\n  return read(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n\r\nexport const removeOrganization = (id) => {\r\n  return remove(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n\r\nexport const updateOrganization = (id, name) => {\r\n  return update(\r\n    `${SERVICE_ENDPOINT}/${id}`,\r\n    {\r\n      name: name,\r\n    },\r\n    null,\r\n    authenticate\r\n  );\r\n};\r\n\r\nexport const createOrganization = (name) => {\r\n  return create(\r\n    `${SERVICE_ENDPOINT}`,\r\n    {\r\n      name: name,\r\n    },\r\n    null,\r\n    authenticate\r\n  );\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  createOrganizationBusy,\r\n  createOrganizationError,\r\n  createOrganizationSuccess,\r\n  CREATE_ORGANIZATION,\r\n  fetchOrganizationBusy,\r\n  fetchOrganizationError,\r\n  fetchOrganizationsBusy,\r\n  fetchOrganizationsError,\r\n  fetchOrganizationsSuccess,\r\n  fetchOrganizationSuccess,\r\n  FETCH_ORGANIZATION,\r\n  FETCH_ORGANIZATIONS,\r\n  removeOrganizationBusy,\r\n  removeOrganizationError,\r\n  removeOrganizationSuccess,\r\n  REMOVE_ORGANIZATION,\r\n  updateOrganizationBusy,\r\n  updateOrganizationError,\r\n  updateOrganizationSuccess,\r\n  UPDATE_ORGANIZATION,\r\n} from \"./action\";\r\nimport {\r\n  createOrganization,\r\n  readOrganization,\r\n  readOrganizations,\r\n  removeOrganization,\r\n  updateOrganization,\r\n} from \"./api\";\r\nconst { REQUEST } = ActionTypes;\r\n\r\nexport function* createOrganizationSaga(action) {\r\n  const { name } = action.payload;\r\n  try {\r\n    yield put(createOrganizationBusy(true));\r\n    yield put(createOrganizationError());\r\n    const response = yield call(createOrganization, name);\r\n    yield put(createOrganizationSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(createOrganizationError(error.message));\r\n  } finally {\r\n    yield put(createOrganizationBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readOrganizationSaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(fetchOrganizationBusy(true));\r\n    yield put(fetchOrganizationError());\r\n    const response = yield call(readOrganization, id);\r\n    yield put(fetchOrganizationSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchOrganizationError(error.message));\r\n  } finally {\r\n    yield put(fetchOrganizationBusy(false));\r\n  }\r\n}\r\n\r\nexport function* removeOrganizationSaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(removeOrganizationBusy(true));\r\n    yield put(removeOrganizationError());\r\n    const response = yield call(removeOrganization, id);\r\n    yield put(removeOrganizationSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(removeOrganizationError(error.message));\r\n  } finally {\r\n    yield put(removeOrganizationBusy(false));\r\n  }\r\n}\r\n\r\nexport function* updateOrganizationSaga(action) {\r\n  const { name } = action.payload;\r\n  try {\r\n    yield put(updateOrganizationBusy(true));\r\n    yield put(updateOrganizationError());\r\n    const response = yield call(updateOrganization, name);\r\n    yield put(updateOrganizationSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(updateOrganizationError(error.message));\r\n  } finally {\r\n    yield put(updateOrganizationBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readOrganizationsSaga() {\r\n  try {\r\n    yield put(fetchOrganizationsBusy(true));\r\n    yield put(fetchOrganizationsError());\r\n    const response = yield call(readOrganizations);\r\n    yield put(fetchOrganizationsSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchOrganizationsError(error.message));\r\n  } finally {\r\n    yield put(fetchOrganizationsBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* organizationsSaga() {\r\n  yield takeLatest(CREATE_ORGANIZATION[REQUEST], createOrganizationSaga);\r\n  yield takeLatest(FETCH_ORGANIZATIONS[REQUEST], readOrganizationsSaga);\r\n  yield takeLatest(FETCH_ORGANIZATION[REQUEST], readOrganizationSaga);\r\n  yield takeLatest(REMOVE_ORGANIZATION[REQUEST], removeOrganizationSaga);\r\n  yield takeLatest(UPDATE_ORGANIZATION[REQUEST], updateOrganizationSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"spaces\";\r\n\r\n// fetch spaces\r\nexport const FETCH_SPACES = generateTypes(key, \"list\");\r\nexport const [\r\n  fetchSpaces,\r\n  fetchSpacesSuccess,\r\n  fetchSpacesError,\r\n  fetchSpacesBusy\r\n] = generateActions(FETCH_SPACES);\r\nexport const [\r\n  selectSpaces,\r\n  selectSpacesError,\r\n  selectSpacesBusy,\r\n  selectSpacesRequest\r\n] = generateSelectors(FETCH_SPACES);\r\n// fetch space\r\nexport const FETCH_SPACE = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchSpace,\r\n  fetchSpaceSuccess,\r\n  fetchSpaceError,\r\n  fetchSpaceBusy\r\n] = generateActions(FETCH_SPACE);\r\nexport const [\r\n  selectSpace,\r\n  selectSpaceError,\r\n  selectSpaceBusy,\r\n  selectSpaceRequest\r\n] = generateSelectors(FETCH_SPACE);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { read } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"spaces\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readSpaces = () => {\r\n  return read(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const readSpace = (id) => {\r\n  return read(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  fetchSpaceBusy,\r\n  fetchSpaceError,\r\n  fetchSpacesBusy,\r\n  fetchSpacesError,\r\n  fetchSpacesSuccess,\r\n  fetchSpaceSuccess,\r\n  FETCH_SPACE,\r\n  FETCH_SPACES,\r\n} from \"./action\";\r\nimport { readSpace, readSpaces } from \"./api\";\r\nconst { REQUEST } = ActionTypes;\r\n\r\nexport function* readSpaceSaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(fetchSpaceBusy(true));\r\n    yield put(fetchSpaceError());\r\n    const response = yield call(readSpace, id);\r\n    yield put(fetchSpaceSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchSpaceError(error.message));\r\n  } finally {\r\n    yield put(fetchSpaceBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readSpacesSaga() {\r\n  try {\r\n    yield put(fetchSpacesBusy(true));\r\n    yield put(fetchSpacesError());\r\n    const response = yield call(readSpaces);\r\n    yield put(fetchSpacesSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchSpacesError(error.message));\r\n  } finally {\r\n    yield put(fetchSpacesBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* spacesSaga() {\r\n  yield takeLatest(FETCH_SPACES[REQUEST], readSpacesSaga);\r\n  yield takeLatest(FETCH_SPACE[REQUEST], readSpaceSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"user\";\r\n\r\n// fetch user\r\nexport const FETCH_USER = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchUser,\r\n  fetchUserSuccess,\r\n  fetchUserError,\r\n  fetchUserBusy\r\n] = generateActions(FETCH_USER);\r\nexport const [\r\n  selectUser,\r\n  selectUserError,\r\n  selectUserBusy,\r\n  selectUserRequest\r\n] = generateSelectors(FETCH_USER);\r\n// update user\r\nexport const UPDATE_USER = generateTypes(key, \"update\");\r\nexport const [\r\n  updateUser,\r\n  updateUserSuccess,\r\n  updateUserError,\r\n  updateUserBusy\r\n] = generateActions(UPDATE_USER);\r\nexport const [\r\n  selectUpdateUser,\r\n  selectUpdateUserError,\r\n  selectUpdateUserBusy,\r\n  selectUpdateUserRequest\r\n] = generateSelectors(UPDATE_USER);\r\n// remove user\r\nexport const REMOVE_USER = generateTypes(key, \"remove\");\r\nexport const [\r\n  removeUser,\r\n  removeUserSuccess,\r\n  removeUserError,\r\n  removeUserBusy\r\n] = generateActions(REMOVE_USER);\r\nexport const [\r\n  selectRemoveUser,\r\n  selectRemoveUserError,\r\n  selectRemoveUserBusy,\r\n  selectRemoveUserRequest\r\n] = generateSelectors(REMOVE_USER);\r\n// login user\r\nexport const LOGIN_USER = generateTypes(key, \"login\");\r\nexport const [\r\n  loginUser,\r\n  loginUserSuccess,\r\n  loginUserError,\r\n  loginUserBusy\r\n] = generateActions(LOGIN_USER);\r\nexport const [\r\n  selectLoginUser,\r\n  selectLoginUserError,\r\n  selectLoginUserBusy,\r\n  selectLoginUserRequest\r\n] = generateSelectors(LOGIN_USER);\r\n// logout user\r\nexport const LOGOUT_USER = generateTypes(key, \"logout\");\r\nexport const [\r\n  logoutUser,\r\n  logoutUserSuccess,\r\n  logoutUserError,\r\n  logoutUserBusy\r\n] = generateActions(LOGOUT_USER);\r\nexport const [\r\n  selectLogoutUser,\r\n  selectLogoutUserError,\r\n  selectLogoutUserBusy,\r\n  selectLogoutUserRequest\r\n] = generateSelectors(LOGOUT_USER);\r\n// continue user session\r\nexport const CONTINUE_USER = generateTypes(key, \"continue\");\r\nexport const [\r\n  continueUser,\r\n  continueUserSuccess,\r\n  continueUserError,\r\n  continueUserBusy\r\n] = generateActions(CONTINUE_USER);\r\nexport const [\r\n  selectContinueUser,\r\n  selectContinueUserError,\r\n  selectContinueUserBusy,\r\n  selectContinueUserRequest\r\n] = generateSelectors(CONTINUE_USER);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { create, read, update, remove } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"user\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readUser = () => {\r\n  return read(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const removeUser = () => {\r\n  return remove(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const updateUser = (email, password, preferences) => {\r\n  return update(\r\n    `${SERVICE_ENDPOINT}`,\r\n    {\r\n      ...(email && { email: email }),\r\n      ...(password && { password: password }),\r\n      ...(preferences && { preferences: preferences }),\r\n    },\r\n    null,\r\n    authenticate\r\n  );\r\n};\r\n\r\nexport const login = (email, password) => {\r\n  return create(`${SERVICE_ENDPOINT}/login`, {\r\n    email: email,\r\n    password: password,\r\n  });\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  CONTINUE_USER,\r\n  FETCH_USER,\r\n  LOGIN_USER,\r\n  LOGOUT_USER,\r\n  REMOVE_USER,\r\n  UPDATE_USER,\r\n  continueUserBusy,\r\n  continueUserError,\r\n  continueUserSuccess,\r\n  fetchUserBusy,\r\n  fetchUserError,\r\n  fetchUserSuccess,\r\n  loginUserBusy,\r\n  loginUserError,\r\n  loginUserSuccess,\r\n  logoutUserBusy,\r\n  logoutUserError,\r\n  logoutUserSuccess,\r\n  removeUserBusy,\r\n  removeUserError,\r\n  removeUserSuccess,\r\n  updateUserBusy,\r\n  updateUserError,\r\n  updateUserSuccess,\r\n} from \"./action\";\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { getAuthorization, setAuthorization } from \"../api\";\r\nimport { login, readUser, removeUser, updateUser } from \"./api\";\r\n\r\nimport { ActionTypes, clearError } from \"../util\";\r\nimport { BUSY_GLOBAL } from \"../busy/action\";\r\nimport _ from \"lodash\";\r\nimport { logError } from \"utils/utils\";\r\nimport { reset } from \"../action\";\r\n\r\nconst { REQUEST } = ActionTypes;\r\n\r\nconst parseJson = (json) => {\r\n  try {\r\n    if (_.isString(json)) {\r\n      return JSON.parse(json);\r\n    }\r\n  } finally {\r\n  }\r\n  return json;\r\n};\r\n\r\nconst defaultPreferences = (user) => {\r\n  user.preferences = _.merge(\r\n    {},\r\n    {\r\n      markers: false,\r\n      predictions: false,\r\n      requirement: 20,\r\n      availability: 5,\r\n    },\r\n    parseJson(user.preferences)\r\n  );\r\n  return user;\r\n};\r\n\r\nexport function* readUserSaga() {\r\n  try {\r\n    yield put(fetchUserBusy(true));\r\n    yield put(fetchUserError());\r\n    let response = yield call(readUser);\r\n    response = yield call(defaultPreferences, response);\r\n    yield put(fetchUserSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchUserError(error.message));\r\n  } finally {\r\n    yield put(fetchUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* removeUserSaga() {\r\n  try {\r\n    yield put(removeUserBusy(BUSY_GLOBAL));\r\n    yield put(removeUserError());\r\n    yield call(removeUser);\r\n    yield put(removeUserSuccess(true));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(removeUserError(error.message));\r\n  } finally {\r\n    yield put(removeUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* updateUserSaga(action) {\r\n  const { email, password, preferences } = action.payload;\r\n  try {\r\n    yield put(updateUserBusy(BUSY_GLOBAL));\r\n    yield put(updateUserError());\r\n    const response = yield call(updateUser, email, password, preferences);\r\n    yield put(updateUserSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(updateUserError(error.message));\r\n  } finally {\r\n    yield put(updateUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* loginSaga(action) {\r\n  const { email, password } = action.payload;\r\n  try {\r\n    yield put(loginUserBusy(BUSY_GLOBAL));\r\n    yield put(loginUserError());\r\n    const response = yield call(login, email, password);\r\n    yield call(setAuthorization, response && response.token);\r\n    yield put(loginUserSuccess(response && response.token));\r\n    yield call(readUserSaga);\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(loginUserError(error.message));\r\n  } finally {\r\n    yield put(loginUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* logoutSaga() {\r\n  try {\r\n    yield put(logoutUserBusy(BUSY_GLOBAL));\r\n    yield put(logoutUserError());\r\n    yield call(setAuthorization, null);\r\n    yield put(reset());\r\n    yield put(logoutUserSuccess(true));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(logoutUserError(error.message));\r\n  } finally {\r\n    yield put(logoutUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* continueSaga() {\r\n  try {\r\n    yield put(continueUserBusy(BUSY_GLOBAL));\r\n    yield put(continueUserError());\r\n    const auth = yield call(getAuthorization);\r\n    if (auth && auth !== \"invalid\") {\r\n      yield call(readUser);\r\n      yield put(loginUserSuccess(auth));\r\n      yield put(continueUserSuccess(auth));\r\n      yield call(readUserSaga);\r\n    }\r\n  } catch (error) {\r\n    logError(error);\r\n    yield call(setAuthorization, null);\r\n    yield put(clearError(continueUserError(error.message)));\r\n  } finally {\r\n    yield put(continueUserBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* usersSaga() {\r\n  yield takeLatest(CONTINUE_USER[REQUEST], continueSaga);\r\n  yield takeLatest(FETCH_USER[REQUEST], readUserSaga);\r\n  yield takeLatest(REMOVE_USER[REQUEST], removeUserSaga);\r\n  yield takeLatest(UPDATE_USER[REQUEST], updateUserSaga);\r\n  yield takeLatest(LOGIN_USER[REQUEST], loginSaga);\r\n  yield takeLatest(LOGOUT_USER[REQUEST], logoutSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"users\";\r\n\r\n// fetch users\r\nexport const FETCH_USERS = generateTypes(key, \"list\");\r\nexport const [\r\n  fetchUsers,\r\n  fetchUsersSuccess,\r\n  fetchUsersError,\r\n  fetchUsersBusy\r\n] = generateActions(FETCH_USERS);\r\nexport const [\r\n  selectUsers,\r\n  selectUsersError,\r\n  selectUsersBusy,\r\n  selectUsersRequest\r\n] = generateSelectors(FETCH_USERS);\r\n// fetch user\r\nexport const FETCH_USER = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchUser,\r\n  fetchUserSuccess,\r\n  fetchUserError,\r\n  fetchUserBusy\r\n] = generateActions(FETCH_USER);\r\nexport const [\r\n  selectUser,\r\n  selectUserError,\r\n  selectUserBusy,\r\n  selectUserRequest\r\n] = generateSelectors(FETCH_USER);\r\n// update user\r\nexport const UPDATE_USER = generateTypes(key, \"update\");\r\nexport const [\r\n  updateUser,\r\n  updateUserSuccess,\r\n  updateUserError,\r\n  updateUserBusy\r\n] = generateActions(UPDATE_USER);\r\nexport const [\r\n  selectUpdateUser,\r\n  selectUpdateUserError,\r\n  selectUpdateUserBusy,\r\n  selectUpdateUserRequest\r\n] = generateSelectors(UPDATE_USER);\r\n// remove user\r\nexport const REMOVE_USER = generateTypes(key, \"remove\");\r\nexport const [\r\n  removeUser,\r\n  removeUserSuccess,\r\n  removeUserError,\r\n  removeUserBusy\r\n] = generateActions(REMOVE_USER);\r\nexport const [\r\n  selectRemoveUser,\r\n  selectRemoveUserError,\r\n  selectRemoveUserBusy,\r\n  selectRemoveUserRequest\r\n] = generateSelectors(REMOVE_USER);\r\n// create user\r\nexport const CREATE_USER = generateTypes(key, \"create\");\r\nexport const [\r\n  createUser,\r\n  createUserSuccess,\r\n  createUserError,\r\n  createUserBusy\r\n] = generateActions(CREATE_USER);\r\nexport const [\r\n  selectCreateUser,\r\n  selectCreateUserError,\r\n  selectCreateUserBusy,\r\n  selectCreateUserRequest\r\n] = generateSelectors(CREATE_USER);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { create, read, update, remove } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"users\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readUsers = () => {\r\n  return read(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const readUser = (id) => {\r\n  return read(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n\r\nexport const removeUser = (id) => {\r\n  return remove(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n\r\nexport const updateUser = (id, email, password, organization, scope) => {\r\n  return update(\r\n    `${SERVICE_ENDPOINT}/${id}`,\r\n    {\r\n      ...(email && { email: email }),\r\n      ...(password && { password: password }),\r\n      ...(organization && { organizationId: organization.id }),\r\n      ...(scope && { scope: scope }),\r\n    },\r\n    null,\r\n    authenticate\r\n  );\r\n};\r\n\r\nexport const createUser = (email, password, organization, scope) => {\r\n  return create(\r\n    `${SERVICE_ENDPOINT}`,\r\n    {\r\n      email: email,\r\n      password: password,\r\n      ...(organization && { organizationId: organization.id }),\r\n      scope: scope,\r\n    },\r\n    null,\r\n    authenticate\r\n  );\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { BUSY_GLOBAL } from \"../busy/action\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  createUserBusy,\r\n  createUserError,\r\n  createUserSuccess,\r\n  CREATE_USER,\r\n  fetchUserBusy,\r\n  fetchUserError,\r\n  fetchUsersBusy,\r\n  fetchUsersError,\r\n  fetchUsersSuccess,\r\n  fetchUserSuccess,\r\n  FETCH_USER,\r\n  FETCH_USERS,\r\n  removeUserBusy,\r\n  removeUserError,\r\n  removeUserSuccess,\r\n  REMOVE_USER,\r\n  updateUserBusy,\r\n  updateUserError,\r\n  updateUserSuccess,\r\n  UPDATE_USER,\r\n} from \"./action\";\r\nimport { createUser, readUser, readUsers, removeUser, updateUser } from \"./api\";\r\nconst { REQUEST } = ActionTypes;\r\n\r\nexport function* createUserSaga(action) {\r\n  const { email, password, organization } = action.payload;\r\n  try {\r\n    yield put(createUserBusy(BUSY_GLOBAL));\r\n    yield put(createUserError());\r\n    const response = yield call(createUser, email, password, organization);\r\n    yield put(createUserSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(createUserError(error.message));\r\n  } finally {\r\n    yield put(createUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readUserSaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(fetchUserBusy(true));\r\n    yield put(fetchUserError());\r\n    const response = yield call(readUser, id);\r\n    yield put(fetchUserSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchUserError(error.message));\r\n  } finally {\r\n    yield put(fetchUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* removeUserSaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(removeUserBusy(BUSY_GLOBAL));\r\n    yield put(removeUserError());\r\n    yield call(removeUser, id);\r\n    yield put(removeUserSuccess(true));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(removeUserError(error.message));\r\n  } finally {\r\n    yield put(removeUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* updateUserSaga(action) {\r\n  const { id, email, password, organization, scope } = action.payload;\r\n  try {\r\n    yield put(updateUserBusy(BUSY_GLOBAL));\r\n    yield put(updateUserError());\r\n    const response = yield call(\r\n      updateUser,\r\n      id,\r\n      email,\r\n      password,\r\n      organization,\r\n      scope\r\n    );\r\n    yield put(updateUserSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(updateUserError(error.message));\r\n  } finally {\r\n    yield put(updateUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readUsersSaga() {\r\n  try {\r\n    yield put(fetchUsersBusy(true));\r\n    yield put(fetchUsersError());\r\n    const response = yield call(readUsers);\r\n    yield put(fetchUsersSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchUsersError(error.message));\r\n  } finally {\r\n    yield put(fetchUsersBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* usersSaga() {\r\n  yield takeLatest(CREATE_USER[REQUEST], createUserSaga);\r\n  yield takeLatest(FETCH_USERS[REQUEST], readUsersSaga);\r\n  yield takeLatest(FETCH_USER[REQUEST], readUserSaga);\r\n  yield takeLatest(REMOVE_USER[REQUEST], removeUserSaga);\r\n  yield takeLatest(UPDATE_USER[REQUEST], updateUserSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"preference\";\r\n\r\n// fetch preference\r\nexport const FETCH_PREFERENCE = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchPreference,\r\n  fetchPreferenceSuccess,\r\n  fetchPreferenceError,\r\n  fetchPreferenceBusy\r\n] = generateActions(FETCH_PREFERENCE);\r\nexport const [\r\n  selectPreference,\r\n  selectPreferenceError,\r\n  selectPreferenceBusy,\r\n  selectPreferenceRequest\r\n] = generateSelectors(FETCH_PREFERENCE);\r\n\r\n// update preference\r\nexport const UPDATE_PREFERENCE = generateTypes(key, \"update\");\r\nexport const [\r\n  updatePreference,\r\n  updatePreferenceSuccess,\r\n  updatePreferenceError,\r\n  updatePreferenceBusy\r\n] = generateActions(UPDATE_PREFERENCE);\r\nexport const [\r\n  selectUpdatePreference,\r\n  selectUpdatePreferenceError,\r\n  selectUpdatePreferenceBusy,\r\n  selectUpdatePreferenceRequest\r\n] = generateSelectors(UPDATE_PREFERENCE);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport { isEmpty } from \"lodash\";\r\nimport { logError } from \"../../utils/utils\";\r\n\r\nexport const readPreference = () => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      const item = window.localStorage.getItem(\"preference\");\r\n      if (!isEmpty(item)) {\r\n        try {\r\n          const preference = JSON.parse(item);\r\n          resolve(preference);\r\n        } catch (error) {\r\n          console.log(`Unable to parse the existing preference object: ${item}`);\r\n          logError(error);\r\n        }\r\n      }\r\n      resolve({});\r\n    } catch (error) {\r\n      reject(error);\r\n    }\r\n  });\r\n};\r\n\r\nexport const updatePreference = (preference) => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      window.localStorage.setItem(\"preference\", JSON.stringify(preference));\r\n      resolve(preference);\r\n    } catch (error) {\r\n      reject(error);\r\n    }\r\n  });\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport {\r\n  FETCH_PREFERENCE,\r\n  UPDATE_PREFERENCE,\r\n  fetchPreferenceBusy,\r\n  fetchPreferenceError,\r\n  fetchPreferenceSuccess,\r\n  updatePreferenceBusy,\r\n  updatePreferenceError,\r\n  updatePreferenceSuccess,\r\n} from \"./action\";\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { readPreference, updatePreference } from \"./api\";\r\n\r\nimport { ActionTypes } from \"../util\";\r\nimport { BUSY_GLOBAL } from \"../busy/action\";\r\nimport _ from \"lodash\";\r\nimport { logError } from \"utils/utils\";\r\nimport { vehicle } from \"parking-common\";\r\n\r\nconst { REQUEST } = ActionTypes;\r\n\r\nconst defaultPreferences = (preference) => {\r\n  preference = _.merge(\r\n    {},\r\n    {\r\n      markers: false,\r\n      predictions: false,\r\n      requirement: 20,\r\n      availability: 5,\r\n      vehicle: vehicle.Passenger.label,\r\n      deferred: 8,\r\n    },\r\n    preference\r\n  );\r\n  return preference;\r\n};\r\n\r\nexport function* readPreferenceSaga() {\r\n  try {\r\n    yield put(fetchPreferenceBusy(true));\r\n    yield put(fetchPreferenceError());\r\n    let response = yield call(readPreference);\r\n    response = yield call(defaultPreferences, response);\r\n    yield put(fetchPreferenceSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchPreferenceError(error.message));\r\n  } finally {\r\n    yield put(fetchPreferenceBusy(false));\r\n  }\r\n}\r\n\r\nexport function* updatePreferenceSaga(action) {\r\n  const preference = action.payload;\r\n  try {\r\n    yield put(updatePreferenceBusy(BUSY_GLOBAL));\r\n    yield put(updatePreferenceError());\r\n    const response = yield call(updatePreference, preference);\r\n    yield put(updatePreferenceSuccess(response));\r\n    yield call(readPreferenceSaga);\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(updatePreferenceError(error.message));\r\n  } finally {\r\n    yield put(updatePreferenceBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* preferencesSaga() {\r\n  yield takeLatest(FETCH_PREFERENCE[REQUEST], readPreferenceSaga);\r\n  yield takeLatest(UPDATE_PREFERENCE[REQUEST], updatePreferenceSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isActionType, isResetType } from \"../util\";\r\nimport { BUSY_TOKENS, key } from \"./action\";\r\nimport _ from \"lodash\";\r\n\r\nconst initialState = _.set({}, BUSY_TOKENS.replace(/\\//, \".\"), {});\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    case BUSY_TOKENS:\r\n      return state.setIn(type.split(\"/\"), fromJS(payload));\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateAction, generateSelector, generateType } from \"../util\";\r\n\r\nexport const key = \"common\";\r\n\r\n// reset common state\r\nexport const RESET = generateType(key, \"reset-this-only\");\r\nexport const reset = generateAction(RESET);\r\n\r\n// notice\r\nexport const NOTICE = generateType(key, \"notice\");\r\nexport const setNotice = generateAction(NOTICE);\r\nexport const selectNotice = generateSelector(key, NOTICE);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport _ from \"lodash\";\r\nimport { ActionTypes, isActionType, isUpdateType } from \"../util\";\r\nimport { key, NOTICE, RESET } from \"./action\";\r\nconst { SUCCESS } = ActionTypes;\r\n\r\nconst initialState = {};\r\n\r\nconst toJS = (value) => (value && value.toJS ? value.toJS() : value);\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isUpdateType(key, type)) {\r\n    const types = type.split(\"/\");\r\n    types[types.length - 1] = SUCCESS;\r\n    return state.setIn(\r\n      types,\r\n      fromJS(_.assign(toJS(state.getIn(types)), payload))\r\n    );\r\n  }\r\n  // do not clear on global reset\r\n  // if (isResetType(key, type)) {\r\n  //   return fromJS(initialState);\r\n  // }\r\n  switch (type) {\r\n    case RESET:\r\n      return fromJS(initialState);\r\n    case NOTICE:\r\n      return state.setIn(type.split(\"/\"), fromJS(payload));\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isResetType, isActionType } from \"../util\";\r\nimport { ERROR_TOKENS, key } from \"./action\";\r\nimport _ from \"lodash\";\r\n\r\nconst initialState = _.set({}, ERROR_TOKENS.replace(/\\//, \".\"), {});\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    case ERROR_TOKENS:\r\n      return state.setIn(type.split(\"/\"), fromJS(payload));\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isActionType, isResetType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isActionType, isResetType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isActionType, isResetType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isActionType, isResetType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isResetType, isActionType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isResetType, isActionType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isResetType, isActionType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { combineReducers } from \"redux-immutable\";\r\nimport { key as busyKey } from \"./busy/action\";\r\nimport busyReducer from \"./busy/reducer\";\r\nimport { key as commonKey } from \"./common/action\";\r\nimport commonReducer from \"./common/reducer\";\r\nimport { key as errorKey } from \"./error/action\";\r\nimport errorReducer from \"./error/reducer\";\r\nimport { key as mapKey } from \"./map/action\";\r\nimport mapReducer from \"./map/reducer\";\r\nimport { key as occupanciesKey } from \"./occupancies/action\";\r\nimport occupanciesReducer from \"./occupancies/reducer\";\r\nimport { key as organizationsKey } from \"./organizations/action\";\r\nimport organizationsReducer from \"./organizations/reducer\";\r\nimport { key as spacesKey } from \"./spaces/action\";\r\nimport spacesReducer from \"./spaces/reducer\";\r\nimport { key as userKey } from \"./user/action\";\r\nimport userReducer from \"./user/reducer\";\r\nimport { key as usersKey } from \"./users/action\";\r\nimport usersReducer from \"./users/reducer\";\r\nimport { key as preferenceKey } from \"./preference/action\";\r\nimport preferenceReducer from \"./preference/reducer\";\r\n\r\nexport default combineReducers({\r\n  [commonKey]: commonReducer,\r\n  [preferenceKey]: preferenceReducer,\r\n  [userKey]: userReducer,\r\n  [usersKey]: usersReducer,\r\n  [organizationsKey]: organizationsReducer,\r\n  [spacesKey]: spacesReducer,\r\n  [occupanciesKey]: occupanciesReducer,\r\n  [busyKey]: busyReducer,\r\n  [errorKey]: errorReducer,\r\n  [mapKey]: mapReducer,\r\n});\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  modal: {},\r\n  progress: {\r\n    outline: \"none\",\r\n    position: \"absolute\",\r\n    left: \"50%\",\r\n    top: \"50%\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, CircularProgress } from \"@material-ui/core\";\r\nimport { BUSY_GLOBAL, selectBusyTokens } from \"controllers/busy/action\";\r\n\r\nconst isBusy = busy => {\r\n  const count = busy\r\n    ? Object.values(busy).filter(v => v.type === BUSY_GLOBAL).length\r\n    : 0;\r\n  return count > 0;\r\n};\r\n\r\nclass PrkBusy extends React.Component {\r\n  static defaultProps = {\r\n    busy: false\r\n  };\r\n\r\n  render() {\r\n    const { classes, busy } = this.props;\r\n    return (\r\n      busy && (\r\n        <Modal open={busy} className={classes.modal}>\r\n          <CircularProgress className={classes.progress} />\r\n        </Modal>\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\nPrkBusy.propTypes = {\r\n  classes: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  busy: isBusy(selectBusyTokens(state))\r\n});\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(PrkBusy));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport { available, text, unavailable, unknown } from \"constants/palette\";\r\n\r\nimport { isTrue } from \"../../utils/utils\";\r\n\r\nconst isLogin = isTrue(process.env.REACT_APP_LOGIN);\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    display: \"-webkit-box\",\r\n    textAlign: \"left\",\r\n    margin: \".5em\",\r\n    position: \"absolute\",\r\n    left: \"0px\",\r\n    zIndex: 1000,\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      top: isLogin ? 50 : 0,\r\n    },\r\n  },\r\n  title: {\r\n    marginLeft: \".5em\",\r\n    flex: 1,\r\n  },\r\n  card: {\r\n    width: 300,\r\n    maxWidth: 300,\r\n  },\r\n  actions: {},\r\n  icons: {\r\n    padding: 0,\r\n  },\r\n  content: {\r\n    maxHeight: 400,\r\n    overflow: \"auto\",\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    marginLeft: \"auto\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    marginBottom: \"20px\",\r\n  },\r\n  formEntry: {\r\n    position: \"relative\",\r\n  },\r\n  infoIcon: {\r\n    position: \"absolute\",\r\n    margin: \"auto\",\r\n    textAlign: \"center\",\r\n    top: \"50%\",\r\n    bottom: \"50%\",\r\n  },\r\n  selectAvailability: {\r\n    width: \"120px\",\r\n    marginLeft: \"50px\",\r\n  },\r\n  selectDeferred: {\r\n    width: \"120px\",\r\n    marginLeft: \"50px\",\r\n  },\r\n  timeIcon: {\r\n    position: \"absolute\",\r\n    margin: \"auto\",\r\n    marginLeft: \"8px\",\r\n    textAlign: \"center\",\r\n    top: \"50%\",\r\n    bottom: \"50%\",\r\n  },\r\n  truckIcon: {\r\n    position: \"absolute\",\r\n    margin: \"auto\",\r\n    marginLeft: \"8px\",\r\n    textAlign: \"center\",\r\n    top: \"50%\",\r\n    bottom: \"50%\",\r\n  },\r\n  labelRequirement: {\r\n    display: \"inline-block\",\r\n    marginLeft: \"46px\",\r\n    marginRight: \"16px\",\r\n    marginTop: \"7px\",\r\n    marginBottom: \"7px\",\r\n  },\r\n  selectRequirement: {\r\n    width: \"120px\",\r\n    marginLeft: \"50px\",\r\n  },\r\n  avatar: {\r\n    display: \"inline-flex\",\r\n  },\r\n  symbol: {\r\n    display: \"inline-flex\",\r\n    color: text.light,\r\n    textShadow: `-1px 0 ${text.subtle}, 0 1px ${text.subtle}, 1px 0 ${text.subtle}, 0 -1px ${text.subtle}`,\r\n  },\r\n  label: { marginLeft: \"0.5em\" },\r\n  labelAvailable: { marginRight: \"16px\" },\r\n  arrowUpward: {\r\n    transform: \"translate(0,10px) scale(1,1.5)\",\r\n    color: available,\r\n  },\r\n  unknown: {\r\n    transform: \"translate(0,10px) scale(1, 2.5) rotate(90deg)\",\r\n    color: unknown,\r\n  },\r\n  arrowDownward: {\r\n    transform: \"translate(0,10px) scale(1,1.5)\",\r\n    color: unavailable,\r\n  },\r\n});\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport {\r\n  AccessTime as AccessTimeIcon,\r\n  AirportShuttle as AirportShuttleIcon,\r\n  ArrowDownward as ArrowDownwardIcon,\r\n  ArrowUpward as ArrowUpwardIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n  Info as InfoIcon,\r\n  Remove as RemoveIcon,\r\n} from \"@material-ui/icons\";\r\nimport {\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  Collapse,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormGroup,\r\n  IconButton,\r\n  MenuItem,\r\n  Select,\r\n  Switch,\r\n  Tooltip,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { cloneDeep, isEqual, isUndefined, range } from \"lodash\";\r\nimport { fetchPreference, selectPreference, updatePreference } from \"../../controllers/preference/action\";\r\nimport { selectUser, updateUser } from \"controllers/user/action\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { connect } from \"react-redux\";\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport moment from \"moment\";\r\nimport styles from \"./styles\";\r\nimport { vehicle } from \"parking-common\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nclass PrkControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      expanded: false,\r\n    };\r\n  }\r\n\r\n  isLogin = isTrue(process.env.REACT_APP_LOGIN);\r\n  isMarkers = isTrue(process.env.REACT_APP_MARKERS);\r\n  isPredictions = isTrue(process.env.REACT_APP_PREDICTIONS);\r\n  isDeferred = isTrue(process.env.REACT_APP_DEFERRED);\r\n  isVehicleType = isTrue(process.env.REACT_APP_VEHICLE_TYPE);\r\n  isVehicleLength = isTrue(process.env.REACT_APP_VEHICLE_LENGTH);\r\n\r\n  componentDidMount() {\r\n    this.props.fetchPreference();\r\n    this.updateLayoutProperties();\r\n  }\r\n\r\n  getLayoutProperty = (id, property) => {\r\n    const { mapStyle } = this.props;\r\n    if (mapStyle) {\r\n      const { layers } = mapStyle;\r\n      const layer = layers.find((layer) => layer.id === id);\r\n      return layer && layer.layout[property];\r\n    }\r\n  };\r\n\r\n  setLayoutProperty = (id, property, value) => {\r\n    const { mapStyle, onMapStyle } = this.props;\r\n    if (mapStyle) {\r\n      const updated = JSON.parse(JSON.stringify(mapStyle));\r\n      const { layers } = updated;\r\n      const ids = Array.isArray(id) ? id : [id];\r\n      layers.filter((layer) => ids.includes(layer.id)).forEach((layer) => (layer.layout[property] = value));\r\n      onMapStyle(updated);\r\n    }\r\n  };\r\n\r\n  updateLayoutProperties = () => {\r\n    const { mapStyle, onMapStyle, user, preference } = this.props;\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    if (mapStyle) {\r\n      const updated = JSON.parse(JSON.stringify(mapStyle));\r\n      const { layers } = updated;\r\n      [\r\n        {\r\n          id: [\"spaces\", \"spaces-border\", \"spaces-symbol\", \"spaces-polygon\", \"spaces-stroke\"],\r\n          property: \"visibility\",\r\n          value: this.isMarkers && preferences.markers ? \"visible\" : \"none\",\r\n        },\r\n        {\r\n          id: \"predictions\",\r\n          property: \"visibility\",\r\n          value: this.isPredictions && preferences.predictions ? \"visible\" : \"none\",\r\n        },\r\n      ].forEach(({ id, property, value }) => {\r\n        const ids = Array.isArray(id) ? id : [id];\r\n        layers.filter((layer) => ids.includes(layer.id)).forEach((layer) => (layer.layout[property] = value));\r\n      });\r\n      onMapStyle(updated);\r\n    }\r\n  };\r\n\r\n  updateUserPreferences = (key, value) => {\r\n    const { user } = this.props;\r\n    if (this.isLogin && user) {\r\n      const { preferences } = user;\r\n      const prev = cloneDeep(preferences);\r\n      const temp = cloneDeep(preferences);\r\n      temp[key] = value;\r\n      this.props.updateUser({ preferences: temp });\r\n      if (!isEqual(prev, temp)) {\r\n        this.props.onChange();\r\n      }\r\n    } else {\r\n      const { preference } = this.props;\r\n      const prev = cloneDeep(preference);\r\n      const temp = cloneDeep(preference);\r\n      temp[key] = value;\r\n      this.props.updatePreference(temp);\r\n      if (!isEqual(prev, temp)) {\r\n        this.props.onChange();\r\n      }\r\n    }\r\n  };\r\n\r\n  handleChange = (key) => (event, value) => {\r\n    switch (key) {\r\n      case \"markers\":\r\n        this.setState({ [key]: value });\r\n        this.setLayoutProperty(\r\n          [\"spaces\", \"spaces-border\", \"spaces-symbol\", \"spaces-heatmap\"],\r\n          \"visibility\",\r\n          value ? \"visible\" : \"none\"\r\n        );\r\n        this.updateUserPreferences(key, value);\r\n        break;\r\n      case \"predictions\":\r\n        this.setState({ [key]: value });\r\n        this.setLayoutProperty(\"predictions\", \"visibility\", value ? \"visible\" : \"none\");\r\n        this.updateUserPreferences(key, value);\r\n        break;\r\n      case \"availability\":\r\n      case \"requirement\":\r\n      case \"vehicle\":\r\n      case \"deferred\":\r\n        // console.log({ key, value: event.target.value });\r\n        // this.setState({ [key]: event.target.value });\r\n        this.updateUserPreferences(key, event.target.value);\r\n        break;\r\n      default:\r\n        this.setState({ [key]: value });\r\n    }\r\n  };\r\n\r\n  renderExtraSpaces() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !(user && user.scope && user.scope.includes(\"user\"));\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    return (\r\n      this.isMarkers && (\r\n        <FormControl className={classes.form} component=\"fieldset\">\r\n          <FormGroup aria-label=\"position\">\r\n            <div className={classes.formEntry}>\r\n              <FormControlLabel\r\n                value=\"markers\"\r\n                control={\r\n                  <Switch\r\n                    checked={preferences.markers}\r\n                    color=\"primary\"\r\n                    onChange={this.handleChange(\"markers\")}\r\n                    disabled={guest}\r\n                  />\r\n                }\r\n                label=\"Display Extra Spaces\"\r\n                labelPlacement=\"end\"\r\n              />\r\n              <Tooltip\r\n                title={`Display extra spaces that do not have real time occupancy ${\r\n                  this.isPredictions ? \"or prediction \" : \"\"\r\n                }information.`}\r\n              >\r\n                <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n              </Tooltip>\r\n            </div>\r\n          </FormGroup>\r\n        </FormControl>\r\n      )\r\n    );\r\n  }\r\n\r\n  renderPredictions() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !(user && user.scope && user.scope.includes(\"user\"));\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    return (\r\n      this.isPredictions && (\r\n        <FormControl className={classes.form} component=\"fieldset\">\r\n          <FormGroup aria-label=\"position\">\r\n            <div className={classes.formEntry}>\r\n              <FormControlLabel\r\n                value=\"predictions\"\r\n                control={\r\n                  <Switch\r\n                    checked={preferences.predictions}\r\n                    color=\"primary\"\r\n                    onChange={this.handleChange(\"predictions\")}\r\n                    disabled={guest}\r\n                  />\r\n                }\r\n                label=\"Display Predictions\"\r\n                labelPlacement=\"end\"\r\n              />\r\n              <Tooltip title=\"Length of time in the future to display predicted availability of spaces.\">\r\n                <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n              </Tooltip>\r\n            </div>\r\n            <div className={classes.formEntry}>\r\n              <Select\r\n                className={classes.selectAvailability}\r\n                color=\"primary\"\r\n                value={Boolean(preferences.availability) ? preferences.availability : 5}\r\n                onChange={this.handleChange(\"availability\")}\r\n                disabled={guest || (user && !user.preferences.predictions)}\r\n              >\r\n                <MenuItem value={5}>5 minutes</MenuItem>\r\n                <MenuItem value={15}>15 minutes</MenuItem>\r\n                <MenuItem value={30}>30 minutes</MenuItem>\r\n              </Select>\r\n            </div>\r\n          </FormGroup>\r\n        </FormControl>\r\n      )\r\n    );\r\n  }\r\n\r\n  renderDeferred() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !user?.scope?.includes(\"user\");\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    const m = moment().startOf(\"minutes\").get(\"minutes\");\r\n    const t = moment()\r\n      .startOf(\"minutes\")\r\n      .set(\"minutes\", Math.floor(m / 15) * 15);\r\n    const k = t.get(\"hours\") * 60 + t.get(\"minutes\");\r\n    return (\r\n      this.isDeferred && (\r\n        <FormControl className={classes.form} component=\"fieldset\">\r\n          <FormGroup aria-label=\"position\">\r\n            <div className={classes.formEntry}>\r\n              <AccessTimeIcon className={classes.timeIcon} color=\"primary\" />\r\n              <Typography className={classes.labelRequirement} variant=\"body1\">\r\n                Time Available\r\n              </Typography>\r\n              <Tooltip title=\"Specific time of the day to determine availability according to space type.\">\r\n                <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n              </Tooltip>\r\n            </div>\r\n            <div className={classes.formEntry}>\r\n              <Select\r\n                key={`deferred-select-${k}`}\r\n                className={classes.selectDeferred}\r\n                color=\"primary\"\r\n                value={!isUndefined(preferences.deferred) ? preferences.deferred : 0}\r\n                onChange={this.handleChange(\"deferred\")}\r\n                disabled={guest || (user && !user.preferences.deferred)}\r\n                renderValue={(v) =>\r\n                  t\r\n                    .clone()\r\n                    .add(v * 15, \"minutes\")\r\n                    .format(\"hh:mm a\")\r\n                }\r\n              >\r\n                {range(0, 10).map((v) => {\r\n                  return (\r\n                    <MenuItem key={`deferred-item-${k + v * 15}-${v}`} value={v}>\r\n                      {t\r\n                        .clone()\r\n                        .add(v * 15, \"minutes\")\r\n                        .format(\"hh:mm a\")}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </div>\r\n          </FormGroup>\r\n        </FormControl>\r\n      )\r\n    );\r\n  }\r\n\r\n  renderVehicleType() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !(user && user.scope && user.scope.includes(\"user\"));\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    return (\r\n      this.isVehicleType && (\r\n        <FormControl className={classes.form} component=\"fieldset\">\r\n          <FormGroup aria-label=\"position\">\r\n            <div className={classes.formEntry}>\r\n              <AirportShuttleIcon className={classes.truckIcon} color=\"primary\" />\r\n              <Typography className={classes.labelRequirement} variant=\"body1\">\r\n                Vehicle Type\r\n              </Typography>\r\n              <Tooltip title=\"Vehicle type to determine applicable spots for parking.\">\r\n                <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n              </Tooltip>\r\n            </div>\r\n            <div className={classes.formEntry}>\r\n              <Select\r\n                className={classes.selectRequirement}\r\n                color=\"primary\"\r\n                value={preferences.vehicle ? preferences.vehicle : vehicle.Passenger.label}\r\n                onChange={this.handleChange(\"vehicle\")}\r\n                disabled={guest}\r\n              >\r\n                {/* {vehicle.values().map((v) => (\r\n                  <MenuItem key={v.name} value={v.label}>\r\n                    {v.label}\r\n                  </MenuItem>\r\n                ))} */}\r\n                <MenuItem value={\"All\"}>All</MenuItem>\r\n                <MenuItem value={vehicle.Passenger.label}>Paid</MenuItem>\r\n                <MenuItem value={vehicle.Commercial.label}>{vehicle.Commercial.label}</MenuItem>\r\n                <MenuItem value={vehicle.Transport.label}>Bus</MenuItem>\r\n              </Select>\r\n            </div>\r\n          </FormGroup>\r\n        </FormControl>\r\n      )\r\n    );\r\n  }\r\n\r\n  renderVehicleLength() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !(user && user.scope && user.scope.includes(\"user\"));\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    return (\r\n      this.isVehicleLength && (\r\n        <FormControl className={classes.form} component=\"fieldset\">\r\n          <FormGroup aria-label=\"position\">\r\n            <div className={classes.formEntry}>\r\n              <AirportShuttleIcon className={classes.truckIcon} color=\"primary\" />\r\n              <Typography className={classes.labelRequirement} variant=\"body1\">\r\n                Vehicle Length\r\n              </Typography>\r\n              <Tooltip title=\"Vehicle length or minimum length of available space required for parking.\">\r\n                <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n              </Tooltip>\r\n            </div>\r\n            <div className={classes.formEntry}>\r\n              <Select\r\n                className={classes.selectRequirement}\r\n                color=\"primary\"\r\n                value={Boolean(preferences.requirement) ? preferences.requirement : 20}\r\n                onChange={this.handleChange(\"requirement\")}\r\n                disabled={guest}\r\n              >\r\n                <MenuItem value={20}>20 feet</MenuItem>\r\n                <MenuItem value={25}>25 feet</MenuItem>\r\n                <MenuItem value={30}>30 feet</MenuItem>\r\n                <MenuItem value={40}>40 feet</MenuItem>\r\n                <MenuItem value={50}>50 feet</MenuItem>\r\n                <MenuItem value={60}>60 feet</MenuItem>\r\n              </Select>\r\n            </div>\r\n          </FormGroup>\r\n        </FormControl>\r\n      )\r\n    );\r\n  }\r\n\r\n  renderLegend() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !(user && user.scope && user.scope.includes(\"user\"));\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    return (\r\n      <>\r\n        <div className={classes.formEntry}>\r\n          <ArrowUpwardIcon className={clsx(classes.avatar, classes.arrowUpward)} />\r\n          <Typography className={clsx(classes.avatar, classes.label, classes.labelAvailable)}>\r\n            {guest || !preferences.predictions ? \"Parking Available\" : \"Open parking highly likely\"}\r\n          </Typography>\r\n          <Tooltip\r\n            title={\r\n              guest || !preferences.predictions ? (\r\n                <span>\r\n                  <p>Gray: The space does not have real time status available.</p>\r\n                  <p>Green: There is currently enough space available to park.</p>\r\n                  <p>Yellow: There may be enough space available to park.</p>\r\n                  {/* <p>\r\n                    Yellow: The entire space is currently open, but there is not enough total space to park. There may\r\n                    be enough room to park if adjoining sections are open.\r\n                  </p> */}\r\n                  <p>Red: There is currently not enough space available to park.</p>\r\n                </span>\r\n              ) : (\r\n                <span>\r\n                  <p>Gray: The space does not have real time status available.</p>\r\n                  <p>Green: It is likely that enough space will be available to park.</p>\r\n                  <p>\r\n                    Yellow: It is likely that the entire space will be open, but there is not enough total space to\r\n                    park. There may be enough room to park if adjoining sections are open.\r\n                  </p>\r\n                  <p>Red: It is likely that there will not be enough space available to park.</p>\r\n                </span>\r\n              )\r\n            }\r\n          >\r\n            <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n          </Tooltip>\r\n        </div>\r\n        <div className={classes.formEntry}>\r\n          <RemoveIcon className={clsx(classes.avatar, classes.unknown)} />\r\n          <Typography className={clsx(classes.avatar, classes.label)}></Typography>\r\n        </div>\r\n        <div className={classes.formEntry}>\r\n          <ArrowDownwardIcon className={clsx(classes.avatar, classes.arrowDownward)} />\r\n          <Typography className={clsx(classes.avatar, classes.label)}>\r\n            {guest || !preferences.predictions ? \"Parking Unavailable\" : \"Open parking unlikely\"}\r\n          </Typography>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { expanded } = this.state;\r\n    return (\r\n      <div className={classes.root}>\r\n        <Card className={classes.card}>\r\n          <CardActions className={classes.actions}>\r\n            <Typography variant=\"body1\" className={classes.title}>\r\n              Dynacurb Parking App\r\n            </Typography>\r\n            <IconButton\r\n              className={clsx(classes.icons, classes.expand, {\r\n                [classes.expandOpen]: expanded,\r\n              })}\r\n              onClick={(action) => this.handleChange(\"expanded\")(action, !expanded)}\r\n              aria-expanded={expanded}\r\n              aria-label=\"show more\"\r\n            >\r\n              <ExpandMoreIcon />\r\n            </IconButton>\r\n          </CardActions>\r\n          <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n            <CardContent className={classes.content}>\r\n              {this.renderExtraSpaces()}\r\n              {this.renderPredictions()}\r\n              {this.renderDeferred()}\r\n              {this.renderVehicleType()}\r\n              {this.renderVehicleLength()}\r\n              {this.renderLegend()}\r\n            </CardContent>\r\n          </Collapse>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPrkControl.propTypes = {\r\n  mapStyle: PropTypes.object,\r\n  onMapStyle: PropTypes.func.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  preference: selectPreference(state),\r\n  user: selectUser(state),\r\n});\r\n\r\nconst mapActionToProps = {\r\n  fetchPreference,\r\n  updatePreference,\r\n  updateUser,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(withStyles(styles)(PrkControl));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  content: {\r\n    padding: \"0 24px 4px 24px\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress\r\n} from \"@material-ui/core\";\r\n\r\nclass PrkDialog extends React.Component {\r\n  static defaultProps = {\r\n    open: false\r\n  };\r\n\r\n  handleClick = button => () => {\r\n    if (button.onClick != null) {\r\n      button.onClick();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      classes,\r\n      title,\r\n      children,\r\n      buttons,\r\n      open,\r\n      busy,\r\n      fullScreen,\r\n      fullWidth\r\n    } = this.props;\r\n    return (\r\n      <Dialog\r\n        fullScreen={fullScreen ? true : false}\r\n        fullWidth={fullWidth ? true : false}\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n        <DialogContent className={classes.content}>{children}</DialogContent>\r\n        <DialogActions>\r\n          {busy ? <CircularProgress /> : null}\r\n          {buttons &&\r\n            buttons.map(button => (\r\n              <Button\r\n                key={button.label}\r\n                onClick={this.handleClick(button)}\r\n                variant={button.variant}\r\n                color=\"primary\"\r\n                disabled={button.disabled}\r\n              >\r\n                {button.label}\r\n              </Button>\r\n            ))}\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nPrkDialog.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  children: PropTypes.element.isRequired,\r\n  buttons: PropTypes.arrayOf(PropTypes.object.isRequired),\r\n  open: PropTypes.bool.isRequired,\r\n  fullScreen: PropTypes.bool,\r\n  fullWidth: PropTypes.bool\r\n};\r\n\r\nexport default withStyles(styles)(PrkDialog);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  root: {\r\n    height: \"0px\",\r\n    bottom: 0,\r\n    top: \"auto\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { AppBar, Snackbar, IconButton } from \"@material-ui/core\";\r\nimport { Close as CloseIcon } from \"@material-ui/icons\";\r\nimport { error } from \"constants/palette\";\r\nimport { clearError, selectErrorTokens } from \"controllers/error/action\";\r\n\r\nclass PrkFooter extends React.Component {\r\n  handleClear = key => () => {\r\n    this.props.clearError(key);\r\n  };\r\n\r\n  render() {\r\n    const { classes, errors } = this.props;\r\n    const key =\r\n      errors &&\r\n      Object.keys(errors)\r\n        .filter(k => !errors[k].cleared)\r\n        .sort((a, b) => errors[a].timestamp - errors[b].timestamp)\r\n        .find(() => true);\r\n    const token = errors && key && errors[key];\r\n    return (\r\n      <React.Fragment>\r\n        <AppBar position=\"fixed\" color=\"primary\" className={classes.root} />\r\n        <Snackbar\r\n          anchorOrigin={{\r\n            vertical: \"bottom\",\r\n            horizontal: \"center\"\r\n          }}\r\n          ContentProps={{ style: { background: error } }}\r\n          open={token !== null && token !== undefined}\r\n          autoHideDuration={Math.min(\r\n            Math.max(\r\n              (token && token.error ? token.error.length : 0) * 100,\r\n              5000\r\n            ),\r\n            15000\r\n          )}\r\n          onClose={this.handleClear(key)}\r\n          message={token && token.error}\r\n          action={\r\n            <React.Fragment>\r\n              <IconButton\r\n                size=\"small\"\r\n                aria-label=\"clear\"\r\n                color=\"inherit\"\r\n                onClick={this.handleClear(key)}\r\n              >\r\n                <CloseIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </React.Fragment>\r\n          }\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  errors: selectErrorTokens(state)\r\n});\r\n\r\nconst mapActionToProps = {\r\n  clearError\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapActionToProps\r\n)(withStyles(styles)(PrkFooter));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  root: {\r\n    display: \"-webkit-inline-box\",\r\n    textAlign: \"right\",\r\n    margin: \"1em\",\r\n    position: \"absolute\",\r\n    right: \"0px\",\r\n    zIndex: 1000\r\n  },\r\n  space: { paddingRight: \".5em\" },\r\n  icon: { paddingTop: \".1em\" },\r\n  title: { paddingTop: \".1em\", paddingLeft: \".1em\", paddingRight: \".5em\" },\r\n  button: {}\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { Paper, Typography, Button } from \"@material-ui/core\";\r\nimport { AccountCircle as AccountCircleIcon } from \"@material-ui/icons\";\r\nimport { logoutUser, selectUser } from \"controllers/user/action\";\r\n\r\nclass PrkHeader extends React.Component {\r\n  findUsername = () => {\r\n    const { user } = this.props;\r\n    if (!user) {\r\n      return \"Unknown\";\r\n    } else if (user.scope === \"\") {\r\n      return \"\";\r\n    } else {\r\n      return user.email;\r\n    }\r\n  };\r\n\r\n  findButtonText = () => {\r\n    const { user } = this.props;\r\n    if (!user) {\r\n      return \"Sign In\";\r\n    } else if (user.scope === \"\") {\r\n      return \"Sign in for Predictions\";\r\n    } else {\r\n      return \"Log Out\";\r\n    }\r\n  };\r\n\r\n  handleLogout = () => {\r\n    this.props.logoutUser();\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <Paper className={classes.root}>\r\n        <div className={classes.space} />\r\n        <AccountCircleIcon className={classes.icon} />\r\n        <Typography variant=\"body1\" className={classes.title}>\r\n          {this.findUsername()}\r\n        </Typography>\r\n        <Button\r\n          variant=\"text\"\r\n          size=\"small\"\r\n          className={classes.button}\r\n          onClick={this.handleLogout}\r\n        >\r\n          {this.findButtonText()}\r\n        </Button>\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  user: selectUser(state)\r\n});\r\n\r\nconst mapActionToProps = {\r\n  logoutUser\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapActionToProps\r\n)(withStyles(styles)(PrkHeader));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = (theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n  },\r\n  view: {\r\n    overflow: \"hidden\",\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n});\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { withTheme } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport clsx from \"clsx\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { PrkBusy, PrkFooter, PrkHeader } from \"..\";\r\nimport { getDocumentHeight, isTrue } from \"../../utils/utils\";\r\nimport styles from \"./styles\";\r\n\r\nclass PrkLayout extends React.Component {\r\n  state = { error: null, info: null };\r\n\r\n  isLogin = isTrue(process.env.REACT_APP_LOGIN);\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", this.updatePageSize);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updatePageSize);\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    this.setState({ error: error, info: info });\r\n  }\r\n\r\n  updatePageSize = () => {\r\n    this.forceUpdate();\r\n  };\r\n\r\n  render() {\r\n    const { classes, page, theme } = this.props;\r\n    const { error } = this.state;\r\n    if (error) {\r\n      return <Redirect push to={`/error?message=${error.message}`} />;\r\n    }\r\n    const height = getDocumentHeight() - theme.mixins.toolbar.minHeight - 1;\r\n    return (\r\n      <div className={classes.root}>\r\n        {this.isLogin && <PrkHeader page={page} />}\r\n        {/* {name !== \"Error\" && <PrkNavigation page={page} />} */}\r\n        <div className={classes.content}>\r\n          <div className={classes.toolbar} />\r\n          <div className={clsx(classes.view)} style={{ height: height }}>\r\n            {this.props.children}\r\n          </div>\r\n        </div>\r\n        <PrkFooter />\r\n        <PrkBusy />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPrkLayout.propTypes = {\r\n  page: PropTypes.object.isRequired,\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({});\r\n\r\nconst mapActionToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(withTheme(withStyles(styles)(PrkLayout)));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  form: {},\r\n  padding: {\r\n    marginTop: \"1em\"\r\n  },\r\n  text: {\r\n    marginTop: \".5em\",\r\n    width: \"100%\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { TextField, Grid, Tabs, Tab } from \"@material-ui/core\";\r\nimport { PrkDialog, PrkTheme, PrkFooter } from \"components\";\r\nimport {\r\n  continueUser,\r\n  loginUser,\r\n  selectLoginUser\r\n} from \"controllers/user/action\";\r\nimport { createUser, selectCreateUser } from \"controllers/users/action\";\r\n\r\nclass PrkLogin extends React.Component {\r\n  state = {\r\n    tab: 0,\r\n    email: \"\",\r\n    password: \"\",\r\n    confirm: \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { continueUser } = this.props;\r\n    continueUser();\r\n  }\r\n\r\n  validate = () => {\r\n    const { email, password, confirm, tab } = this.state;\r\n    switch (tab) {\r\n      case 0:\r\n        return email && password;\r\n      case 1:\r\n        return email && password && password === confirm;\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  handleLogin = () => {\r\n    if (this.validate()) {\r\n      const { email, password } = this.state;\r\n      this.props.loginUser({\r\n        email: email,\r\n        password: password\r\n      });\r\n      this.setState({\r\n        password: \"\",\r\n        confirm: \"\"\r\n      });\r\n    }\r\n  };\r\n\r\n  handleCreate = () => {\r\n    if (this.validate()) {\r\n      const { email, password } = this.state;\r\n      this.props.createUser({\r\n        email: email,\r\n        password: password\r\n      });\r\n      this.setState({\r\n        tab: 0,\r\n        password: \"\",\r\n        confirm: \"\"\r\n      });\r\n    }\r\n  };\r\n\r\n  handleGuest = () => {\r\n    this.props.loginUser({\r\n      email: \"guest.parking@pnnl.gov\",\r\n      password: \"guest\"\r\n    });\r\n    this.setState({\r\n      password: \"\",\r\n      confirm: \"\"\r\n    });\r\n  };\r\n\r\n  handleChange = key => (event, value) => {\r\n    this.setState({\r\n      [key]: event.target && event.target.value ? event.target.value : value\r\n    });\r\n  };\r\n\r\n  handleRef = ref => {\r\n    this.dialog = ref;\r\n  };\r\n\r\n  buttons = () => {\r\n    const { tab } = this.state;\r\n    switch (tab) {\r\n      case 0:\r\n        return [\r\n          {\r\n            label: \"Sign In\",\r\n            disabled: !this.validate(),\r\n            variant: \"contained\",\r\n            onClick: this.handleLogin\r\n          },\r\n          {\r\n            label: \"Continue as Guest\",\r\n            disabled: false,\r\n            variant: \"text\",\r\n            onClick: this.handleGuest\r\n          }\r\n        ];\r\n      case 1:\r\n        return [\r\n          {\r\n            label: \"Submit\",\r\n            disabled: !this.validate(),\r\n            variant: \"contained\",\r\n            onClick: this.handleCreate\r\n          }\r\n        ];\r\n      default:\r\n        return [];\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { classes, auth } = this.props;\r\n    const { email, password, confirm, tab } = this.state;\r\n    if (auth) {\r\n      return null;\r\n    }\r\n    return (\r\n      <PrkTheme>\r\n        <PrkDialog\r\n          fullScreen={false}\r\n          fullWidth={true}\r\n          open={!auth}\r\n          title={\"\"}\r\n          buttons={this.buttons()}\r\n        >\r\n          <form className={classes.form} noValidate autoComplete=\"off\">\r\n            <Grid container spacing={0}>\r\n              <Grid item xs={12}>\r\n                <Tabs value={tab} onChange={this.handleChange(\"tab\")}>\r\n                  <Tab label=\"Sign In\" value={0} />\r\n                  <Tab label=\"New Account\" value={1} />\r\n                </Tabs>\r\n              </Grid>\r\n              <Grid item xs={12} className={classes.padding} />\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  id=\"email\"\r\n                  label=\"Login Email\"\r\n                  className={classes.text}\r\n                  value={email}\r\n                  onChange={this.handleChange(\"email\")}\r\n                  margin=\"none\"\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  id=\"password\"\r\n                  label=\"Password\"\r\n                  className={classes.text}\r\n                  value={password}\r\n                  onChange={this.handleChange(\"password\")}\r\n                  type=\"password\"\r\n                  margin=\"none\"\r\n                />\r\n              </Grid>\r\n              {tab === 1 && (\r\n                <Grid item xs={12}>\r\n                  <TextField\r\n                    id=\"confirm\"\r\n                    label=\"Confirm Password\"\r\n                    className={classes.text}\r\n                    value={confirm}\r\n                    onChange={this.handleChange(\"confirm\")}\r\n                    type=\"password\"\r\n                    margin=\"none\"\r\n                  />\r\n                </Grid>\r\n              )}\r\n              <Grid item xs={12} className={classes.padding} />\r\n            </Grid>\r\n          </form>\r\n        </PrkDialog>\r\n        <PrkFooter />\r\n      </PrkTheme>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  auth: selectLoginUser(state),\r\n  created: selectCreateUser(state)\r\n});\r\n\r\nconst mapActionToProps = {\r\n  continueUser,\r\n  loginUser,\r\n  createUser\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapActionToProps\r\n)(withStyles(styles)(PrkLogin));\r\n","import ReactGA from \"react-ga4\";\r\nimport { isEmpty } from \"lodash\";\r\n\r\nexport class Analytics {\r\n  static instance;\r\n\r\n  /**\r\n   * Singleton getter method.\r\n   *\r\n   * @returns the single instance\r\n   */\r\n  static getInstance() {\r\n    if (!Analytics.instance) {\r\n      Analytics.instance = new Analytics();\r\n    }\r\n    return Analytics.instance;\r\n  }\r\n\r\n  _initialized;\r\n\r\n  constructor() {\r\n    this._initialized = false;\r\n    this.initialize();\r\n  }\r\n\r\n  initialize = () => {\r\n    if (!this._initialized && !isEmpty(process.env.REACT_APP_GA_CLIENT_ID)) {\r\n      ReactGA.initialize(process.env.REACT_APP_GA_CLIENT_ID);\r\n      this._initialized = true;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Called for a page view.\r\n   *\r\n   * @param path\r\n   * @param query\r\n   */\r\n  pageview = (path, query = \"\") => {\r\n    if (this._initialized) {\r\n      ReactGA.send({ hitType: \"pageview\", page: `${path}${query}`, title: \"Page View\" });\r\n    } else {\r\n      console.log(`Analytics Debug Page View: ${path}${query}`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Called for explicit user actions.\r\n   *\r\n   * @param category\r\n   * @param action\r\n   * @param label\r\n   */\r\n  event = (category, action, label = \"\") => {\r\n    if (this._initialized) {\r\n      ReactGA.event({ category, action, label });\r\n    } else {\r\n      console.log(`Analytics Debug Event: ${category} -> ${action}${label ? \" (\" + label + \")\" : \"\"}`);\r\n    }\r\n  };\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport { PrkLogin, PrkNotice } from \"../components\";\r\n\r\nimport { Analytics } from \"../utils/analytics\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { isTrue } from \"../utils/utils\";\r\nimport { selectNotice } from \"../controllers/common/action\";\r\nimport { selectUser } from \"../controllers/user/action\";\r\n\r\nclass Root extends React.Component {\r\n  isNotice = isTrue(process.env.REACT_APP_NOTICE);\r\n\r\n  isLogin = isTrue(process.env.REACT_APP_LOGIN);\r\n\r\n  componentDidMount() {\r\n    const { page } = this.props;\r\n    Analytics.getInstance().pageview(page?.path ?? \"/unknown\");\r\n  }\r\n\r\n  render() {\r\n    const { notice, user, page, renderRoute } = this.props;\r\n    if (this.isNotice && !notice) {\r\n      return <PrkNotice />;\r\n    } else if (this.isLogin && page.user && !user) {\r\n      return <PrkLogin />;\r\n    } else {\r\n      return renderRoute(this.props);\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  notice: selectNotice(state),\r\n  user: selectUser(state),\r\n});\r\n\r\nconst mapActionToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(Root);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  verifiedTint,\r\n  errorTint,\r\n  infoTint,\r\n  warningTint\r\n} from \"constants/palette\";\r\n\r\nconst styles = {\r\n  success: {\r\n    backgroundColor: verifiedTint\r\n  },\r\n  error: {\r\n    backgroundColor: errorTint\r\n  },\r\n  info: {\r\n    backgroundColor: infoTint\r\n  },\r\n  warning: {\r\n    backgroundColor: warningTint\r\n  },\r\n  icon: {\r\n    fontSize: 20\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: \"1em\"\r\n  },\r\n  message: {\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    textAlign: \"left\"\r\n  },\r\n  snackbar: {\r\n    display: \"inline-block\"\r\n  },\r\n  center: {\r\n    textAlign: \"center\",\r\n    height: \"100%\"\r\n  },\r\n  pad: {\r\n    padding: 80\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { SnackbarContent } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  CheckCircle as CheckCircleIcon,\r\n  Error as ErrorIcon,\r\n  Info as InfoIcon,\r\n  Warning as WarningIcon,\r\n} from \"@material-ui/icons\";\r\nimport clsx from \"clsx\";\r\nimport _ from \"lodash\";\r\nimport PropTypes from \"prop-types\";\r\nimport queryString from \"query-string\";\r\nimport React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport styles from \"./styles\";\r\n\r\nconst icons = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nclass Error extends React.Component {\r\n  state = {\r\n    message: \"\",\r\n  };\r\n\r\n  static defaultProps = {\r\n    variant: \"error\",\r\n    label: \"Parking has encountered an error.\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { location } = this.props;\r\n    const query = queryString.parse(location.search);\r\n    if (!_.isEmpty(query.message)) {\r\n      this.setState({ message: query.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { variant, label, classes } = this.props;\r\n    const { message } = this.state;\r\n    const Icon = icons[variant];\r\n    return (\r\n      <div className={clsx(classes.center, classes.pad)}>\r\n        <SnackbarContent\r\n          className={clsx(classes[variant], classes.snackbar)}\r\n          aria-describedby=\"client-snackbar\"\r\n          message={\r\n            <span id=\"client-snackbar\" className={classes.message}>\r\n              <Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n              {label}\r\n              <br />\r\n              {message}\r\n            </span>\r\n          }\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nError.propTypes = {\r\n  variant: PropTypes.oneOf([\"success\", \"warning\", \"error\", \"info\"]),\r\n};\r\n\r\nexport default withRouter(withStyles(styles)(Error));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { Error as ErrorIcon } from \"@material-ui/icons\";\r\nimport Element from \"./index\";\r\n\r\nconst route = {\r\n  sequence: 100,\r\n  name: \"Error\",\r\n  label: \"Error\",\r\n  path: \"/error\",\r\n  hidden: true,\r\n  element: Element,\r\n  icon: ErrorIcon,\r\n};\r\n\r\nexport default route;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { PrkLayout } from \"../../components\";\r\nimport RouteBase from \"../RouteBase\";\r\nimport Error from \"./Error\";\r\n\r\nconst Root = (props) => (\r\n  <RouteBase\r\n    {...props}\r\n    renderRoute={(p) => (\r\n      <PrkLayout {...p}>\r\n        <Error {...p} />\r\n      </PrkLayout>\r\n    )}\r\n  />\r\n);\r\n\r\nexport default Root;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  verifiedTint,\r\n  errorTint,\r\n  infoTint,\r\n  warningTint\r\n} from \"constants/palette\";\r\n\r\nconst styles = {\r\n  success: {\r\n    backgroundColor: verifiedTint\r\n  },\r\n  error: {\r\n    backgroundColor: errorTint\r\n  },\r\n  info: {\r\n    backgroundColor: infoTint\r\n  },\r\n  warning: {\r\n    backgroundColor: warningTint\r\n  },\r\n  icon: {\r\n    fontSize: 20\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: \"1em\"\r\n  },\r\n  message: {\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    textAlign: \"left\"\r\n  },\r\n  snackbar: {\r\n    display: \"inline-block\"\r\n  },\r\n  center: {\r\n    textAlign: \"center\",\r\n    height: \"100%\"\r\n  },\r\n  pad: {\r\n    padding: 80\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { SnackbarContent } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  CheckCircle as CheckCircleIcon,\r\n  Error as ErrorIcon,\r\n  Info as InfoIcon,\r\n  Warning as WarningIcon,\r\n} from \"@material-ui/icons\";\r\nimport clsx from \"clsx\";\r\nimport _ from \"lodash\";\r\nimport PropTypes from \"prop-types\";\r\nimport queryString from \"query-string\";\r\nimport React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport styles from \"./styles\";\r\n\r\nconst icons = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nclass NotFound extends React.Component {\r\n  state = {\r\n    message: \"Uh oh, the page you requested could not be found.\",\r\n  };\r\n\r\n  static defaultProps = {\r\n    variant: \"info\",\r\n    label: \"Parking page not found.\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { location } = this.props;\r\n    const query = queryString.parse(location.search);\r\n    if (!_.isEmpty(query.message)) {\r\n      this.setState({ message: query.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { variant, label, classes } = this.props;\r\n    const { message } = this.state;\r\n    const Icon = icons[variant];\r\n    return (\r\n      <div className={clsx(classes.center, classes.pad)}>\r\n        <SnackbarContent\r\n          className={clsx(classes[variant], classes.snackbar)}\r\n          aria-describedby=\"client-snackbar\"\r\n          message={\r\n            <span id=\"client-snackbar\" className={classes.message}>\r\n              <Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n              {label}\r\n              <br />\r\n              {message}\r\n            </span>\r\n          }\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nNotFound.propTypes = {\r\n  variant: PropTypes.oneOf([\"success\", \"warning\", \"error\", \"info\"]),\r\n};\r\n\r\nexport default withRouter(withStyles(styles)(NotFound));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { Error as ErrorIcon } from \"@material-ui/icons\";\r\nimport Element from \"./index\";\r\n\r\nconst route = {\r\n  sequence: 1000,\r\n  name: \"NotFound\",\r\n  label: \"Not Found\",\r\n  path: \"*\",\r\n  hidden: true,\r\n  element: Element,\r\n  icon: ErrorIcon,\r\n};\r\n\r\nexport default route;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { PrkLayout } from \"../../components\";\r\nimport RouteBase from \"../RouteBase\";\r\nimport NotFound from \"./NotFound\";\r\n\r\nconst Root = (props) => (\r\n  <RouteBase\r\n    {...props}\r\n    renderRoute={(p) => (\r\n      <PrkLayout {...p}>\r\n        <NotFound {...p} />\r\n      </PrkLayout>\r\n    )}\r\n  />\r\n);\r\n\r\nexport default Root;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { available, unknown, unavailable, warning, darkest } from \"constants/palette\";\r\n\r\nconst styles = {\r\n  popup: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      borderRadius: \"10px\",\r\n    },\r\n  },\r\n  available: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      border: `3px solid ${available}`,\r\n    },\r\n  },\r\n  unknown: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      border: `3px solid ${unknown}`,\r\n    },\r\n  },\r\n  spaces: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      border: `3px solid ${darkest}`,\r\n    },\r\n  },\r\n  occupied: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      border: `3px solid ${unavailable}`,\r\n    },\r\n  },\r\n  indeterminate: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      border: `3px solid ${warning}`,\r\n    },\r\n  },\r\n  popupHeader: {\r\n    display: \"flex\",\r\n  },\r\n  popupSpacer: {\r\n    flex: \"1 0 auto\",\r\n  },\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\n\r\nimport { Grid, IconButton, Typography } from \"@material-ui/core\";\r\nimport ReactMapGL, { GeolocateControl, Popup, ScaleControl } from \"react-map-gl\";\r\nimport { capitalize, debounce, get, isArray, isEqual, isNumber, isString } from \"lodash\";\r\nimport { fetchMapStyle, selectMapStyle } from \"controllers/map/action\";\r\nimport { fetchPreference, selectPreference, updatePreference } from \"../../controllers/preference/action\";\r\nimport { selectLoginUser, selectUser } from \"controllers/user/action\";\r\n\r\nimport { Close as CloseIcon } from \"@material-ui/icons\";\r\nimport { PrkControl } from \"components\";\r\nimport React from \"react\";\r\nimport { vehicle as VehicleType } from \"parking-common\";\r\nimport clsx from \"clsx\";\r\nimport { connect } from \"react-redux\";\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport moment from \"moment\";\r\nimport styles from \"./styles\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nclass PrkMap extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.map = React.createRef();\r\n    this.state = {\r\n      width: 0,\r\n      height: 0,\r\n      viewport: {\r\n        latitude: 47.61344885026525,\r\n        longitude: -122.34430506224587,\r\n        zoom: 15.0,\r\n        bearing: 0,\r\n        pitch: 0,\r\n      },\r\n      mapStyle: props.mapStyle,\r\n    };\r\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\r\n    this.querySourceData = this.querySourceData.bind(this);\r\n    this.querySourceDataDebounced = debounce(this.querySourceData, 500);\r\n  }\r\n\r\n  isLogin = isTrue(process.env.REACT_APP_LOGIN);\r\n  isAuthenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n  isPredictions = isTrue(process.env.REACT_APP_PREDICTIONS);\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (!state.mapStyle && props.mapStyle) {\r\n      return { mapStyle: props.mapStyle };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { fetchMapStyle } = this.props;\r\n    this.props.fetchPreference();\r\n    fetchMapStyle();\r\n    this.updateWindowDimensions();\r\n    window.addEventListener(\"resize\", this.updateWindowDimensions);\r\n    const intid = window.setInterval(this.querySourceDataDebounced, parseInt(process.env.REACT_APP_POLLING));\r\n    this.setState({ intid });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { intid } = this.state;\r\n    window.clearInterval(intid);\r\n    window.removeEventListener(\"resize\", this.updateWindowDimensions);\r\n  }\r\n\r\n  updateWindowDimensions() {\r\n    this.setState({ width: window.innerWidth, height: window.innerHeight });\r\n  }\r\n\r\n  templateFormat = (template, props) => {\r\n    return template.replace(/{([^{}]+)}/g, (v, k) => get(props, k, `{${k}}`));\r\n  };\r\n\r\n  querySourceData() {\r\n    if (this.map && this.map.current) {\r\n      const { viewport } = this.state;\r\n      const { user, preference } = this.props;\r\n      const { longitude, latitude, zoom } = viewport;\r\n      const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n      const predict = this.isPredictions && get(preferences, \"predictions\", false);\r\n      const m = this.map.current.getMap();\r\n      if (m && m.getStyle) {\r\n        const bounds = m.getBounds();\r\n        const availability = get(preferences, \"availability\", 5);\r\n        const requirement = get(preferences, \"requirement\", 20);\r\n        const vehicle = get(preferences, \"vehicle\", VehicleType.Passenger.label);\r\n        const deferred = get(preferences, \"deferred\", 8);\r\n        const uuid = moment().valueOf();\r\n        const params = {\r\n          x: longitude,\r\n          y: latitude,\r\n          z: zoom,\r\n          n: bounds._ne.lat,\r\n          e: bounds._ne.lng,\r\n          s: bounds._sw.lat,\r\n          w: bounds._sw.lng,\r\n          r: requirement,\r\n          a: availability,\r\n          v: vehicle,\r\n          d: deferred,\r\n          latitude,\r\n          longitude,\r\n          zoom,\r\n          bounds: [bounds._sw.lng, bounds._sw.lat, bounds._ne.lng, bounds._ne.lat],\r\n          requirement,\r\n          availability,\r\n          vehicle,\r\n          deferred,\r\n          uuid\r\n        };\r\n        [\"occupancies\", \"spaces\", \"clustered\"].forEach((s) => {\r\n          const source = m.getSource(s);\r\n          let url = source._options.data;\r\n          url = this.templateFormat(url, params);\r\n          if (s === \"occupancies\") {\r\n            if (predict) {\r\n              url = url.replace(\"occupancies\", \"predictions\");\r\n            }\r\n          }\r\n          source.setData(url);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  transformRequest = (url, resourceType) => {\r\n    const { auth } = this.props;\r\n    switch (resourceType) {\r\n      case \"Source\":\r\n      case \"Style\":\r\n      case \"Tile\":\r\n      case \"Glyphs\":\r\n        return {\r\n          url: url,\r\n          redirect: \"manual\",\r\n          ...(this.isAuthenticate\r\n            ? {\r\n                credentials: \"include\",\r\n                headers: {\r\n                  Authorization: `Token ${auth}`,\r\n                  \"Cache-Control\": \"no-store\",\r\n                },\r\n              }\r\n            : {\r\n                headers: {\r\n                  \"Cache-Control\": \"no-store\",\r\n                },\r\n              }),\r\n        };\r\n      default:\r\n        return {\r\n          url: url,\r\n        };\r\n    }\r\n  };\r\n\r\n  handleChange = (key) => (value) => {\r\n    const { viewport } = this.state;\r\n    switch (key) {\r\n      case \"viewport\":\r\n        if (value.zoom !== undefined) {\r\n          let zoom = value.zoom;\r\n          zoom = Math.min(16.5, zoom);\r\n          zoom = Math.max(5.5, zoom);\r\n          if (zoom !== value.zoom && zoom === viewport.zoom && [16.5, 5.5].includes(zoom)) {\r\n            value.latitude = viewport.latitude;\r\n            value.longitude = viewport.longitude;\r\n          }\r\n          value.zoom = zoom;\r\n        }\r\n        this.setState({ [key]: value }, this.querySourceDataDebounced());\r\n        break;\r\n      default:\r\n      // no need to handle all cases\r\n    }\r\n    this.setState({ [key]: value });\r\n  };\r\n\r\n  handleLoad = (event) => {\r\n    console.log(\"Map-GL finished initial loading.\");\r\n    this.querySourceDataDebounced();\r\n  };\r\n\r\n  handleViewStateChange = () => {\r\n    // hide the popup\r\n    this.setState({ popupInfo: null });\r\n  };\r\n\r\n  handleError = (event) => {\r\n    console.error(event);\r\n  };\r\n\r\n  handleMapStyle = (event) => {\r\n    this.querySourceDataDebounced();\r\n  };\r\n\r\n  handleClick = (event) => {\r\n    this.handleMouseDown(event);\r\n  };\r\n\r\n  handleMouseMove = (event) => {\r\n    this.handleMouseDown(event);\r\n  };\r\n\r\n  handleMouseDown = (event) => {\r\n    const map = this.map.current && this.map.current.getMap();\r\n    if (map) {\r\n      const features = map.queryRenderedFeatures([event.center.x, event.center.y], {\r\n        // filtering on layers isn't working for some reason\r\n        // layers: [\"spaces\", \"occupied\", \"available\"]\r\n      });\r\n      if (features.length > 0) {\r\n        const feature = features[0];\r\n        const layer = feature.layer.id && feature.layer.id.split(\"-\")[0];\r\n        switch (layer) {\r\n          case \"spaces\":\r\n          case \"indeterminate\":\r\n          case \"available\":\r\n          case \"unknown\":\r\n          case \"occupied\":\r\n            const popupInfo = {\r\n              longitude: event.lngLat[0],\r\n              latitude: event.lngLat[1],\r\n              layer: layer,\r\n              properties: feature.properties,\r\n            };\r\n            Object.keys(popupInfo.properties).forEach(\r\n              (key) =>\r\n                (popupInfo.properties[key] =\r\n                  popupInfo.properties[key] === \"null\"\r\n                    ? null\r\n                    : typeof popupInfo.properties[key] === \"string\"\r\n                    ? popupInfo.properties[key].replace(\"_\", \" \")\r\n                    : popupInfo.properties[key])\r\n            );\r\n            this.setState({ popupInfo });\r\n            break;\r\n          default:\r\n        }\r\n      } else {\r\n        this.setState({ popupInfo: null });\r\n      }\r\n    }\r\n  };\r\n\r\n  isAuthenticated = () => {\r\n    const { auth } = this.props;\r\n    const { mapStyle } = this.state;\r\n    return (this.isAuthenticate ? auth : true) && mapStyle;\r\n  };\r\n\r\n  renderPopup() {\r\n    const { classes, user, preference } = this.props;\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    const predict = get(preferences, \"predictions\", false);\r\n    const availability = get(preferences, \"availability\", 5);\r\n    const { popupInfo } = this.state;\r\n    const {\r\n      state,\r\n      sensors,\r\n      precise,\r\n      current,\r\n      available,\r\n      required,\r\n      shapeLength,\r\n      occupancies,\r\n      occupancy,\r\n      predictions,\r\n      prediction,\r\n      blockId,\r\n      blockfaceId,\r\n      cvlzId,\r\n      spaceType,\r\n      spaceTyped,\r\n    } = popupInfo ? popupInfo.properties : {};\r\n    let total = 0;\r\n    if (isArray(sensors)) {\r\n      total = sensors.length;\r\n    } else if (isNumber(sensors)) {\r\n      total = sensors;\r\n    } else if (isString(sensors)) {\r\n      total = JSON.parse(sensors).length;\r\n    }\r\n    const open = occupancies ? total - occupancy : 0;\r\n    const segment = shapeLength / Math.max(1, total);\r\n    const min = open < total ? segment * Math.ceil(open / 2) : segment * open;\r\n    const max = segment * open;\r\n    const extra = { min: min, max: max };\r\n    if (occupancies && predictions && predict) {\r\n      if (isNumber(prediction)) {\r\n        const po = total - prediction;\r\n        const pmin = po < total ? segment * Math.ceil(po / 2) : segment * po;\r\n        const pmax = segment * po;\r\n        extra.min = pmin;\r\n        extra.max = pmax;\r\n      } else {\r\n        extra.unavailable = true;\r\n      }\r\n    }\r\n    return (\r\n      popupInfo && (\r\n        <Popup\r\n          className={clsx(classes.popup, classes[popupInfo.layer])}\r\n          tipSize={5}\r\n          anchor=\"top\"\r\n          longitude={popupInfo.longitude}\r\n          latitude={popupInfo.latitude}\r\n          closeButton={false}\r\n        >\r\n          <div className={classes.popupHeader}>\r\n            <div className={classes.popupSpacer} />\r\n            <IconButton\r\n              size=\"small\"\r\n              aria-label=\"clear\"\r\n              color=\"inherit\"\r\n              onClick={() => this.setState({ popupInfo: null })}\r\n            >\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </div>\r\n          {process.env.NODE_ENV === \"development\" && (\r\n            <React.Fragment>\r\n              <Typography variant=\"caption\">{`${capitalize(blockId)} - ${blockfaceId} - ${cvlzId}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`${open} out of ${total} open`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`current: ${current}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`available: ${available}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`prediction: ${prediction}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`required: ${required}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`shapeLength: ${shapeLength}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`state (occupied): ${state}`}</Typography>\r\n              <br />\r\n            </React.Fragment>\r\n          )}\r\n          <Typography>{`${spaceType}: ${spaceTyped}`}</Typography>\r\n          <Typography>{`${Math.round(shapeLength)} ft total length`}</Typography>\r\n          {!occupancies ? (\r\n            <Typography>No occupancy data available</Typography>\r\n          ) : precise ? (\r\n            <Typography>{`${Math.round(current)} ft available now`}</Typography>\r\n          ) : isEqual(min, max) ? (\r\n            <Typography>{`${Math.round(min)} ft available now`}</Typography>\r\n          ) : (\r\n            <Typography>{`${Math.round(min)} to ${Math.round(max)} ft available now`}</Typography>\r\n          )}\r\n          {predict ? (\r\n            !predictions || extra.unavailable ? (\r\n              <Typography>No prediction data available</Typography>\r\n            ) : precise ? (\r\n              <Typography>{`${Math.round(available)} ft available within ${availability} minutes`}</Typography>\r\n            ) : isEqual(extra.min, extra.max) ? (\r\n              <Typography>{`${Math.round(extra.min)} ft available within ${availability} minutes`}</Typography>\r\n            ) : (\r\n              <Typography>{`${Math.round(extra.min)} to ${Math.round(\r\n                extra.max\r\n              )} ft available within ${availability} minutes`}</Typography>\r\n            )\r\n          ) : null}\r\n        </Popup>\r\n      )\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { mapStyle, viewport, width, height } = this.state;\r\n    return (\r\n      <Grid container alignContent=\"center\" justifyContent=\"center\" spacing={0}>\r\n        <Grid item xs={12}>\r\n          {this.isAuthenticated() && (\r\n            <ReactMapGL\r\n              ref={this.map}\r\n              {...viewport}\r\n              width={width}\r\n              height={height}\r\n              mapStyle={mapStyle}\r\n              onViewportChange={this.handleChange(\"viewport\")}\r\n              onViewStateChange={this.handleViewStateChange}\r\n              onLoad={this.handleLoad}\r\n              onError={this.handleError}\r\n              onMapStyle={this.handleMapStyle}\r\n              // onMouseMove={this.handleMouseMove}\r\n              onMouseDown={this.handleMouseDown}\r\n              onClick={this.handleClick}\r\n              transformRequest={this.transformRequest}\r\n              // transitionDuration={1000}\r\n              // transitionInterpolator={new FlyToInterpolator()}\r\n              disableTokenWarning={true}\r\n              mapOptions={{\r\n                userProperties: true,\r\n                customAttribution:\r\n                  '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n              }}\r\n            >\r\n              {this.renderPopup()}\r\n              <PrkControl\r\n                mapStyle={mapStyle}\r\n                onMapStyle={this.handleChange(\"mapStyle\")}\r\n                onChange={this.querySourceDataDebounced}\r\n              />\r\n              <GeolocateControl\r\n                style={{ position: \"absolute\", left: \".5em\", bottom: \".5em\" }}\r\n                // onViewportChange={this.handleChange(\"viewport\")}\r\n                positionOptions={{ enableHighAccuracy: true }}\r\n                // trackUserLocation={true}\r\n                showUserLocation={true}\r\n              />\r\n              <ScaleControl style={{ position: \"absolute\", left: \"3em\", bottom: \".5em\" }} unit=\"imperial\" />\r\n            </ReactMapGL>\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: selectLoginUser(state),\r\n  mapStyle: selectMapStyle(state),\r\n  preference: selectPreference(state),\r\n  user: selectUser(state),\r\n});\r\n\r\nconst mapActionToProps = {\r\n  fetchPreference,\r\n  updatePreference,\r\n  fetchMapStyle,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(withStyles(styles)(PrkMap));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport errorRoute from \"./Error/route\";\r\nimport notFoundRoute from \"./NotFound/route\";\r\nimport mapRoute from \"./PrkMap/route\";\r\n\r\nexport { default as Error } from \"./Error\";\r\nexport { default as NotFound } from \"./NotFound\";\r\nexport { default as PrkMap } from \"./PrkMap\";\r\n\r\nexport const routes = [mapRoute, notFoundRoute, errorRoute]\r\n  .sort((a, b) => a.sequence - b.sequence)\r\n  .map((route, index) => ({\r\n    ...route,\r\n    index,\r\n  }));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { Apps as AppsIcon } from \"@material-ui/icons\";\r\nimport Element from \"./index\";\r\n\r\nconst route = {\r\n  sequence: 10,\r\n  name: \"Parking\",\r\n  label: \"Parking\",\r\n  path: \"/\",\r\n  exact: true,\r\n  element: Element,\r\n  icon: AppsIcon,\r\n  user: true,\r\n};\r\n\r\nexport default route;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { PrkLayout } from \"../../components\";\r\nimport RouteBase from \"../RouteBase\";\r\nimport PrkMap from \"./PrkMap\";\r\n\r\nconst Root = (props) => (\r\n  <RouteBase\r\n    {...props}\r\n    renderRoute={(p) => (\r\n      <PrkLayout {...p}>\r\n        <PrkMap {...p} />\r\n      </PrkLayout>\r\n    )}\r\n  />\r\n);\r\n\r\nexport default Root;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass PrkLink extends React.Component {\r\n  render() {\r\n    return <Button component={Link} {...this.props}></Button>;\r\n  }\r\n}\r\n\r\nexport default PrkLink;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { background, primary, secondary } from \"constants/palette\";\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    zIndex: theme.zIndex.drawer,\r\n  },\r\n  drawer: {\r\n    // width: set in inline styles\r\n    zIndex: \"+1\",\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  list: {\r\n    marginTop: \"0px\",\r\n  },\r\n  listItemNotSelected: {\r\n    marginLeft: \"5px\",\r\n    paddingTop: \"10px\",\r\n    paddingBottom: \"10px\",\r\n  },\r\n  listItemSelected: {\r\n    color: primary,\r\n    background: background,\r\n    textTransform: \"none\",\r\n    borderLeft: `5px solid ${secondary}`,\r\n    borderRadius: \"0px\",\r\n    paddingTop: \"10px\",\r\n    paddingBottom: \"10px\",\r\n  },\r\n  listItemIcon: {\r\n    minWidth: \"50px\",\r\n  },\r\n  listItemText: {\r\n    textTransform: \"none\",\r\n    marginTop: \"0px\",\r\n    marginBottom: \"0px\",\r\n  },\r\n  noPadding: {\r\n    padding: 0,\r\n  },\r\n  noStyle: {\r\n    display: \"block\",\r\n    padding: 0,\r\n    textTransform: \"unset\",\r\n  },\r\n});\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  Drawer,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  Tooltip,\r\n  withWidth,\r\n} from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport clsx from \"clsx\";\r\nimport { selectUser } from \"controllers/user/action\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { routes } from \"routes\";\r\nimport PrkLink from \"./PrkLink\";\r\nimport styles from \"./styles\";\r\n\r\nconst NavigationPrkLink = (label) =>\r\n  React.forwardRef((props, ref) => {\r\n    return (\r\n      <PrkLink {...props} aria-label={label} ref={ref}>\r\n        {props.children}\r\n      </PrkLink>\r\n    );\r\n  });\r\n\r\nclass PrkNavigation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { page } = props;\r\n    this.home = page && page.path === \"/\";\r\n    this.state = {\r\n      open: true,\r\n      windowWidth: window.innerWidth,\r\n    };\r\n  }\r\n\r\n  handleChange = (key) => (event, value) => {\r\n    switch (key) {\r\n      default:\r\n        this.setState({ [key]: value });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { classes, page, user } = this.props;\r\n    const { open } = this.state;\r\n    const name = page && page.name;\r\n    const temp = routes.filter(\r\n      (route) =>\r\n        !route.hidden &&\r\n        (!route.admin || (route.admin && user && user.CanEditAccounts))\r\n    );\r\n    const navWidth = page.indent ? 200 : 50;\r\n    const indentWidth = page.indent ? 250 : 70;\r\n    return (\r\n      <Drawer\r\n        className={classes.drawer}\r\n        style={{ width: `${indentWidth - 20}px` }}\r\n        variant=\"persistent\"\r\n        anchor=\"left\"\r\n        open={open}\r\n        PaperProps={{ style: { width: `${navWidth}px`, overflow: \"hidden\" } }}\r\n      >\r\n        <div className={classes.toolbar} />\r\n        <List component=\"nav\" className={classes.list}>\r\n          {temp.map((route) => {\r\n            const PrkIcon = route.icon;\r\n            const selected = route.name === name;\r\n            return (\r\n              <ListItem\r\n                button\r\n                disableGutters\r\n                className={clsx(\r\n                  selected\r\n                    ? classes.listItemSelected\r\n                    : classes.listItemNotSelected\r\n                )}\r\n                key={`list-item-${route.name}`}\r\n                component={NavigationPrkLink(route.label)}\r\n                to={route.path}\r\n                onClick={this.handleChange(\"route\")}\r\n              >\r\n                <React.Fragment>\r\n                  <Tooltip title={route.label}>\r\n                    <ListItemIcon key={`list-item-icon-${route.name}`}>\r\n                      <PrkIcon color={selected ? \"primary\" : \"inherit\"} />\r\n                    </ListItemIcon>\r\n                  </Tooltip>\r\n                </React.Fragment>\r\n              </ListItem>\r\n            );\r\n          })}\r\n        </List>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nPrkNavigation.propTypes = {\r\n  page: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: selectUser(state),\r\n});\r\n\r\nconst mapActionToProps = {};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapActionToProps\r\n)(withWidth()(withStyles(styles)(PrkNavigation)));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  error: {\r\n    fontSize: \".8rem\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","import React, { Component } from \"react\";\r\nimport { selectNotice, setNotice } from \"controllers/common/action\";\r\n\r\nimport { PrkDialog } from \"components\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { connect } from \"react-redux\";\r\nimport { continueUser } from \"controllers/user/action\";\r\nimport styles from \"./styles\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nclass PrkNotice extends Component {\r\n  componentDidMount() {\r\n    this.props.continueUser();\r\n  }\r\n\r\n  handleAcknowledge = () => {\r\n    this.props.setNotice(\"viewed\");\r\n  };\r\n\r\n  buttons = () => {\r\n    return [\r\n      {\r\n        disabled: false,\r\n        label: \"Acknowledge\",\r\n        onClick: this.handleAcknowledge,\r\n        type: \"primary\",\r\n      },\r\n    ];\r\n  };\r\n\r\n  render() {\r\n    const { notice } = this.props;\r\n    if (notice) {\r\n      return null;\r\n    }\r\n    return (\r\n      <PrkDialog title={\"Dynacurb Parking App\"} maxWidth=\"md\" open={!notice} buttons={this.buttons()}>\r\n        <React.Fragment>\r\n          <Typography variant=\"h6\">Clicking the acknowledgement button below confirms:</Typography>\r\n          <Typography variant=\"subtitle1\">• You will not use this application while operating a vehicle.</Typography>\r\n          <Typography variant=\"subtitle1\">\r\n            • This is an experimental/prototype application designed to assist drivers in locating available parking\r\n            spots more quickly.\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\">\r\n            • Parking availability predictions are based upon past occupancy patterns and no accuracy guarantees are\r\n            made.\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\">\r\n            • This is not a reservation system and spots are filled on a first come, first serve basis.\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\">\r\n            • Authorized commercial use of this application is limited to drivers who have received prior approval from\r\n            their employer.\r\n          </Typography>\r\n        </React.Fragment>\r\n      </PrkDialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  notice: selectNotice(state),\r\n});\r\n\r\nconst mapActionToProps = {\r\n  continueUser,\r\n  setNotice,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(withStyles(styles)(PrkNotice));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  stepper: {\r\n    flex: \"1 0 auto\",\r\n    background: \"transparent\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { withWidth } from \"@material-ui/core\";\r\nimport { Stepper, Step, StepLabel, Button, Toolbar } from \"@material-ui/core\";\r\nimport {\r\n  ArrowBack as ArrowBackIcon,\r\n  ArrowForward as ArrowForwardIcon\r\n} from \"@material-ui/icons\";\r\n\r\nclass PrkStepper extends React.Component {\r\n  static defaultProps = {\r\n    disabled: []\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      step: props.step\r\n    };\r\n  }\r\n\r\n  notifyStepChange = step => {\r\n    if (this.props.onStepChange != null) {\r\n      this.props.onStepChange(step);\r\n    }\r\n  };\r\n\r\n  handleNext = () => {\r\n    const step = this.state.step + 1;\r\n    this.setState({\r\n      step: step\r\n    });\r\n    this.notifyStepChange(step);\r\n  };\r\n\r\n  handleBack = () => {\r\n    const step = this.state.step - 1;\r\n    this.setState({\r\n      step: step\r\n    });\r\n    this.notifyStepChange(step);\r\n  };\r\n\r\n  handleReset = () => {\r\n    this.setState({\r\n      step: 0\r\n    });\r\n    this.notifyStepChange(0);\r\n  };\r\n\r\n  render() {\r\n    const { steps, disabled, classes, width } = this.props;\r\n    const { step } = this.state;\r\n    var icon = false;\r\n    switch (width) {\r\n      case \"xs\":\r\n      case \"sm\":\r\n        icon = true;\r\n        break;\r\n      default:\r\n        icon = false;\r\n    }\r\n    return (\r\n      <Toolbar>\r\n        <Button\r\n          style={{ minWidth: icon ? 16 : 64 }}\r\n          disabled={step === 0 || disabled.indexOf(step - 1) !== -1}\r\n          onClick={this.handleBack.bind(this)}\r\n          color=\"secondary\"\r\n          variant=\"contained\"\r\n        >\r\n          {icon ? <ArrowBackIcon /> : \"Back\"}\r\n        </Button>\r\n        <Stepper activeStep={step} className={classes.stepper}>\r\n          {steps.map(function(item, index) {\r\n            return (\r\n              <Step key={item.name}>\r\n                <StepLabel>{item.name}</StepLabel>\r\n              </Step>\r\n            );\r\n          })}\r\n        </Stepper>\r\n        <Button\r\n          style={{ minWidth: icon ? 16 : 64 }}\r\n          disabled={\r\n            step === steps.length - 1 || disabled.indexOf(step + 1) !== -1\r\n          }\r\n          onClick={this.handleNext.bind(this)}\r\n          color=\"secondary\"\r\n          variant=\"contained\"\r\n        >\r\n          {icon ? <ArrowForwardIcon /> : \"Next\"}\r\n        </Button>\r\n      </Toolbar>\r\n    );\r\n  }\r\n}\r\n\r\nPrkStepper.propTypes = {\r\n  step: PropTypes.number.isRequired,\r\n  steps: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      name: PropTypes.string.isRequired\r\n    })\r\n  ).isRequired,\r\n  disabled: PropTypes.arrayOf(PropTypes.number.isRequired),\r\n  onStepChange: PropTypes.func\r\n};\r\n\r\nexport default withWidth()(withStyles(styles)(PrkStepper));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { createTheme } from \"@material-ui/core/styles\";\r\nimport { background, error, lighter, primary, secondary, text } from \"constants/palette\";\r\n\r\nconst typography = {\r\n  useNextVariants: true,\r\n};\r\n\r\nconst overrides = {\r\n  MuiCssBaseline: {\r\n    \"@global\": {\r\n      body: {\r\n        // backgroundImage: 'url(\"/images/parking-lg-10.png\")',\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundPosition: \"right\",\r\n        backgroundAttachment: \"fixed\",\r\n      },\r\n    },\r\n  },\r\n  MuiStepIcon: {\r\n    root: {\r\n      \"&$completed\": {\r\n        color: secondary,\r\n      },\r\n      \"&$active\": {\r\n        color: secondary,\r\n      },\r\n    },\r\n    active: {},\r\n    completed: {},\r\n  },\r\n  MuiList: {\r\n    root: {\r\n      width: \"100%\",\r\n    },\r\n    padding: {\r\n      paddingTop: \"0\",\r\n      paddingBottom: \"0\",\r\n    },\r\n  },\r\n  MuiExpansionPanelSummary: {\r\n    root: {\r\n      padding: \"0 16px 0 16px\",\r\n    },\r\n  },\r\n  MuiExpansionPanelDetails: {\r\n    root: {\r\n      padding: \"0\",\r\n    },\r\n  },\r\n};\r\n\r\nconst palette = {\r\n  type: \"light\",\r\n  primary: {\r\n    main: primary,\r\n    contrastText: text.light,\r\n  },\r\n  secondary: {\r\n    main: secondary,\r\n    contrastText: text.light,\r\n  },\r\n  error: {\r\n    main: error,\r\n    contrastText: text.light,\r\n  },\r\n  background: {\r\n    paper: lighter,\r\n    default: background,\r\n  },\r\n};\r\n\r\nconst mixins = {\r\n  toolbar: {\r\n    minHeight: 0,\r\n    \"@media (min-width:0px) and (orientation: landscape)\": {\r\n      minHeight: 0,\r\n    },\r\n    \"@media (min-width:600px)\": {\r\n      minHeight: 0,\r\n    },\r\n  },\r\n};\r\n\r\nconst name = \"Yellow Orange Science Blue Spectacled Bear\";\r\n\r\nconst theme = createTheme({ mixins, typography, overrides, palette, name });\r\n\r\nexport default theme;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MuiThemeProvider, withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { CssBaseline } from \"@material-ui/core\";\r\nimport theme from \"./theme\";\r\n\r\nclass PrkTheme extends React.Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <MuiThemeProvider theme={theme}>\r\n          <CssBaseline />\r\n          {this.props.children}\r\n        </MuiThemeProvider>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nPrkTheme.propTypes = {\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(PrkTheme);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport rootSaga from \"controllers/saga\";\r\nimport configureStore from \"controllers/store\";\r\nimport { isEmpty, isEqual, max, omit } from \"lodash\";\r\nimport { Provider } from \"react-redux\";\r\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\r\nimport { PrkTheme } from \"./components\";\r\nimport { routes } from \"./routes\";\r\n\r\nconst reduxStore = configureStore(window.REDUX_INITIAL_DATA);\r\nreduxStore.runSaga(rootSaga);\r\n\r\nlet current = [];\r\n\r\nconst printRoute = (route) => {\r\n  if (route) {\r\n    if (!isEmpty(route.path)) {\r\n      current.push([`(${route.id})`, `[${route.name}]`, `${route.path}`]);\r\n    }\r\n  }\r\n};\r\n\r\nconst printRoutes = () => {\r\n  const prev = Array.from(current);\r\n  current = [[\"id\", \"name\", \"path\"]];\r\n  routes.forEach((r) => printRoute(r));\r\n  const [m0, m1] = [max(current.map((c) => c[0].length)), max(current.map((c) => c[1].length))];\r\n  current = current.map(\r\n    (c, i) =>\r\n      `${\"\\xa0\".repeat(3 - `${i}`.length)}${c[0]}${\"\\xa0\".repeat(m0 - c[0].length + 1)}${c[1]}${\"\\xa0\".repeat(\r\n        m1 - c[1].length + 1\r\n      )}${c[2]}`\r\n  );\r\n  if (!isEqual(prev, current)) {\r\n    // keep this logging statement as it only prints for development\r\n    console.log({ routes: current });\r\n  }\r\n};\r\n\r\nclass Router extends React.Component {\r\n  renderRoute = (route) => {\r\n    const Element = route.element;\r\n    return (\r\n      <Route\r\n        key={`route-${route.name}`}\r\n        exact={route.exact}\r\n        path={route.path}\r\n        render={() => <Element page={omit(route, [\"element\"])} />}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      printRoutes();\r\n    }\r\n    return (\r\n      <Provider store={reduxStore}>\r\n        <PrkTheme>\r\n          <HashRouter>\r\n            <Switch>{routes.map((route) => this.renderRoute(route))}</Switch>\r\n          </HashRouter>\r\n        </PrkTheme>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Router;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport { fromJS } from \"immutable\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\n// import logger from \"redux-logger\";\r\nimport reducer from \"./reducer\";\r\n\r\nexport default function configureStore(initialState) {\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  let enhancers = null;\r\n  let middleware = [];\r\n  switch (process.env.NODE_ENV) {\r\n    case \"production\":\r\n    case \"test\":\r\n      middleware = [sagaMiddleware];\r\n      enhancers = applyMiddleware(...middleware);\r\n      break;\r\n    default:\r\n      middleware = [sagaMiddleware];\r\n      // uncomment to enable logging redux store actions\r\n      // middleware = [logger, sagaMiddleware];\r\n      enhancers = applyMiddleware(...middleware);\r\n      const composeEnhancers = composeWithDevTools({\r\n        trace: true,\r\n        traceLimit: 10\r\n      });\r\n      enhancers = composeEnhancers(applyMiddleware(...middleware));\r\n  }\r\n  return {\r\n    ...createStore(reducer, fromJS(initialState), enhancers),\r\n    runSaga: sagaMiddleware.run\r\n  };\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { all } from \"redux-saga/effects\";\r\nimport busySaga from \"./busy/saga\";\r\nimport commonSaga from \"./common/saga\";\r\nimport errorSaga from \"./error/saga\";\r\nimport mapSaga from \"./map/saga\";\r\nimport occupanciesSaga from \"./occupancies/saga\";\r\nimport organizationsSaga from \"./organizations/saga\";\r\nimport spacesSaga from \"./spaces/saga\";\r\nimport userSaga from \"./user/saga\";\r\nimport usersSaga from \"./users/saga\";\r\nimport preferenceSaga from \"./preference/saga\";\r\n\r\nexport default function* rootSaga() {\r\n  yield all([\r\n    commonSaga(),\r\n    preferenceSaga(),\r\n    userSaga(),\r\n    usersSaga(),\r\n    organizationsSaga(),\r\n    spacesSaga(),\r\n    occupanciesSaga(),\r\n    busySaga(),\r\n    errorSaga(),\r\n    mapSaga(),\r\n  ]);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Router from \"./Router\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<Router />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}