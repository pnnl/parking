{"version":3,"sources":["constants/palette.js","utils/utils.js","controllers/util.js","controllers/busy/action.js","controllers/busy/saga.js","controllers/common/saga.js","controllers/action.js","controllers/error/action.js","controllers/error/saga.js","controllers/map/action.js","controllers/api.js","controllers/map/api.js","controllers/map/saga.js","controllers/occupancies/action.js","controllers/occupancies/api.js","controllers/occupancies/saga.js","controllers/organizations/action.js","controllers/organizations/api.js","controllers/organizations/saga.js","controllers/spaces/action.js","controllers/spaces/api.js","controllers/spaces/saga.js","controllers/user/action.js","controllers/user/api.js","controllers/user/saga.js","controllers/users/action.js","controllers/users/api.js","controllers/users/saga.js","controllers/preference/action.js","controllers/preference/api.js","controllers/preference/saga.js","controllers/saga.js","controllers/busy/reducer.js","controllers/common/action.js","controllers/common/reducer.js","controllers/error/reducer.js","controllers/map/reducer.js","controllers/occupancies/reducer.js","controllers/organizations/reducer.js","controllers/spaces/reducer.js","controllers/user/reducer.js","controllers/users/reducer.js","controllers/preference/reducer.js","controllers/reducer.js","components/PrkBusy/styles.js","components/PrkBusy/index.js","components/PrkControl/styles.js","components/PrkControl/index.js","components/PrkDialog/styles.js","components/PrkDialog/index.js","components/PrkFooter/styles.js","components/PrkFooter/index.js","components/PrkHeader/styles.js","components/PrkHeader/index.js","components/PrkLayout/styles.js","components/PrkLayout/index.js","components/PrkLogin/styles.js","components/PrkLogin/index.js","utils/analytics.js","routes/RouteBase.jsx","routes/Error/styles.js","routes/Error/Error.jsx","routes/Error/route.js","routes/Error/index.jsx","routes/NotFound/styles.js","routes/NotFound/NotFound.jsx","routes/NotFound/route.js","routes/NotFound/index.jsx","routes/PrkMap/styles.js","routes/PrkMap/PrkMap.jsx","routes/index.js","routes/PrkMap/route.js","routes/PrkMap/index.jsx","components/PrkNavigation/PrkLink.js","components/PrkNavigation/styles.js","components/PrkNavigation/index.js","components/PrkNotice/styles.js","components/PrkNotice/index.js","components/PrkStepper/styles.js","components/PrkStepper/index.js","components/PrkTheme/styles.js","components/PrkTheme/theme.js","components/PrkTheme/index.js","Router.jsx","controllers/store.js","serviceWorker.js","index.js"],"names":["background","primary","secondary","color","brighter","formatHex","darker","accent","error","errorTint","warning","warningTint","info","infoTint","verifiedTint","available","unknown","unavailable","text","isTrue","value","test","logError","getTimestamp","Date","ResetType","RESET","ActionTypes","REQUEST","BUSY","SUCCESS","UPDATE","ERROR","POLL","getKeyType","type","types","split","length","getActionType","isResetType","key","isActionType","isUpdateType","createSuccessPayload","payload","_","isBoolean","timestamp","createUpdatePayload","createErrorPayload","createBusyPayload","generateType","name","generateTypes","generateSelector","input","state","getIn","createSelector","toJS","generateSelectors","generateAction","generateActions","BUSY_GLOBAL","BUSY_TOKENS","busyTokens","selectBusyTokens","MAKE_BUSY","makeBusySuccess","makeBusyError","makeBusyBusy","isBusySaga","makeBusySaga","busySaga","modifyBusyToken","action","tokens","select","call","put","isBusyAction","delay","message","takeEvery","takeLatest","commonSaga","reset","ERROR_TOKENS","errorTokens","selectErrorTokens","CLEAR_ERROR","clearError","clearErrorSuccess","clearErrorError","clearErrorBusy","isErrorSaga","clearErrorSaga","errorSaga","modifyErrorToken","assign","cleared","Boolean","isUnauthorized","get","isErrorAction","errorAction","FETCH_MAP_INFO","fetchMapInfoSuccess","fetchMapInfoError","fetchMapInfoBusy","FETCH_MAP_STYLE","fetchMapStyle","fetchMapStyleSuccess","fetchMapStyleError","fetchMapStyleBusy","selectMapStyle","setAuthorization","token","localStorage","setItem","getAuthorization","getItem","isEmpty","validateResponse","response","status","Error","ok","statusText","result","JSON","parse","isString","isObject","handleResponse","handleError","defaultOptions","authenticated","authorization","redirect","credentials","headers","Accept","Authorization","createTarget","endpoint","params","target","query","Object","keys","map","join","createQuery","read","options","merge","method","fetch","then","catch","update","body","stringify","create","remove","authenticate","process","readMapInfo","readMapStyle","readMapInfoSaga","readMapStyleSaga","mapSaga","FETCH_OCCUPANCIES","fetchOccupanciesSuccess","fetchOccupanciesError","fetchOccupanciesBusy","FETCH_OCCUPANCY","fetchOccupanciesuccess","fetchOccupancyError","fetchOccupancyBusy","SERVICE_ENDPOINT","readOccupancies","readOccupancy","id","readOccupanciesaga","readOccupanciesSaga","occupanciesSaga","FETCH_ORGANIZATIONS","fetchOrganizationsSuccess","fetchOrganizationsError","fetchOrganizationsBusy","FETCH_ORGANIZATION","fetchOrganizationSuccess","fetchOrganizationError","fetchOrganizationBusy","UPDATE_ORGANIZATION","updateOrganizationSuccess","updateOrganizationError","updateOrganizationBusy","REMOVE_ORGANIZATION","removeOrganizationSuccess","removeOrganizationError","removeOrganizationBusy","CREATE_ORGANIZATION","createOrganizationSuccess","createOrganizationError","createOrganizationBusy","readOrganizations","readOrganization","removeOrganization","updateOrganization","createOrganization","createOrganizationSaga","readOrganizationSaga","removeOrganizationSaga","updateOrganizationSaga","readOrganizationsSaga","organizationsSaga","FETCH_SPACES","fetchSpacesSuccess","fetchSpacesError","fetchSpacesBusy","FETCH_SPACE","fetchSpaceSuccess","fetchSpaceError","fetchSpaceBusy","readSpaces","readSpace","readSpaceSaga","readSpacesSaga","spacesSaga","FETCH_USER","fetchUserSuccess","fetchUserError","fetchUserBusy","selectUser","UPDATE_USER","updateUser","updateUserSuccess","updateUserError","updateUserBusy","REMOVE_USER","removeUserSuccess","removeUserError","removeUserBusy","LOGIN_USER","loginUser","loginUserSuccess","loginUserError","loginUserBusy","selectLoginUser","LOGOUT_USER","logoutUser","logoutUserSuccess","logoutUserError","logoutUserBusy","CONTINUE_USER","continueUser","continueUserSuccess","continueUserError","continueUserBusy","readUser","removeUser","email","password","preferences","login","readUserSaga","removeUserSaga","updateUserSaga","loginSaga","logoutSaga","continueSaga","usersSaga","defaultPreferences","user","markers","predictions","requirement","availability","json","parseJson","auth","set","FETCH_USERS","fetchUsersSuccess","fetchUsersError","fetchUsersBusy","CREATE_USER","createUser","createUserSuccess","createUserError","createUserBusy","selectCreateUser","readUsers","organization","scope","organizationId","createUserSaga","readUsersSaga","FETCH_PREFERENCE","fetchPreference","fetchPreferenceSuccess","fetchPreferenceError","fetchPreferenceBusy","selectPreference","UPDATE_PREFERENCE","updatePreference","updatePreferenceSuccess","updatePreferenceError","updatePreferenceBusy","readPreference","Promise","resolve","reject","item","window","console","log","preference","readPreferenceSaga","updatePreferenceSaga","preferencesSaga","vehicle","Passenger","label","deferred","rootSaga","all","preferenceSaga","userSaga","initialState","replace","reducer","fromJS","setIn","NOTICE","setNotice","selectNotice","combineReducers","commonKey","commonReducer","preferenceKey","preferenceReducer","userKey","userReducer","usersKey","usersReducer","organizationsKey","organizationsReducer","spacesKey","spacesReducer","occupanciesKey","occupanciesReducer","busyKey","busyReducer","errorKey","errorReducer","mapKey","mapReducer","styles","modal","progress","outline","position","left","top","PrkBusy","this","props","classes","busy","Modal","open","className","CircularProgress","React","Component","defaultProps","connect","values","filter","v","withStyles","isLogin","theme","root","display","textAlign","margin","zIndex","breakpoints","down","title","marginLeft","flex","card","width","maxWidth","actions","icons","padding","content","maxHeight","overflow","expand","transform","transition","transitions","duration","shortest","expandOpen","form","marginBottom","formEntry","infoIcon","bottom","selectAvailability","selectDeferred","timeIcon","truckIcon","labelRequirement","marginRight","marginTop","selectRequirement","avatar","symbol","textShadow","labelAvailable","arrowUpward","arrowDownward","PrkControl","isMarkers","isPredictions","isDeferred","isVehicleType","isVehicleLength","getLayoutProperty","property","mapStyle","layer","layers","find","layout","setLayoutProperty","onMapStyle","updated","ids","Array","isArray","includes","forEach","updateLayoutProperties","updateUserPreferences","prev","cloneDeep","temp","isEqual","onChange","handleChange","event","setState","expanded","guest","FormControl","component","FormGroup","FormControlLabel","control","Switch","checked","disabled","labelPlacement","Tooltip","Info","Select","MenuItem","m","moment","startOf","t","Math","floor","k","AccessTime","Typography","variant","isUndefined","renderValue","clone","add","format","range","AirportShuttle","Commercial","Transport","ArrowUpward","clsx","Remove","ArrowDownward","Card","CardActions","IconButton","onClick","ExpandMore","Collapse","in","timeout","unmountOnExit","CardContent","renderExtraSpaces","renderPredictions","renderDeferred","renderVehicleType","renderVehicleLength","renderLegend","mapActionToProps","PrkDialog","handleClick","button","children","buttons","fullScreen","fullWidth","Dialog","DialogTitle","DialogContent","DialogActions","Button","height","PrkFooter","handleClear","errors","sort","a","b","Fragment","AppBar","Snackbar","anchorOrigin","vertical","horizontal","ContentProps","style","undefined","autoHideDuration","min","max","onClose","size","Close","fontSize","right","space","paddingRight","icon","paddingTop","paddingLeft","PrkHeader","findUsername","findButtonText","handleLogout","Paper","AccountCircle","flexGrow","view","toolbar","mixins","PrkLayout","updatePageSize","forceUpdate","addEventListener","removeEventListener","page","push","to","document","documentElement","clientHeight","minHeight","withTheme","PrkLogin","tab","confirm","validate","handleLogin","handleCreate","handleGuest","handleRef","ref","dialog","noValidate","autoComplete","Grid","container","spacing","xs","Tabs","Tab","TextField","created","Analytics","initialize","_initialized","ReactGA","pageview","path","send","hitType","category","instance","Root","isNotice","getInstance","notice","renderRoute","success","backgroundColor","iconVariant","opacity","snackbar","center","pad","CheckCircleIcon","WarningIcon","ErrorIcon","InfoIcon","location","queryString","search","Icon","SnackbarContent","withRouter","route","sequence","hidden","element","RouteBase","p","NotFound","popup","borderRadius","border","spaces","occupied","indeterminate","popupHeader","popupSpacer","PrkMap","isAuthenticate","templateFormat","template","transformRequest","url","resourceType","viewport","zoom","latitude","longitude","querySourceDataDebounced","handleLoad","handleViewStateChange","popupInfo","handleMapStyle","handleMouseDown","handleMouseMove","current","getMap","features","queryRenderedFeatures","x","y","feature","lngLat","properties","isAuthenticated","createRef","bearing","pitch","updateWindowDimensions","bind","querySourceData","debounce","intid","setInterval","parseInt","clearInterval","innerWidth","innerHeight","predict","getStyle","bounds","getBounds","VehicleType","uuid","valueOf","z","n","_ne","lat","e","lng","s","_sw","w","r","d","source","getSource","_options","data","setData","sensors","precise","shapeLength","required","occupancies","occupancy","prediction","spaceType","blockId","blockfaceId","cvlzId","spaceTyped","total","isNumber","segment","ceil","extra","po","pmin","pmax","tipSize","anchor","closeButton","round","alignContent","justifyContent","onViewportChange","onViewStateChange","onLoad","onError","onMouseDown","disableTokenWarning","mapOptions","userProperties","customAttribution","renderPopup","positionOptions","enableHighAccuracy","showUserLocation","unit","routes","exact","AppsIcon","notFoundRoute","errorRoute","index","PrkLink","Link","drawer","list","listItemNotSelected","paddingBottom","listItemSelected","textTransform","borderLeft","listItemIcon","minWidth","listItemText","noPadding","noStyle","PrkNavigation","home","windowWidth","admin","CanEditAccounts","navWidth","indent","indentWidth","Drawer","PaperProps","List","PrkIcon","selected","ListItem","disableGutters","forwardRef","ListItemIcon","withWidth","PrkNotice","handleAcknowledge","stepper","PrkStepper","notifyStepChange","step","onStepChange","handleNext","handleBack","handleReset","steps","Toolbar","indexOf","ArrowBack","Stepper","activeStep","Step","StepLabel","ArrowForward","overrides","MuiCssBaseline","backgroundRepeat","backgroundPosition","backgroundAttachment","MuiStepIcon","active","completed","MuiList","MuiExpansionPanelSummary","MuiExpansionPanelDetails","palette","main","contrastText","paper","default","createTheme","typography","useNextVariants","PrkTheme","CssBaseline","reduxStore","sagaMiddleware","createSagaMiddleware","enhancers","middleware","applyMiddleware","createStore","runSaga","run","configureStore","REDUX_INITIAL_DATA","Router","Element","render","omit","store","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.211fc120.chunk.js","sourcesContent":["// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { color } from \"d3\";\r\n\r\n// grays\r\nexport const background = \"#ffffff\";\r\nexport const lighter = \"#ffffff\";\r\nexport const darker = \"#e8e8e8\";\r\nexport const darkest = \"#9b9b9b\";\r\n// colors\r\nexport const primary = \"#C6B773\";\r\nexport const primaryTint = color(primary).brighter(1.0).formatHex();\r\nexport const primaryShade = color(primary).darker(1.0).formatHex();\r\nexport const secondary = \"#4ea1d3\";\r\nexport const secondaryTint = color(secondary).brighter(1.0).formatHex();\r\nexport const secondaryShade = color(secondary).darker(1.0).formatHex();\r\nexport const accent = \"#f4a4a4\";\r\nexport const accentTint = color(accent).brighter(1.0).formatHex();\r\nexport const accentShade = color(accent).darker(1.0).formatHex();\r\nexport const error = \"#d96a64\";\r\nexport const errorTint = color(error).brighter(1.0).formatHex();\r\nexport const errorShade = color(error).darker(1.0).formatHex();\r\nexport const warning = \"#d98164\";\r\nexport const warningTint = color(warning).brighter(1.0).formatHex();\r\nexport const warningShade = color(warning).darker(1.0).formatHex();\r\nexport const info = \"#d9bc64\";\r\nexport const infoTint = color(info).brighter(1.0).formatHex();\r\nexport const infoShade = color(info).darker(1.0).formatHex();\r\n// conditions\r\nexport const verified = \"#01c353\"; // green\r\nexport const verifiedTint = \"#66db97\"; // light green\r\nexport const selected = \"#1c96f8\"; // blue\r\nexport const selectedTint = \"#d2e6fb\"; // light blue\r\nexport const active = \"#9013fe\"; // bright purple\r\nexport const disabled = \"#d8d8d8\";\r\nexport const invalid = \"#d65000\"; // dark orange\r\n// availability\r\nexport const available = \"#43ba6a\";\r\nexport const unknown = \"#C6B773\";\r\nexport const unavailable = \"#c44a40\";\r\n// text\r\nexport const text = {\r\n  light: \"#ffffff\",\r\n  dark: \"#393a41\",\r\n  subtle: \"#88888d\",\r\n};\r\n// chart\r\nexport const chart = {\r\n  gray: \"#36454f\",\r\n  red: \"#d96464\",\r\n  green: \"#64d964\",\r\n  blue: \"#6464d9\",\r\n  sequence: [\r\n    \"#1f78b4\",\r\n    \"#b2df8a\",\r\n    \"#33a02c\",\r\n    \"#fb9a99\",\r\n    \"#e31a1c\",\r\n    \"#fdbf6f\",\r\n    \"#ff7f00\",\r\n    \"#cab2d6\",\r\n    \"#6a3d9a\",\r\n    \"#ffff99\",\r\n    \"#b15928\",\r\n  ],\r\n};\r\n// utils\r\nexport const hexToRgba = (hex, alpha = 1) => {\r\n  const [r, g, b] = hex.match(/\\w\\w/g).map((x) => parseInt(x, 16));\r\n  return `rgba(${r},${g},${b},${alpha})`;\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { selectedTint } from \"constants/palette\";\r\nimport jsonpath from \"jsonpath\";\r\nimport _ from \"lodash\";\r\nimport React from \"react\";\r\n\r\nexport function getDocumentWidth() {\r\n  // We always want the client width\r\n  return Math.max(\r\n    // document.body.scrollWidth,\r\n    // document.documentElement.scrollWidth,\r\n    // document.body.offsetWidth,\r\n    // document.documentElement.offsetWidth,\r\n    document.documentElement.clientWidth\r\n  );\r\n}\r\n\r\nexport function getDocumentHeight() {\r\n  // We always want the client height\r\n  return Math.max(\r\n    // document.body.scrollHeight,\r\n    // document.documentElement.scrollHeight,\r\n    // document.body.offsetHeight,\r\n    // document.documentElement.offsetHeight,\r\n    document.documentElement.clientHeight\r\n  );\r\n}\r\n\r\n/**\r\n * Tests whether a string value is true or false.\r\n *  true = true, yes, t, or y\r\n *  false = anything else\r\n * @param {String} value\r\n */\r\nexport const isTrue = (value) => {\r\n  return /^[/s]*true|yes|t|y[/s]*$/i.test(value);\r\n};\r\n\r\n/**\r\n * Log the error stack to console if running in development environment.\r\n * @param {Error} error\r\n */\r\nexport const logError = (error) => {\r\n  if (error && process.env.NODE_ENV === \"development\") {\r\n    console.log(`[${error.message}]: ${error.stack}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Find the lowest unused number given a sequence of numbers.\r\n *\r\n * @param {number[]} sequence the sequence of numbers\r\n * @param {Integer} from the lowest number to look for\r\n */\r\nexport function lowestUnusedNumber(sequence, from) {\r\n  const arr = sequence.slice(0);\r\n  arr.sort((a, b) => a - b);\r\n\r\n  return arr.reduce((lowest, num, i) => {\r\n    const seqIndex = i + from;\r\n    return num !== seqIndex && seqIndex < lowest ? seqIndex : lowest;\r\n  }, arr.length + from);\r\n}\r\n\r\n/**\r\n * Returns an appropriate aria-label given the element's props.\r\n * @param {*} props\r\n * @throws {Error} if no aria-label could be derived\r\n */\r\nexport const getAriaLabel = (props) => {\r\n  const { \"aria-label\": ariaLabel, header, placeholder, children } = props;\r\n  if (ariaLabel) {\r\n    return ariaLabel;\r\n  } else if (!_.isEmpty(header)) {\r\n    return header;\r\n  } else if (!_.isEmpty(placeholder)) {\r\n    return placeholder;\r\n  } else if (_.isString(children)) {\r\n    return children;\r\n  } else {\r\n    throw new Error(\r\n      \"Must explicitely specify aria-label if header, placeholder, or tooltip is not defined and children is not plain text.\"\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Wraps the child component(s) only if the condition is met.\r\n * Requires three props: condition, wrapper, and children.\r\n * The condition is a boolean which determines if the wrapper should be utilized.\r\n * The wrapper is a callback function which passes the children elements.\r\n * The children are standard React children elements.\r\n * @param {*} props\r\n */\r\nexport const ConditionalWrapper = ({ condition, wrapper, children }) => {\r\n  return condition ? wrapper(children) : children;\r\n};\r\n\r\n/**\r\n * Create a text span for displaying a search term.\r\n * Looks through the list of fields until it finds the first one with a search term.\r\n * @param {*} item the item which may contain terms\r\n * @param {String} fields the field(s) to return\r\n */\r\nexport const createTerm = (item, ...fields) => {\r\n  const terms = fields\r\n    .map((field) => _.get(item, [\"terms\", field]))\r\n    .find((v) => v);\r\n  if (terms) {\r\n    return (\r\n      <span>\r\n        {terms[0]}\r\n        <span style={{ backgroundColor: selectedTint }}>\r\n          <strong>{terms[1]}</strong>\r\n        </span>\r\n        {terms[2]}\r\n      </span>\r\n    );\r\n  } else {\r\n    return <span>{item[fields[0]]}</span>;\r\n  }\r\n};\r\n\r\n/**\r\n * Alternative to createTerm for highlighting and bolding multiple instances\r\n * @param {Array<String>} terms\r\n */\r\nexport const generateTerm = (terms) => {\r\n  if (terms.length === 1 && !terms[0].text) {\r\n    return <span key={`key-${terms[0]}`}>{terms[0]}</span>;\r\n  }\r\n\r\n  const generatedTerms = terms.map((term, index) => {\r\n    if (!term || !term.text) {\r\n      return null;\r\n    }\r\n    if (term.fontWeight === \"bold\") {\r\n      return (\r\n        <span key={`key-${index}`} style={{ backgroundColor: selectedTint }}>\r\n          <strong>{term.text}</strong>\r\n        </span>\r\n      );\r\n    } else if ((term.fontWeight === \"normal\" && term.text) || term.length) {\r\n      return <span key={`key-${index}`}>{term.text}</span>;\r\n    } else {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  return _.compact(generatedTerms);\r\n};\r\n\r\n/**\r\n * Get the index of all instances in a string\r\n * @param {String} str\r\n * @param {String} term\r\n */\r\nconst getIndices = (str, term) => {\r\n  const indices = [];\r\n  let startIndex = 0;\r\n  let index;\r\n  while ((index = str.indexOf(term, startIndex)) > -1) {\r\n    indices.push(index);\r\n    startIndex = index + term.length;\r\n  }\r\n\r\n  return indices;\r\n};\r\n\r\n/**\r\n * Chunk string into an array of terms to be styled\r\n * @param {String} item\r\n * @param {String} field\r\n */\r\nexport const chunkTerms = (item, field) => {\r\n  const terms = [];\r\n  const termsBold = [];\r\n  const termsNormal = [];\r\n\r\n  if (!field || field.length === 0) {\r\n    return [item];\r\n  }\r\n\r\n  let stringCopy = item.toLowerCase();\r\n  const termCopy = field.toLowerCase();\r\n\r\n  const indices = getIndices(stringCopy, termCopy);\r\n\r\n  indices.forEach((index) => {\r\n    const slice = item.slice(index, index + termCopy.length);\r\n    termsBold.push(slice);\r\n  });\r\n\r\n  let line = \"\";\r\n\r\n  for (let i = 0; i < item.length; i++) {\r\n    if (!indices.includes(i)) {\r\n      line += item[i];\r\n    } else {\r\n      if (line) {\r\n        termsNormal.push(line);\r\n        line = \"\";\r\n      }\r\n\r\n      i += termCopy.length - 1;\r\n    }\r\n\r\n    if (i === item.length - 1) {\r\n      termsNormal.push(line);\r\n    }\r\n  }\r\n\r\n  for (let i = 0; i < termsNormal.length + termsBold.length; i++) {\r\n    const term = {};\r\n\r\n    if (indices.includes(0)) {\r\n      if (!(i % 2)) {\r\n        term.text = termsBold[i / 2];\r\n        term.fontWeight = \"bold\";\r\n      } else {\r\n        term.text = termsNormal[(i - 1) / 2];\r\n        term.fontWeight = \"normal\";\r\n      }\r\n    } else {\r\n      if (!(i % 2)) {\r\n        term.text = termsNormal[i / 2];\r\n        term.fontWeight = \"normal\";\r\n      } else {\r\n        term.text = termsBold[(i - 1) / 2];\r\n        term.fontWeight = \"bold\";\r\n      }\r\n    }\r\n\r\n    terms.push(term);\r\n  }\r\n\r\n  return terms;\r\n};\r\n\r\nconst getTerm = (item, key, term) => {\r\n  const value = item[key];\r\n  const index = _.isString(value) ? value.toLowerCase().indexOf(term) : -1;\r\n  const temp =\r\n    index === -1 || term.length === 0\r\n      ? [value, \"\", \"\"]\r\n      : [\r\n          value.slice(0, index),\r\n          value.slice(index, index + term.length),\r\n          value.slice(index + term.length),\r\n        ];\r\n  return { [key]: temp };\r\n};\r\n\r\nconst addTerm = (item, key, term) => {\r\n  _.assign(item, { terms: getTerm(item, key, term) });\r\n};\r\n\r\n/**\r\n * Searches all of the text fields in the list of items which contain the search value.\r\n * Returns the complete array if search is not specified.\r\n * The terms are placed into a terms field which contains an array with three values: prefix, matching term, and suffix.\r\n * The keys array can contain either a list of fields or jsonpaths (https://www.npmjs.com/package/jsonpath).\r\n * Fields and jsonpaths can not be mixed. Jsonpaths must start with $.\r\n * @param {Array} items the list of items to filter\r\n * @param {String} search the search term\r\n * @param {Array[String]} keys an optional list of field keys to search in\r\n */\r\nexport const filter = (items, search, keys) => {\r\n  const regex = new RegExp(\r\n    `${search}`.replace(/\\*+/i, \".*\").replace(/^\"/, \"^\").replace(/\"$/, \"$\"),\r\n    \"i\"\r\n  );\r\n  const term =\r\n    search && search.length > 0\r\n      ? search.toLowerCase().replace(/^\"|\"$/i, \"\")\r\n      : \"\";\r\n  const jsonpaths =\r\n    Array.isArray(keys) && keys.filter((key) => key.startsWith(\"$\"));\r\n  if (jsonpaths && jsonpaths.length > 0) {\r\n    return items\r\n      .filter((item) => {\r\n        return term\r\n          ? jsonpaths.find((jp) => {\r\n              const tmp = jsonpath\r\n                .query(item, jp)\r\n                .find((v) => (_.isString(v) ? regex.test(v) : false));\r\n              return tmp && tmp.length > 0;\r\n            })\r\n          : true;\r\n      })\r\n      .map((item) => {\r\n        const copy = _.cloneDeep(item);\r\n        jsonpaths.forEach((jp) =>\r\n          jsonpath.nodes(copy, jp).forEach((node) => {\r\n            if (_.isString(node.value) && regex.test(node.value)) {\r\n              const tmp =\r\n                node.path.length <= 2\r\n                  ? copy\r\n                  : _.get(copy, node.path.splice(1, node.path.length - 2));\r\n              addTerm(tmp, node.path[node.path.length - 1], term);\r\n            }\r\n          })\r\n        );\r\n        return copy;\r\n      });\r\n  } else {\r\n    return items\r\n      .filter((item) =>\r\n        term\r\n          ? (keys ? keys : Object.keys(item)).find((key) =>\r\n              _.isString(item[key]) ? regex.test(item[key]) : false\r\n            )\r\n          : true\r\n      )\r\n      .map((item) => {\r\n        const terms = (keys ? keys : Object.keys(item))\r\n          .map((key) => {\r\n            return getTerm(item, key, term);\r\n          })\r\n          .reduce((terms, term) => ({ ...terms, ...term }), {});\r\n        return { ...item, terms };\r\n      });\r\n  }\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport _ from \"lodash\";\r\nimport { createSelector } from \"reselect\";\r\n\r\nexport var getTimestamp = () => new Date();\r\n\r\n/**\r\n * Override this function within testing to return a static timestamp.\r\n */\r\nexport const timestampGenerator = (generator) => (getTimestamp = generator);\r\n\r\nexport const ResetType = {\r\n  RESET: \"reset\",\r\n};\r\nconst { RESET } = ResetType;\r\n\r\nexport const ActionTypes = {\r\n  REQUEST: \"request\",\r\n  BUSY: \"busy\",\r\n  SUCCESS: \"success\",\r\n  UPDATE: \"update\",\r\n  ERROR: \"error\",\r\n  POLL: \"poll\",\r\n};\r\nconst { REQUEST, BUSY, SUCCESS, UPDATE, ERROR, POLL } = ActionTypes;\r\n\r\n/**\r\n * Set an error as cleared so that it does not display a toast.\r\n *\r\n * @param {Object} payload\r\n */\r\nexport const clearError = (payload) => {\r\n  return _.set(payload, [\"payload\", \"cleared\"], true);\r\n};\r\n\r\n/**\r\n * Get the key used to create this type.\r\n *\r\n * @param {String} type\r\n * @returns {String}\r\n */\r\nexport const getKeyType = (type) => {\r\n  const types = type.split(\"/\");\r\n  if (types.length < 2) {\r\n    return \"\";\r\n  } else {\r\n    return types[0];\r\n  }\r\n};\r\n\r\n/**\r\n * Get the action type used to create this type.\r\n *\r\n * @param {String} type\r\n * @returns {String}\r\n */\r\nexport const getActionType = (type) => {\r\n  const types = type.split(\"/\");\r\n  if (types.length < 2) {\r\n    return \"\";\r\n  } else {\r\n    return types[types.length - 1];\r\n  }\r\n};\r\n\r\n/**\r\n * Checks whether this is a reset type.\r\n *\r\n * @param {String} key\r\n * @param {String} type\r\n * @returns {Boolean}\r\n */\r\nexport const isResetType = (key, type) => {\r\n  switch (type) {\r\n    case RESET:\r\n    case `${key}/${RESET}`:\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Checks whether this is an action type of: REQUEST, BUSY, SUCCESS, or ERROR.\r\n *\r\n * @param {String} key\r\n * @param {String} type\r\n * @returns {Boolean}\r\n */\r\nexport const isActionType = (key, type) => {\r\n  if (getKeyType(type) !== key) {\r\n    return false;\r\n  }\r\n  switch (getActionType(type)) {\r\n    case REQUEST:\r\n    case BUSY:\r\n    case SUCCESS:\r\n    case ERROR:\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Checks whether this is an action type of: UPDATE.\r\n *\r\n * @param {String} key\r\n * @param {String} type\r\n * @returns {Boolean}\r\n */\r\nexport const isUpdateType = (key, type) => {\r\n  if (getKeyType(type) !== key) {\r\n    return false;\r\n  }\r\n  switch (getActionType(type)) {\r\n    case UPDATE:\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Create a payload for a successful action result.\r\n * Pass null to clear the result.\r\n *\r\n * @param {*} payload\r\n * @returns {*}\r\n */\r\nexport const createSuccessPayload = (payload) => {\r\n  if (payload === null) {\r\n    return null;\r\n  } else if (_.isBoolean(payload)) {\r\n    const timestamp = getTimestamp();\r\n    return {\r\n      timestamp: timestamp,\r\n    };\r\n  } else {\r\n    return payload;\r\n  }\r\n};\r\n\r\n/**\r\n * Create a payload for an update action result.\r\n * Pass null to clear the result.\r\n *\r\n * @param {*} payload\r\n * @returns {*}\r\n */\r\nexport const createUpdatePayload = (payload) => {\r\n  if (payload === null) {\r\n    return null;\r\n  } else if (_.isBoolean(payload)) {\r\n    const timestamp = getTimestamp();\r\n    return {\r\n      timestamp: timestamp,\r\n    };\r\n  } else {\r\n    return payload;\r\n  }\r\n};\r\n\r\n/**\r\n * Create a payload for an action that produced an error.\r\n * Pass null to clear the error.\r\n *\r\n * @param {*} payload\r\n * @returns {*}\r\n */\r\nexport const createErrorPayload = (payload) => {\r\n  if (payload) {\r\n    const timestamp = getTimestamp();\r\n    return {\r\n      timestamp: timestamp,\r\n      error: payload,\r\n    };\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Create a payload for an action that is busy.\r\n * Pass null to clear the busy state.\r\n *\r\n * @param {*} payload\r\n * @returns {*}\r\n */\r\nexport const createBusyPayload = (payload) => {\r\n  if (payload) {\r\n    const timestamp = getTimestamp();\r\n    return {\r\n      timestamp: timestamp,\r\n      ...(!_.isBoolean(payload) && { type: payload }),\r\n    };\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Generate a single type.\r\n *\r\n * @param {String} key\r\n * @param {String} name\r\n * @returns {String}\r\n */\r\nexport const generateType = (key, name) => {\r\n  return `${key}/${name}`;\r\n};\r\n\r\n/**\r\n * Generates a map of action types for the specified unique key and name.\r\n *\r\n * @param {String} key\r\n * @param {*} name\r\n */\r\nexport const generateTypes = (key, name) => {\r\n  const obj = {\r\n    key: key,\r\n    [REQUEST]: `${key}/${name}/${REQUEST}`,\r\n    [BUSY]: `${key}/${name}/${BUSY}`,\r\n    [SUCCESS]: `${key}/${name}/${SUCCESS}`,\r\n    [UPDATE]: `${key}/${name}/${UPDATE}`,\r\n    [ERROR]: `${key}/${name}/${ERROR}`,\r\n    [POLL]: `${key}/${name}/${POLL}`,\r\n    [RESET]: `${key}/${RESET}`,\r\n  };\r\n  return obj;\r\n};\r\n\r\n/**\r\n * Create types from the specified action by reverse engineering.\r\n *\r\n * @param {} action\r\n */\r\nexport const createTypes = (action) => {\r\n  const { type } = action;\r\n  const types = type.split(\"/\");\r\n  const key = types[0];\r\n  const name = types.slice(1, -1).join(\"/\");\r\n  return generateTypes(key, name);\r\n};\r\n\r\nexport const createToJSSelector = (input) => {\r\n  return createSelector(input, (value) =>\r\n    value && value.toJS ? value.toJS() : value\r\n  );\r\n};\r\n\r\nexport const generateSelector = (key, type) => {\r\n  return createToJSSelector((state) => state.getIn([key, ...type.split(\"/\")]));\r\n};\r\n\r\n/**\r\n * Generate selectors for the specified types generated using generateTypes().\r\n *\r\n * @see this#generateTypes\r\n * @param {*} types\r\n * @returns {Array} [SUCCESS, ERROR, BUSY, POLL, REQUEST]\r\n */\r\nexport const generateSelectors = (types) => {\r\n  return [\r\n    generateSelector(types.key, types[SUCCESS]),\r\n    generateSelector(types.key, types[ERROR]),\r\n    generateSelector(types.key, types[BUSY]),\r\n    generateSelector(types.key, types[POLL]),\r\n    generateSelector(types.key, types[REQUEST]),\r\n  ];\r\n};\r\n\r\nexport const generateAction = (type) => {\r\n  const t = getActionType(type);\r\n  switch (t) {\r\n    case BUSY:\r\n      return (payload) => ({\r\n        type,\r\n        payload: createBusyPayload(payload),\r\n      });\r\n    case ERROR:\r\n      return (payload) => ({\r\n        type,\r\n        payload: createErrorPayload(payload),\r\n      });\r\n    case SUCCESS:\r\n      return (payload) => ({\r\n        type,\r\n        payload: createSuccessPayload(payload),\r\n      });\r\n    case UPDATE:\r\n      return (payload) => ({\r\n        type,\r\n        payload: createUpdatePayload(payload),\r\n      });\r\n    case REQUEST:\r\n    default:\r\n      return (payload) => ({ type, payload });\r\n  }\r\n};\r\n\r\n/**\r\n * Generate actions for the specified types generated using generateTypes().\r\n *\r\n * @see this#generateTypes\r\n * @param {*} types\r\n * @returns {Array} [REQUEST, SUCCESS, ERROR, BUSY, POLL, UPDATE]\r\n */\r\nexport const generateActions = (types) => {\r\n  return [\r\n    generateAction(types[REQUEST]),\r\n    generateAction(types[SUCCESS]),\r\n    generateAction(types[ERROR]),\r\n    generateAction(types[BUSY]),\r\n    generateAction(types[POLL]),\r\n    generateAction(types[UPDATE]),\r\n  ];\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  generateAction,\r\n  generateSelector,\r\n  generateTypes,\r\n  generateActions,\r\n  generateSelectors\r\n} from \"../util\";\r\n\r\nexport const key = \"busy\";\r\n\r\n// key used to specify whether a busy tokan is a global type\r\nexport const BUSY_GLOBAL = \"global\";\r\n\r\n// global busy state\r\nexport const BUSY_TOKENS = `${key}/tokens`;\r\nexport const busyTokens = generateAction(BUSY_TOKENS);\r\nexport const selectBusyTokens = generateSelector(key, BUSY_TOKENS);\r\n// test to make busy... busy\r\nexport const MAKE_BUSY = generateTypes(key, \"make\");\r\nexport const [\r\n  makeBusy,\r\n  makeBusySuccess,\r\n  makeBusyError,\r\n  makeBusyBusy\r\n] = generateActions(MAKE_BUSY);\r\nexport const [\r\n  selectBusy,\r\n  selectBusyError,\r\n  selectBusyBusy,\r\n  selectBusyRequest\r\n] = generateSelectors(MAKE_BUSY);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  call,\r\n  delay,\r\n  put,\r\n  select,\r\n  takeEvery,\r\n  takeLatest,\r\n} from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  busyTokens,\r\n  BUSY_GLOBAL,\r\n  makeBusyBusy,\r\n  makeBusyError,\r\n  makeBusySuccess,\r\n  MAKE_BUSY,\r\n  selectBusyTokens,\r\n} from \"./action\";\r\nconst { REQUEST, BUSY } = ActionTypes;\r\n\r\nconst modifyBusyToken = (action, tokens) => {\r\n  const { type, payload } = action;\r\n  if (payload) {\r\n    tokens[type] = payload;\r\n  } else {\r\n    delete tokens[type];\r\n  }\r\n  return tokens;\r\n};\r\n\r\nexport function* isBusySaga(action) {\r\n  const tokens = yield select(selectBusyTokens);\r\n  yield call(modifyBusyToken, action, tokens);\r\n  yield put(busyTokens(tokens));\r\n}\r\n\r\nconst isBusyAction = (action) => {\r\n  const types = action.type.split(\"/\");\r\n  return types[types.length - 1] === BUSY;\r\n};\r\n\r\nexport function* makeBusySaga() {\r\n  try {\r\n    yield put(makeBusyBusy(BUSY_GLOBAL));\r\n    yield put(makeBusyError());\r\n    yield delay(5000);\r\n    yield put(makeBusySuccess(\"successfully busied\"));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(makeBusyError(error.message));\r\n  } finally {\r\n    yield put(makeBusyBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* busySaga() {\r\n  yield takeEvery(isBusyAction, isBusySaga);\r\n  yield takeLatest(MAKE_BUSY[REQUEST], makeBusySaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nexport default function* commonSaga() {}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { ResetType, generateAction } from \"./util\";\r\nconst { RESET } = ResetType;\r\n\r\n// reset all of the state\r\nexport const reset = generateAction(RESET);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  generateAction,\r\n  generateSelector,\r\n  generateType,\r\n  generateTypes,\r\n  generateActions,\r\n  generateSelectors\r\n} from \"../util\";\r\n\r\nexport const key = \"error\";\r\n\r\n// global error state\r\nexport const ERROR_TOKENS = generateType(key, \"tokens\");\r\nexport const errorTokens = generateAction(ERROR_TOKENS);\r\nexport const selectErrorTokens = generateSelector(key, ERROR_TOKENS);\r\n// test to clear error\r\nexport const CLEAR_ERROR = generateTypes(key, \"clear\");\r\nexport const [\r\n  clearError,\r\n  clearErrorSuccess,\r\n  clearErrorError,\r\n  clearErrorBusy\r\n] = generateActions(CLEAR_ERROR);\r\nexport const [\r\n  selectError,\r\n  selectErrorError,\r\n  selectErrorBusy\r\n] = generateSelectors(CLEAR_ERROR);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport _ from \"lodash\";\r\nimport { call, put, select, takeEvery } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { reset } from \"../action\";\r\nimport { ActionTypes, generateAction } from \"../util\";\r\nimport {\r\n  clearErrorBusy,\r\n  clearErrorError,\r\n  clearErrorSuccess,\r\n  CLEAR_ERROR,\r\n  errorTokens,\r\n  selectErrorTokens,\r\n} from \"./action\";\r\nconst { REQUEST, ERROR } = ActionTypes;\r\n\r\nconst modifyErrorToken = (action, tokens) => {\r\n  const { type, payload } = action;\r\n  tokens[type] = _.assign({}, tokens[type], payload, {\r\n    cleared: !Boolean(payload),\r\n  });\r\n  return tokens;\r\n};\r\n\r\nconst isUnauthorized = (action) => {\r\n  const { payload } = action;\r\n  return /unauthorized|expired|session is invalid/gim.test(\r\n    _.get(payload, \"error\", \"\")\r\n  );\r\n};\r\n\r\nexport function* isErrorSaga(action) {\r\n  const tokens = yield select(selectErrorTokens);\r\n  yield call(modifyErrorToken, action, tokens);\r\n  if (isUnauthorized(action)) {\r\n    yield put(reset());\r\n  }\r\n  yield put(errorTokens(tokens));\r\n}\r\n\r\nconst isErrorAction = (action) => {\r\n  const types = action.type.split(\"/\");\r\n  return types[types.length - 1] === ERROR;\r\n};\r\n\r\nexport function* clearErrorSaga(action) {\r\n  const { payload: key } = action;\r\n  if (!key) {\r\n    return;\r\n  }\r\n  const errorAction = generateAction(key);\r\n  try {\r\n    yield put(clearErrorBusy());\r\n    yield put(clearErrorError());\r\n    const tokens = yield select(selectErrorTokens);\r\n    yield call(modifyErrorToken, errorAction(), tokens);\r\n    yield put(clearErrorSuccess(\"successfully cleared error\"));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(clearErrorError(error.message));\r\n  } finally {\r\n    yield put(clearErrorBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* errorSaga() {\r\n  yield takeEvery(isErrorAction, isErrorSaga);\r\n  yield takeEvery(CLEAR_ERROR[REQUEST], clearErrorSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"map\";\r\n\r\n// fetch map info\r\nexport const FETCH_MAP_INFO = generateTypes(key, \"info\");\r\nexport const [\r\n  fetchMapInfo,\r\n  fetchMapInfoSuccess,\r\n  fetchMapInfoError,\r\n  fetchMapInfoBusy\r\n] = generateActions(FETCH_MAP_INFO);\r\nexport const [\r\n  selectMapInfo,\r\n  selectMapInfoError,\r\n  selectMapInfoBusy,\r\n  selectMapInfoRequest\r\n] = generateSelectors(FETCH_MAP_INFO);\r\n// fetch map style\r\nexport const FETCH_MAP_STYLE = generateTypes(key, \"style\");\r\nexport const [\r\n  fetchMapStyle,\r\n  fetchMapStyleSuccess,\r\n  fetchMapStyleError,\r\n  fetchMapStyleBusy\r\n] = generateActions(FETCH_MAP_STYLE);\r\nexport const [\r\n  selectMapStyle,\r\n  selectMapStyleError,\r\n  selectMapStyleBusy,\r\n  selectMapStyleRequest\r\n] = generateSelectors(FETCH_MAP_STYLE);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport _ from \"lodash\";\r\n\r\nexport const SERVICE_URL = \"/api\";\r\n\r\nexport const setAuthorization = (token) => {\r\n  localStorage.setItem(\"authorization\", token);\r\n};\r\n\r\nexport const getAuthorization = () => {\r\n  const token = localStorage.getItem(\"authorization\");\r\n  if (!_.isEmpty(token) && token !== \"null\") {\r\n    return token;\r\n  }\r\n};\r\n\r\nexport const createQuery = (params) => {\r\n  return Object.keys(params)\r\n    .map((key) => key + \"=\" + params[key])\r\n    .join(\"&\");\r\n};\r\n\r\nconst validateResponse = async (response) => {\r\n  switch (response.status) {\r\n    case 0:\r\n    case 302:\r\n    case 401:\r\n      throw Error(\"Session is invalid.\");\r\n    default:\r\n      if (!response.ok) {\r\n        let message = response.statusText;\r\n        try {\r\n          let result = await response.text();\r\n          result = JSON.parse(result);\r\n          if (_.isString(result) && result.length > 0) {\r\n            message = result;\r\n          } else if (\r\n            _.isObject(result) &&\r\n            _.isString(result.message) &&\r\n            result.message.length > 0\r\n          ) {\r\n            message = result.message;\r\n          }\r\n        } catch {\r\n          // purposefully ducked catch\r\n        }\r\n        throw Error(message);\r\n      }\r\n      return response;\r\n  }\r\n};\r\n\r\nconst handleResponse = async (response) => {\r\n  let result = null;\r\n  try {\r\n    result = await response.text();\r\n    result = JSON.parse(result);\r\n  } catch {\r\n    // purposely ducked catch\r\n  }\r\n  return result;\r\n};\r\n\r\nconst handleError = (error) => {\r\n  throw error;\r\n};\r\n\r\nconst defaultOptions = (authenticated) => {\r\n  const authorization = getAuthorization();\r\n  if (\r\n    authenticated &&\r\n    _.isEmpty(authorization) &&\r\n    process.env.NODE_ENV !== \"test\"\r\n  ) {\r\n    throw Error(\"Session is invalid.\");\r\n  }\r\n  return {\r\n    // mode: \"cors\", // no-cors, *cors, same-origin\r\n    // cache: \"default\", // *default, no-cache, reload, force-cache, only-if-cached\r\n    redirect: \"manual\", // manual, *follow, error\r\n    // referrerPolicy: \"client\", // no-referrer, *client\r\n    ...(authenticated && { credentials: \"include\" }),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      ...(authenticated && { Authorization: `Token ${getAuthorization()}` }),\r\n    },\r\n  };\r\n};\r\n\r\nconst createTarget = (endpoint, params) => {\r\n  let target = `${SERVICE_URL}/${endpoint}`;\r\n  if (params) {\r\n    const query = createQuery(params);\r\n    target = `${target}?${query}`;\r\n  }\r\n  return target;\r\n};\r\n\r\nexport const read = (endpoint, query = null, authenticated = false) => {\r\n  const options = _.merge({}, defaultOptions(authenticated), {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\",\r\n      \"Content-Type\": \"application/json\",\r\n      ...(query === null && { \"Cache-Control\": \"no-store\" }),\r\n    },\r\n  });\r\n  let target = createTarget(endpoint, query);\r\n  return fetch(target, options)\r\n    .then(validateResponse)\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const update = (endpoint, body, query = null, authenticated = false) => {\r\n  const options = _.merge({}, defaultOptions(authenticated), {\r\n    method: \"PUT\",\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n  let target = createTarget(endpoint, query);\r\n  return fetch(target, options)\r\n    .then(validateResponse)\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const create = (endpoint, body, query = null, authenticated = false) => {\r\n  const options = _.merge({}, defaultOptions(authenticated), {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n  let target = createTarget(endpoint, query);\r\n  return fetch(target, options)\r\n    .then(validateResponse)\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const remove = (endpoint, query = null, authenticated = false) => {\r\n  const options = _.merge({}, defaultOptions(authenticated), {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  });\r\n  let target = createTarget(endpoint, query);\r\n  return fetch(target, options)\r\n    .then(validateResponse)\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n\r\nexport const upload = (endpoint, file, query = null, authenticated = false) => {\r\n  const data = new FormData();\r\n  data.append(\"file\", file.files[0]);\r\n  const options = _.merge({}, defaultOptions(authenticated), {\r\n    method: \"POST\",\r\n    headers: {\r\n      // setting the header here will cause the multipart post upload to fail\r\n      // 'Content-Type': '?',\r\n      Accept: \"application/json\",\r\n    },\r\n    body: data,\r\n  });\r\n  let target = createTarget(endpoint, query);\r\n  return fetch(target, options)\r\n    .then(validateResponse)\r\n    .then(handleResponse)\r\n    .catch(handleError);\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { read } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"map\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readMapInfo = () => {\r\n  return read(`${SERVICE_ENDPOINT}/info`, null, authenticate);\r\n};\r\n\r\nexport const readMapStyle = () => {\r\n  return read(`${SERVICE_ENDPOINT}/style`, null, authenticate);\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  fetchMapInfoBusy,\r\n  fetchMapInfoError,\r\n  fetchMapInfoSuccess,\r\n  fetchMapStyleBusy,\r\n  fetchMapStyleError,\r\n  fetchMapStyleSuccess,\r\n  FETCH_MAP_INFO,\r\n  FETCH_MAP_STYLE,\r\n} from \"./action\";\r\nimport { readMapInfo, readMapStyle } from \"./api\";\r\nconst { REQUEST } = ActionTypes;\r\n\r\nexport function* readMapInfoSaga() {\r\n  try {\r\n    yield put(fetchMapInfoBusy(true));\r\n    yield put(fetchMapInfoError());\r\n    const response = yield call(readMapInfo);\r\n    yield put(fetchMapInfoSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchMapInfoError(error.message));\r\n  } finally {\r\n    yield put(fetchMapInfoBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readMapStyleSaga() {\r\n  try {\r\n    yield put(fetchMapStyleBusy(true));\r\n    yield put(fetchMapStyleError());\r\n    const response = yield call(readMapStyle);\r\n    yield put(fetchMapStyleSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchMapStyleError(error.message));\r\n  } finally {\r\n    yield put(fetchMapStyleBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* mapSaga() {\r\n  yield takeLatest(FETCH_MAP_INFO[REQUEST], readMapInfoSaga);\r\n  yield takeLatest(FETCH_MAP_STYLE[REQUEST], readMapStyleSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"occupancies\";\r\n\r\n// fetch occupancies\r\nexport const FETCH_OCCUPANCIES = generateTypes(key, \"list\");\r\nexport const [\r\n  fetchOccupancies,\r\n  fetchOccupanciesSuccess,\r\n  fetchOccupanciesError,\r\n  fetchOccupanciesBusy\r\n] = generateActions(FETCH_OCCUPANCIES);\r\nexport const [\r\n  selectOccupancies,\r\n  selectOccupanciesError,\r\n  selectOccupanciesBusy,\r\n  selectOccupanciesRequest\r\n] = generateSelectors(FETCH_OCCUPANCIES);\r\n// fetch occupancy\r\nexport const FETCH_OCCUPANCY = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchOccupancy,\r\n  fetchOccupanciesuccess,\r\n  fetchOccupancyError,\r\n  fetchOccupancyBusy\r\n] = generateActions(FETCH_OCCUPANCY);\r\nexport const [\r\n  selectOccupancy,\r\n  selectOccupancyError,\r\n  selectOccupancyBusy,\r\n  selectOccupancyRequest\r\n] = generateSelectors(FETCH_OCCUPANCY);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { read } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"occupancies\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readOccupancies = () => {\r\n  return read(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const readOccupancy = (id) => {\r\n  return read(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  fetchOccupanciesBusy,\r\n  fetchOccupanciesError,\r\n  fetchOccupanciesSuccess,\r\n  fetchOccupanciesuccess,\r\n  fetchOccupancyBusy,\r\n  fetchOccupancyError,\r\n  FETCH_OCCUPANCIES,\r\n  FETCH_OCCUPANCY,\r\n} from \"./action\";\r\nimport { readOccupancies, readOccupancy } from \"./api\";\r\nconst { REQUEST } = ActionTypes;\r\n\r\nexport function* readOccupanciesaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(fetchOccupancyBusy(true));\r\n    yield put(fetchOccupancyError());\r\n    const response = yield call(readOccupancy, id);\r\n    yield put(fetchOccupanciesuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchOccupancyError(error.message));\r\n  } finally {\r\n    yield put(fetchOccupancyBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readOccupanciesSaga() {\r\n  try {\r\n    yield put(fetchOccupanciesBusy(true));\r\n    yield put(fetchOccupanciesError());\r\n    const response = yield call(readOccupancies);\r\n    yield put(fetchOccupanciesSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchOccupanciesError(error.message));\r\n  } finally {\r\n    yield put(fetchOccupanciesBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* occupanciesSaga() {\r\n  yield takeLatest(FETCH_OCCUPANCIES[REQUEST], readOccupanciesSaga);\r\n  yield takeLatest(FETCH_OCCUPANCY[REQUEST], readOccupanciesaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"organizations\";\r\n\r\n// fetch organizations\r\nexport const FETCH_ORGANIZATIONS = generateTypes(key, \"list\");\r\nexport const [\r\n  fetchOrganizations,\r\n  fetchOrganizationsSuccess,\r\n  fetchOrganizationsError,\r\n  fetchOrganizationsBusy\r\n] = generateActions(FETCH_ORGANIZATIONS);\r\nexport const [\r\n  selectOrganizations,\r\n  selectOrganizationsError,\r\n  selectOrganizationsBusy,\r\n  selectOrganizationsRequest\r\n] = generateSelectors(FETCH_ORGANIZATIONS);\r\n// fetch organization\r\nexport const FETCH_ORGANIZATION = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchOrganization,\r\n  fetchOrganizationSuccess,\r\n  fetchOrganizationError,\r\n  fetchOrganizationBusy\r\n] = generateActions(FETCH_ORGANIZATION);\r\nexport const [\r\n  selectOrganization,\r\n  selectOrganizationError,\r\n  selectOrganizationBusy,\r\n  selectOrganizationRequest\r\n] = generateSelectors(FETCH_ORGANIZATION);\r\n// update organization\r\nexport const UPDATE_ORGANIZATION = generateTypes(key, \"update\");\r\nexport const [\r\n  updateOrganization,\r\n  updateOrganizationSuccess,\r\n  updateOrganizationError,\r\n  updateOrganizationBusy\r\n] = generateActions(UPDATE_ORGANIZATION);\r\nexport const [\r\n  selectUpdateOrganization,\r\n  selectUpdateOrganizationError,\r\n  selectUpdateOrganizationBusy,\r\n  selectUpdateOrganizationRequest\r\n] = generateSelectors(UPDATE_ORGANIZATION);\r\n// remove organization\r\nexport const REMOVE_ORGANIZATION = generateTypes(key, \"remove\");\r\nexport const [\r\n  removeOrganization,\r\n  removeOrganizationSuccess,\r\n  removeOrganizationError,\r\n  removeOrganizationBusy\r\n] = generateActions(REMOVE_ORGANIZATION);\r\nexport const [\r\n  selectRemoveOrganization,\r\n  selectRemoveOrganizationError,\r\n  selectRemoveOrganizationBusy,\r\n  selectRemoveOrganizationRequest\r\n] = generateSelectors(REMOVE_ORGANIZATION);\r\n// create organization\r\nexport const CREATE_ORGANIZATION = generateTypes(key, \"create\");\r\nexport const [\r\n  createOrganization,\r\n  createOrganizationSuccess,\r\n  createOrganizationError,\r\n  createOrganizationBusy\r\n] = generateActions(CREATE_ORGANIZATION);\r\nexport const [\r\n  selectCreateOrganization,\r\n  selectCreateOrganizationError,\r\n  selectCreateOrganizationBusy,\r\n  selectCreateOrganizationRequest\r\n] = generateSelectors(CREATE_ORGANIZATION);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { create, read, update, remove } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"organizations\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readOrganizations = () => {\r\n  return read(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const readOrganization = (id) => {\r\n  return read(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n\r\nexport const removeOrganization = (id) => {\r\n  return remove(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n\r\nexport const updateOrganization = (id, name) => {\r\n  return update(\r\n    `${SERVICE_ENDPOINT}/${id}`,\r\n    {\r\n      name: name,\r\n    },\r\n    null,\r\n    authenticate\r\n  );\r\n};\r\n\r\nexport const createOrganization = (name) => {\r\n  return create(\r\n    `${SERVICE_ENDPOINT}`,\r\n    {\r\n      name: name,\r\n    },\r\n    null,\r\n    authenticate\r\n  );\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  createOrganizationBusy,\r\n  createOrganizationError,\r\n  createOrganizationSuccess,\r\n  CREATE_ORGANIZATION,\r\n  fetchOrganizationBusy,\r\n  fetchOrganizationError,\r\n  fetchOrganizationsBusy,\r\n  fetchOrganizationsError,\r\n  fetchOrganizationsSuccess,\r\n  fetchOrganizationSuccess,\r\n  FETCH_ORGANIZATION,\r\n  FETCH_ORGANIZATIONS,\r\n  removeOrganizationBusy,\r\n  removeOrganizationError,\r\n  removeOrganizationSuccess,\r\n  REMOVE_ORGANIZATION,\r\n  updateOrganizationBusy,\r\n  updateOrganizationError,\r\n  updateOrganizationSuccess,\r\n  UPDATE_ORGANIZATION,\r\n} from \"./action\";\r\nimport {\r\n  createOrganization,\r\n  readOrganization,\r\n  readOrganizations,\r\n  removeOrganization,\r\n  updateOrganization,\r\n} from \"./api\";\r\nconst { REQUEST } = ActionTypes;\r\n\r\nexport function* createOrganizationSaga(action) {\r\n  const { name } = action.payload;\r\n  try {\r\n    yield put(createOrganizationBusy(true));\r\n    yield put(createOrganizationError());\r\n    const response = yield call(createOrganization, name);\r\n    yield put(createOrganizationSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(createOrganizationError(error.message));\r\n  } finally {\r\n    yield put(createOrganizationBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readOrganizationSaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(fetchOrganizationBusy(true));\r\n    yield put(fetchOrganizationError());\r\n    const response = yield call(readOrganization, id);\r\n    yield put(fetchOrganizationSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchOrganizationError(error.message));\r\n  } finally {\r\n    yield put(fetchOrganizationBusy(false));\r\n  }\r\n}\r\n\r\nexport function* removeOrganizationSaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(removeOrganizationBusy(true));\r\n    yield put(removeOrganizationError());\r\n    const response = yield call(removeOrganization, id);\r\n    yield put(removeOrganizationSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(removeOrganizationError(error.message));\r\n  } finally {\r\n    yield put(removeOrganizationBusy(false));\r\n  }\r\n}\r\n\r\nexport function* updateOrganizationSaga(action) {\r\n  const { name } = action.payload;\r\n  try {\r\n    yield put(updateOrganizationBusy(true));\r\n    yield put(updateOrganizationError());\r\n    const response = yield call(updateOrganization, name);\r\n    yield put(updateOrganizationSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(updateOrganizationError(error.message));\r\n  } finally {\r\n    yield put(updateOrganizationBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readOrganizationsSaga() {\r\n  try {\r\n    yield put(fetchOrganizationsBusy(true));\r\n    yield put(fetchOrganizationsError());\r\n    const response = yield call(readOrganizations);\r\n    yield put(fetchOrganizationsSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchOrganizationsError(error.message));\r\n  } finally {\r\n    yield put(fetchOrganizationsBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* organizationsSaga() {\r\n  yield takeLatest(CREATE_ORGANIZATION[REQUEST], createOrganizationSaga);\r\n  yield takeLatest(FETCH_ORGANIZATIONS[REQUEST], readOrganizationsSaga);\r\n  yield takeLatest(FETCH_ORGANIZATION[REQUEST], readOrganizationSaga);\r\n  yield takeLatest(REMOVE_ORGANIZATION[REQUEST], removeOrganizationSaga);\r\n  yield takeLatest(UPDATE_ORGANIZATION[REQUEST], updateOrganizationSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"spaces\";\r\n\r\n// fetch spaces\r\nexport const FETCH_SPACES = generateTypes(key, \"list\");\r\nexport const [\r\n  fetchSpaces,\r\n  fetchSpacesSuccess,\r\n  fetchSpacesError,\r\n  fetchSpacesBusy\r\n] = generateActions(FETCH_SPACES);\r\nexport const [\r\n  selectSpaces,\r\n  selectSpacesError,\r\n  selectSpacesBusy,\r\n  selectSpacesRequest\r\n] = generateSelectors(FETCH_SPACES);\r\n// fetch space\r\nexport const FETCH_SPACE = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchSpace,\r\n  fetchSpaceSuccess,\r\n  fetchSpaceError,\r\n  fetchSpaceBusy\r\n] = generateActions(FETCH_SPACE);\r\nexport const [\r\n  selectSpace,\r\n  selectSpaceError,\r\n  selectSpaceBusy,\r\n  selectSpaceRequest\r\n] = generateSelectors(FETCH_SPACE);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { read } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"spaces\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readSpaces = () => {\r\n  return read(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const readSpace = (id) => {\r\n  return read(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  fetchSpaceBusy,\r\n  fetchSpaceError,\r\n  fetchSpacesBusy,\r\n  fetchSpacesError,\r\n  fetchSpacesSuccess,\r\n  fetchSpaceSuccess,\r\n  FETCH_SPACE,\r\n  FETCH_SPACES,\r\n} from \"./action\";\r\nimport { readSpace, readSpaces } from \"./api\";\r\nconst { REQUEST } = ActionTypes;\r\n\r\nexport function* readSpaceSaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(fetchSpaceBusy(true));\r\n    yield put(fetchSpaceError());\r\n    const response = yield call(readSpace, id);\r\n    yield put(fetchSpaceSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchSpaceError(error.message));\r\n  } finally {\r\n    yield put(fetchSpaceBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readSpacesSaga() {\r\n  try {\r\n    yield put(fetchSpacesBusy(true));\r\n    yield put(fetchSpacesError());\r\n    const response = yield call(readSpaces);\r\n    yield put(fetchSpacesSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchSpacesError(error.message));\r\n  } finally {\r\n    yield put(fetchSpacesBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* spacesSaga() {\r\n  yield takeLatest(FETCH_SPACES[REQUEST], readSpacesSaga);\r\n  yield takeLatest(FETCH_SPACE[REQUEST], readSpaceSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"user\";\r\n\r\n// fetch user\r\nexport const FETCH_USER = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchUser,\r\n  fetchUserSuccess,\r\n  fetchUserError,\r\n  fetchUserBusy\r\n] = generateActions(FETCH_USER);\r\nexport const [\r\n  selectUser,\r\n  selectUserError,\r\n  selectUserBusy,\r\n  selectUserRequest\r\n] = generateSelectors(FETCH_USER);\r\n// update user\r\nexport const UPDATE_USER = generateTypes(key, \"update\");\r\nexport const [\r\n  updateUser,\r\n  updateUserSuccess,\r\n  updateUserError,\r\n  updateUserBusy\r\n] = generateActions(UPDATE_USER);\r\nexport const [\r\n  selectUpdateUser,\r\n  selectUpdateUserError,\r\n  selectUpdateUserBusy,\r\n  selectUpdateUserRequest\r\n] = generateSelectors(UPDATE_USER);\r\n// remove user\r\nexport const REMOVE_USER = generateTypes(key, \"remove\");\r\nexport const [\r\n  removeUser,\r\n  removeUserSuccess,\r\n  removeUserError,\r\n  removeUserBusy\r\n] = generateActions(REMOVE_USER);\r\nexport const [\r\n  selectRemoveUser,\r\n  selectRemoveUserError,\r\n  selectRemoveUserBusy,\r\n  selectRemoveUserRequest\r\n] = generateSelectors(REMOVE_USER);\r\n// login user\r\nexport const LOGIN_USER = generateTypes(key, \"login\");\r\nexport const [\r\n  loginUser,\r\n  loginUserSuccess,\r\n  loginUserError,\r\n  loginUserBusy\r\n] = generateActions(LOGIN_USER);\r\nexport const [\r\n  selectLoginUser,\r\n  selectLoginUserError,\r\n  selectLoginUserBusy,\r\n  selectLoginUserRequest\r\n] = generateSelectors(LOGIN_USER);\r\n// logout user\r\nexport const LOGOUT_USER = generateTypes(key, \"logout\");\r\nexport const [\r\n  logoutUser,\r\n  logoutUserSuccess,\r\n  logoutUserError,\r\n  logoutUserBusy\r\n] = generateActions(LOGOUT_USER);\r\nexport const [\r\n  selectLogoutUser,\r\n  selectLogoutUserError,\r\n  selectLogoutUserBusy,\r\n  selectLogoutUserRequest\r\n] = generateSelectors(LOGOUT_USER);\r\n// continue user session\r\nexport const CONTINUE_USER = generateTypes(key, \"continue\");\r\nexport const [\r\n  continueUser,\r\n  continueUserSuccess,\r\n  continueUserError,\r\n  continueUserBusy\r\n] = generateActions(CONTINUE_USER);\r\nexport const [\r\n  selectContinueUser,\r\n  selectContinueUserError,\r\n  selectContinueUserBusy,\r\n  selectContinueUserRequest\r\n] = generateSelectors(CONTINUE_USER);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { create, read, update, remove } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"user\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readUser = () => {\r\n  return read(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const removeUser = () => {\r\n  return remove(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const updateUser = (email, password, preferences) => {\r\n  return update(\r\n    `${SERVICE_ENDPOINT}`,\r\n    {\r\n      ...(email && { email: email }),\r\n      ...(password && { password: password }),\r\n      ...(preferences && { preferences: preferences }),\r\n    },\r\n    null,\r\n    authenticate\r\n  );\r\n};\r\n\r\nexport const login = (email, password) => {\r\n  return create(`${SERVICE_ENDPOINT}/login`, {\r\n    email: email,\r\n    password: password,\r\n  });\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  CONTINUE_USER,\r\n  FETCH_USER,\r\n  LOGIN_USER,\r\n  LOGOUT_USER,\r\n  REMOVE_USER,\r\n  UPDATE_USER,\r\n  continueUserBusy,\r\n  continueUserError,\r\n  continueUserSuccess,\r\n  fetchUserBusy,\r\n  fetchUserError,\r\n  fetchUserSuccess,\r\n  loginUserBusy,\r\n  loginUserError,\r\n  loginUserSuccess,\r\n  logoutUserBusy,\r\n  logoutUserError,\r\n  logoutUserSuccess,\r\n  removeUserBusy,\r\n  removeUserError,\r\n  removeUserSuccess,\r\n  updateUserBusy,\r\n  updateUserError,\r\n  updateUserSuccess,\r\n} from \"./action\";\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { getAuthorization, setAuthorization } from \"../api\";\r\nimport { login, readUser, removeUser, updateUser } from \"./api\";\r\n\r\nimport { ActionTypes, clearError } from \"../util\";\r\nimport { BUSY_GLOBAL } from \"../busy/action\";\r\nimport _ from \"lodash\";\r\nimport { logError } from \"utils/utils\";\r\nimport { reset } from \"../action\";\r\n\r\nconst { REQUEST } = ActionTypes;\r\n\r\nconst parseJson = (json) => {\r\n  try {\r\n    if (_.isString(json)) {\r\n      return JSON.parse(json);\r\n    }\r\n  } finally {\r\n  }\r\n  return json;\r\n};\r\n\r\nconst defaultPreferences = (user) => {\r\n  user.preferences = _.merge(\r\n    {},\r\n    {\r\n      markers: false,\r\n      predictions: false,\r\n      requirement: 20,\r\n      availability: 5,\r\n    },\r\n    parseJson(user.preferences)\r\n  );\r\n  return user;\r\n};\r\n\r\nexport function* readUserSaga() {\r\n  try {\r\n    yield put(fetchUserBusy(true));\r\n    yield put(fetchUserError());\r\n    let response = yield call(readUser);\r\n    response = yield call(defaultPreferences, response);\r\n    yield put(fetchUserSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchUserError(error.message));\r\n  } finally {\r\n    yield put(fetchUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* removeUserSaga() {\r\n  try {\r\n    yield put(removeUserBusy(BUSY_GLOBAL));\r\n    yield put(removeUserError());\r\n    yield call(removeUser);\r\n    yield put(removeUserSuccess(true));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(removeUserError(error.message));\r\n  } finally {\r\n    yield put(removeUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* updateUserSaga(action) {\r\n  const { email, password, preferences } = action.payload;\r\n  try {\r\n    yield put(updateUserBusy(BUSY_GLOBAL));\r\n    yield put(updateUserError());\r\n    const response = yield call(updateUser, email, password, preferences);\r\n    yield put(updateUserSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(updateUserError(error.message));\r\n  } finally {\r\n    yield put(updateUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* loginSaga(action) {\r\n  const { email, password } = action.payload;\r\n  try {\r\n    yield put(loginUserBusy(BUSY_GLOBAL));\r\n    yield put(loginUserError());\r\n    const response = yield call(login, email, password);\r\n    yield call(setAuthorization, response && response.token);\r\n    yield put(loginUserSuccess(response && response.token));\r\n    yield call(readUserSaga);\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(loginUserError(error.message));\r\n  } finally {\r\n    yield put(loginUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* logoutSaga() {\r\n  try {\r\n    yield put(logoutUserBusy(BUSY_GLOBAL));\r\n    yield put(logoutUserError());\r\n    yield call(setAuthorization, null);\r\n    yield put(reset());\r\n    yield put(logoutUserSuccess(true));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(logoutUserError(error.message));\r\n  } finally {\r\n    yield put(logoutUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* continueSaga() {\r\n  try {\r\n    yield put(continueUserBusy(BUSY_GLOBAL));\r\n    yield put(continueUserError());\r\n    const auth = yield call(getAuthorization);\r\n    if (auth && auth !== \"invalid\") {\r\n      yield call(readUser);\r\n      yield put(loginUserSuccess(auth));\r\n      yield put(continueUserSuccess(auth));\r\n      yield call(readUserSaga);\r\n    }\r\n  } catch (error) {\r\n    logError(error);\r\n    yield call(setAuthorization, null);\r\n    yield put(clearError(continueUserError(error.message)));\r\n  } finally {\r\n    yield put(continueUserBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* usersSaga() {\r\n  yield takeLatest(CONTINUE_USER[REQUEST], continueSaga);\r\n  yield takeLatest(FETCH_USER[REQUEST], readUserSaga);\r\n  yield takeLatest(REMOVE_USER[REQUEST], removeUserSaga);\r\n  yield takeLatest(UPDATE_USER[REQUEST], updateUserSaga);\r\n  yield takeLatest(LOGIN_USER[REQUEST], loginSaga);\r\n  yield takeLatest(LOGOUT_USER[REQUEST], logoutSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"users\";\r\n\r\n// fetch users\r\nexport const FETCH_USERS = generateTypes(key, \"list\");\r\nexport const [\r\n  fetchUsers,\r\n  fetchUsersSuccess,\r\n  fetchUsersError,\r\n  fetchUsersBusy\r\n] = generateActions(FETCH_USERS);\r\nexport const [\r\n  selectUsers,\r\n  selectUsersError,\r\n  selectUsersBusy,\r\n  selectUsersRequest\r\n] = generateSelectors(FETCH_USERS);\r\n// fetch user\r\nexport const FETCH_USER = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchUser,\r\n  fetchUserSuccess,\r\n  fetchUserError,\r\n  fetchUserBusy\r\n] = generateActions(FETCH_USER);\r\nexport const [\r\n  selectUser,\r\n  selectUserError,\r\n  selectUserBusy,\r\n  selectUserRequest\r\n] = generateSelectors(FETCH_USER);\r\n// update user\r\nexport const UPDATE_USER = generateTypes(key, \"update\");\r\nexport const [\r\n  updateUser,\r\n  updateUserSuccess,\r\n  updateUserError,\r\n  updateUserBusy\r\n] = generateActions(UPDATE_USER);\r\nexport const [\r\n  selectUpdateUser,\r\n  selectUpdateUserError,\r\n  selectUpdateUserBusy,\r\n  selectUpdateUserRequest\r\n] = generateSelectors(UPDATE_USER);\r\n// remove user\r\nexport const REMOVE_USER = generateTypes(key, \"remove\");\r\nexport const [\r\n  removeUser,\r\n  removeUserSuccess,\r\n  removeUserError,\r\n  removeUserBusy\r\n] = generateActions(REMOVE_USER);\r\nexport const [\r\n  selectRemoveUser,\r\n  selectRemoveUserError,\r\n  selectRemoveUserBusy,\r\n  selectRemoveUserRequest\r\n] = generateSelectors(REMOVE_USER);\r\n// create user\r\nexport const CREATE_USER = generateTypes(key, \"create\");\r\nexport const [\r\n  createUser,\r\n  createUserSuccess,\r\n  createUserError,\r\n  createUserBusy\r\n] = generateActions(CREATE_USER);\r\nexport const [\r\n  selectCreateUser,\r\n  selectCreateUserError,\r\n  selectCreateUserBusy,\r\n  selectCreateUserRequest\r\n] = generateSelectors(CREATE_USER);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport { create, read, update, remove } from \"../api\";\r\n\r\nexport const SERVICE_ENDPOINT = \"users\";\r\n\r\nconst authenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n\r\nexport const readUsers = () => {\r\n  return read(`${SERVICE_ENDPOINT}`, null, authenticate);\r\n};\r\n\r\nexport const readUser = (id) => {\r\n  return read(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n\r\nexport const removeUser = (id) => {\r\n  return remove(`${SERVICE_ENDPOINT}/${id}`, null, authenticate);\r\n};\r\n\r\nexport const updateUser = (id, email, password, organization, scope) => {\r\n  return update(\r\n    `${SERVICE_ENDPOINT}/${id}`,\r\n    {\r\n      ...(email && { email: email }),\r\n      ...(password && { password: password }),\r\n      ...(organization && { organizationId: organization.id }),\r\n      ...(scope && { scope: scope }),\r\n    },\r\n    null,\r\n    authenticate\r\n  );\r\n};\r\n\r\nexport const createUser = (email, password, organization, scope) => {\r\n  return create(\r\n    `${SERVICE_ENDPOINT}`,\r\n    {\r\n      email: email,\r\n      password: password,\r\n      ...(organization && { organizationId: organization.id }),\r\n      scope: scope,\r\n    },\r\n    null,\r\n    authenticate\r\n  );\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { logError } from \"utils/utils\";\r\nimport { BUSY_GLOBAL } from \"../busy/action\";\r\nimport { ActionTypes } from \"../util\";\r\nimport {\r\n  createUserBusy,\r\n  createUserError,\r\n  createUserSuccess,\r\n  CREATE_USER,\r\n  fetchUserBusy,\r\n  fetchUserError,\r\n  fetchUsersBusy,\r\n  fetchUsersError,\r\n  fetchUsersSuccess,\r\n  fetchUserSuccess,\r\n  FETCH_USER,\r\n  FETCH_USERS,\r\n  removeUserBusy,\r\n  removeUserError,\r\n  removeUserSuccess,\r\n  REMOVE_USER,\r\n  updateUserBusy,\r\n  updateUserError,\r\n  updateUserSuccess,\r\n  UPDATE_USER,\r\n} from \"./action\";\r\nimport { createUser, readUser, readUsers, removeUser, updateUser } from \"./api\";\r\nconst { REQUEST } = ActionTypes;\r\n\r\nexport function* createUserSaga(action) {\r\n  const { email, password, organization } = action.payload;\r\n  try {\r\n    yield put(createUserBusy(BUSY_GLOBAL));\r\n    yield put(createUserError());\r\n    const response = yield call(createUser, email, password, organization);\r\n    yield put(createUserSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(createUserError(error.message));\r\n  } finally {\r\n    yield put(createUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readUserSaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(fetchUserBusy(true));\r\n    yield put(fetchUserError());\r\n    const response = yield call(readUser, id);\r\n    yield put(fetchUserSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchUserError(error.message));\r\n  } finally {\r\n    yield put(fetchUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* removeUserSaga(action) {\r\n  const { id } = action.payload;\r\n  try {\r\n    yield put(removeUserBusy(BUSY_GLOBAL));\r\n    yield put(removeUserError());\r\n    yield call(removeUser, id);\r\n    yield put(removeUserSuccess(true));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(removeUserError(error.message));\r\n  } finally {\r\n    yield put(removeUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* updateUserSaga(action) {\r\n  const { id, email, password, organization, scope } = action.payload;\r\n  try {\r\n    yield put(updateUserBusy(BUSY_GLOBAL));\r\n    yield put(updateUserError());\r\n    const response = yield call(\r\n      updateUser,\r\n      id,\r\n      email,\r\n      password,\r\n      organization,\r\n      scope\r\n    );\r\n    yield put(updateUserSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(updateUserError(error.message));\r\n  } finally {\r\n    yield put(updateUserBusy(false));\r\n  }\r\n}\r\n\r\nexport function* readUsersSaga() {\r\n  try {\r\n    yield put(fetchUsersBusy(true));\r\n    yield put(fetchUsersError());\r\n    const response = yield call(readUsers);\r\n    yield put(fetchUsersSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchUsersError(error.message));\r\n  } finally {\r\n    yield put(fetchUsersBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* usersSaga() {\r\n  yield takeLatest(CREATE_USER[REQUEST], createUserSaga);\r\n  yield takeLatest(FETCH_USERS[REQUEST], readUsersSaga);\r\n  yield takeLatest(FETCH_USER[REQUEST], readUserSaga);\r\n  yield takeLatest(REMOVE_USER[REQUEST], removeUserSaga);\r\n  yield takeLatest(UPDATE_USER[REQUEST], updateUserSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateTypes, generateActions, generateSelectors } from \"../util\";\r\n\r\nexport const key = \"preference\";\r\n\r\n// fetch preference\r\nexport const FETCH_PREFERENCE = generateTypes(key, \"current\");\r\nexport const [\r\n  fetchPreference,\r\n  fetchPreferenceSuccess,\r\n  fetchPreferenceError,\r\n  fetchPreferenceBusy\r\n] = generateActions(FETCH_PREFERENCE);\r\nexport const [\r\n  selectPreference,\r\n  selectPreferenceError,\r\n  selectPreferenceBusy,\r\n  selectPreferenceRequest\r\n] = generateSelectors(FETCH_PREFERENCE);\r\n\r\n// update preference\r\nexport const UPDATE_PREFERENCE = generateTypes(key, \"update\");\r\nexport const [\r\n  updatePreference,\r\n  updatePreferenceSuccess,\r\n  updatePreferenceError,\r\n  updatePreferenceBusy\r\n] = generateActions(UPDATE_PREFERENCE);\r\nexport const [\r\n  selectUpdatePreference,\r\n  selectUpdatePreferenceError,\r\n  selectUpdatePreferenceBusy,\r\n  selectUpdatePreferenceRequest\r\n] = generateSelectors(UPDATE_PREFERENCE);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport { isEmpty } from \"lodash\";\r\nimport { logError } from \"../../utils/utils\";\r\n\r\nexport const readPreference = () => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      const item = window.localStorage.getItem(\"preference\");\r\n      if (!isEmpty(item)) {\r\n        try {\r\n          const preference = JSON.parse(item);\r\n          resolve(preference);\r\n        } catch (error) {\r\n          console.log(`Unable to parse the existing preference object: ${item}`);\r\n          logError(error);\r\n        }\r\n      }\r\n      resolve({});\r\n    } catch (error) {\r\n      reject(error);\r\n    }\r\n  });\r\n};\r\n\r\nexport const updatePreference = (preference) => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      window.localStorage.setItem(\"preference\", JSON.stringify(preference));\r\n      resolve(preference);\r\n    } catch (error) {\r\n      reject(error);\r\n    }\r\n  });\r\n};\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport {\r\n  FETCH_PREFERENCE,\r\n  UPDATE_PREFERENCE,\r\n  fetchPreferenceBusy,\r\n  fetchPreferenceError,\r\n  fetchPreferenceSuccess,\r\n  updatePreferenceBusy,\r\n  updatePreferenceError,\r\n  updatePreferenceSuccess,\r\n} from \"./action\";\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { readPreference, updatePreference } from \"./api\";\r\n\r\nimport { ActionTypes } from \"../util\";\r\nimport { BUSY_GLOBAL } from \"../busy/action\";\r\nimport _ from \"lodash\";\r\nimport { logError } from \"utils/utils\";\r\nimport { vehicle } from \"parking-common\";\r\n\r\nconst { REQUEST } = ActionTypes;\r\n\r\nconst defaultPreferences = (preference) => {\r\n  preference = _.merge(\r\n    {},\r\n    {\r\n      markers: false,\r\n      predictions: false,\r\n      requirement: 20,\r\n      availability: 5,\r\n      vehicle: vehicle.Passenger.label,\r\n      deferred: 8,\r\n    },\r\n    preference\r\n  );\r\n  return preference;\r\n};\r\n\r\nexport function* readPreferenceSaga() {\r\n  try {\r\n    yield put(fetchPreferenceBusy(true));\r\n    yield put(fetchPreferenceError());\r\n    let response = yield call(readPreference);\r\n    response = yield call(defaultPreferences, response);\r\n    yield put(fetchPreferenceSuccess(response));\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(fetchPreferenceError(error.message));\r\n  } finally {\r\n    yield put(fetchPreferenceBusy(false));\r\n  }\r\n}\r\n\r\nexport function* updatePreferenceSaga(action) {\r\n  const preference = action.payload;\r\n  try {\r\n    yield put(updatePreferenceBusy(BUSY_GLOBAL));\r\n    yield put(updatePreferenceError());\r\n    const response = yield call(updatePreference, preference);\r\n    yield put(updatePreferenceSuccess(response));\r\n    yield call(readPreferenceSaga);\r\n  } catch (error) {\r\n    logError(error);\r\n    yield put(updatePreferenceError(error.message));\r\n  } finally {\r\n    yield put(updatePreferenceBusy(false));\r\n  }\r\n}\r\n\r\nexport default function* preferencesSaga() {\r\n  yield takeLatest(FETCH_PREFERENCE[REQUEST], readPreferenceSaga);\r\n  yield takeLatest(UPDATE_PREFERENCE[REQUEST], updatePreferenceSaga);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { all } from \"redux-saga/effects\";\r\nimport busySaga from \"./busy/saga\";\r\nimport commonSaga from \"./common/saga\";\r\nimport errorSaga from \"./error/saga\";\r\nimport mapSaga from \"./map/saga\";\r\nimport occupanciesSaga from \"./occupancies/saga\";\r\nimport organizationsSaga from \"./organizations/saga\";\r\nimport spacesSaga from \"./spaces/saga\";\r\nimport userSaga from \"./user/saga\";\r\nimport usersSaga from \"./users/saga\";\r\nimport preferenceSaga from \"./preference/saga\";\r\n\r\nexport default function* rootSaga() {\r\n  yield all([\r\n    commonSaga(),\r\n    preferenceSaga(),\r\n    userSaga(),\r\n    usersSaga(),\r\n    organizationsSaga(),\r\n    spacesSaga(),\r\n    occupanciesSaga(),\r\n    busySaga(),\r\n    errorSaga(),\r\n    mapSaga(),\r\n  ]);\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isActionType, isResetType } from \"../util\";\r\nimport { BUSY_TOKENS, key } from \"./action\";\r\nimport _ from \"lodash\";\r\n\r\nconst initialState = _.set({}, BUSY_TOKENS.replace(/\\//, \".\"), {});\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    case BUSY_TOKENS:\r\n      return state.setIn(type.split(\"/\"), fromJS(payload));\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { generateAction, generateSelector, generateType } from \"../util\";\r\n\r\nexport const key = \"common\";\r\n\r\n// reset common state\r\nexport const RESET = generateType(key, \"reset-this-only\");\r\nexport const reset = generateAction(RESET);\r\n\r\n// notice\r\nexport const NOTICE = generateType(key, \"notice\");\r\nexport const setNotice = generateAction(NOTICE);\r\nexport const selectNotice = generateSelector(key, NOTICE);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport _ from \"lodash\";\r\nimport { ActionTypes, isActionType, isUpdateType } from \"../util\";\r\nimport { key, NOTICE, RESET } from \"./action\";\r\nconst { SUCCESS } = ActionTypes;\r\n\r\nconst initialState = {};\r\n\r\nconst toJS = (value) => (value && value.toJS ? value.toJS() : value);\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isUpdateType(key, type)) {\r\n    const types = type.split(\"/\");\r\n    types[types.length - 1] = SUCCESS;\r\n    return state.setIn(\r\n      types,\r\n      fromJS(_.assign(toJS(state.getIn(types)), payload))\r\n    );\r\n  }\r\n  // do not clear on global reset\r\n  // if (isResetType(key, type)) {\r\n  //   return fromJS(initialState);\r\n  // }\r\n  switch (type) {\r\n    case RESET:\r\n      return fromJS(initialState);\r\n    case NOTICE:\r\n      return state.setIn(type.split(\"/\"), fromJS(payload));\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isResetType, isActionType } from \"../util\";\r\nimport { ERROR_TOKENS, key } from \"./action\";\r\nimport _ from \"lodash\";\r\n\r\nconst initialState = _.set({}, ERROR_TOKENS.replace(/\\//, \".\"), {});\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    case ERROR_TOKENS:\r\n      return state.setIn(type.split(\"/\"), fromJS(payload));\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isActionType, isResetType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isActionType, isResetType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isActionType, isResetType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isActionType, isResetType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isResetType, isActionType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isResetType, isActionType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { fromJS } from \"immutable\";\r\nimport { isResetType, isActionType } from \"../util\";\r\nimport { key } from \"./action\";\r\n\r\nconst initialState = {};\r\n\r\nconst reducer = (state = fromJS(initialState), action) => {\r\n  const { type, payload } = action;\r\n  if (isActionType(key, type)) {\r\n    return state.setIn(type.split(\"/\"), fromJS(payload));\r\n  }\r\n  if (isResetType(key, type)) {\r\n    return fromJS(initialState);\r\n  }\r\n  switch (type) {\r\n    // add non action type reducers here\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { combineReducers } from \"redux-immutable\";\r\nimport { key as busyKey } from \"./busy/action\";\r\nimport busyReducer from \"./busy/reducer\";\r\nimport { key as commonKey } from \"./common/action\";\r\nimport commonReducer from \"./common/reducer\";\r\nimport { key as errorKey } from \"./error/action\";\r\nimport errorReducer from \"./error/reducer\";\r\nimport { key as mapKey } from \"./map/action\";\r\nimport mapReducer from \"./map/reducer\";\r\nimport { key as occupanciesKey } from \"./occupancies/action\";\r\nimport occupanciesReducer from \"./occupancies/reducer\";\r\nimport { key as organizationsKey } from \"./organizations/action\";\r\nimport organizationsReducer from \"./organizations/reducer\";\r\nimport { key as spacesKey } from \"./spaces/action\";\r\nimport spacesReducer from \"./spaces/reducer\";\r\nimport { key as userKey } from \"./user/action\";\r\nimport userReducer from \"./user/reducer\";\r\nimport { key as usersKey } from \"./users/action\";\r\nimport usersReducer from \"./users/reducer\";\r\nimport { key as preferenceKey } from \"./preference/action\";\r\nimport preferenceReducer from \"./preference/reducer\";\r\n\r\nexport default combineReducers({\r\n  [commonKey]: commonReducer,\r\n  [preferenceKey]: preferenceReducer,\r\n  [userKey]: userReducer,\r\n  [usersKey]: usersReducer,\r\n  [organizationsKey]: organizationsReducer,\r\n  [spacesKey]: spacesReducer,\r\n  [occupanciesKey]: occupanciesReducer,\r\n  [busyKey]: busyReducer,\r\n  [errorKey]: errorReducer,\r\n  [mapKey]: mapReducer,\r\n});\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  modal: {},\r\n  progress: {\r\n    outline: \"none\",\r\n    position: \"absolute\",\r\n    left: \"50%\",\r\n    top: \"50%\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, CircularProgress } from \"@material-ui/core\";\r\nimport { BUSY_GLOBAL, selectBusyTokens } from \"controllers/busy/action\";\r\n\r\nconst isBusy = busy => {\r\n  const count = busy\r\n    ? Object.values(busy).filter(v => v.type === BUSY_GLOBAL).length\r\n    : 0;\r\n  return count > 0;\r\n};\r\n\r\nclass PrkBusy extends React.Component {\r\n  static defaultProps = {\r\n    busy: false\r\n  };\r\n\r\n  render() {\r\n    const { classes, busy } = this.props;\r\n    return (\r\n      busy && (\r\n        <Modal open={busy} className={classes.modal}>\r\n          <CircularProgress className={classes.progress} />\r\n        </Modal>\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\nPrkBusy.propTypes = {\r\n  classes: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  busy: isBusy(selectBusyTokens(state))\r\n});\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(PrkBusy));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport { available, text, unavailable, unknown } from \"constants/palette\";\r\n\r\nimport { isTrue } from \"../../utils/utils\";\r\n\r\nconst isLogin = isTrue(process.env.REACT_APP_LOGIN);\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    display: \"-webkit-box\",\r\n    textAlign: \"left\",\r\n    margin: \".5em\",\r\n    position: \"absolute\",\r\n    left: \"0px\",\r\n    zIndex: 1000,\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      top: isLogin ? 50 : 0,\r\n    },\r\n  },\r\n  title: {\r\n    marginLeft: \".5em\",\r\n    flex: 1,\r\n  },\r\n  card: {\r\n    width: 300,\r\n    maxWidth: 300,\r\n  },\r\n  actions: {},\r\n  icons: {\r\n    padding: 0,\r\n  },\r\n  content: {\r\n    maxHeight: 400,\r\n    overflow: \"auto\",\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    marginLeft: \"auto\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    marginBottom: \"20px\",\r\n  },\r\n  formEntry: {\r\n    position: \"relative\",\r\n  },\r\n  infoIcon: {\r\n    position: \"absolute\",\r\n    margin: \"auto\",\r\n    textAlign: \"center\",\r\n    top: \"50%\",\r\n    bottom: \"50%\",\r\n  },\r\n  selectAvailability: {\r\n    width: \"120px\",\r\n    marginLeft: \"50px\",\r\n  },\r\n  selectDeferred: {\r\n    width: \"120px\",\r\n    marginLeft: \"50px\",\r\n  },\r\n  timeIcon: {\r\n    position: \"absolute\",\r\n    margin: \"auto\",\r\n    marginLeft: \"8px\",\r\n    textAlign: \"center\",\r\n    top: \"50%\",\r\n    bottom: \"50%\",\r\n  },\r\n  truckIcon: {\r\n    position: \"absolute\",\r\n    margin: \"auto\",\r\n    marginLeft: \"8px\",\r\n    textAlign: \"center\",\r\n    top: \"50%\",\r\n    bottom: \"50%\",\r\n  },\r\n  labelRequirement: {\r\n    display: \"inline-block\",\r\n    marginLeft: \"46px\",\r\n    marginRight: \"16px\",\r\n    marginTop: \"7px\",\r\n    marginBottom: \"7px\",\r\n  },\r\n  selectRequirement: {\r\n    width: \"120px\",\r\n    marginLeft: \"50px\",\r\n  },\r\n  avatar: {\r\n    display: \"inline-flex\",\r\n  },\r\n  symbol: {\r\n    display: \"inline-flex\",\r\n    color: text.light,\r\n    textShadow: `-1px 0 ${text.subtle}, 0 1px ${text.subtle}, 1px 0 ${text.subtle}, 0 -1px ${text.subtle}`,\r\n  },\r\n  label: { marginLeft: \"0.5em\" },\r\n  labelAvailable: { marginRight: \"16px\" },\r\n  arrowUpward: {\r\n    transform: \"translate(0,10px) scale(1,1.5)\",\r\n    color: available,\r\n  },\r\n  unknown: {\r\n    transform: \"translate(0,10px) scale(1, 2.5) rotate(90deg)\",\r\n    color: unknown,\r\n  },\r\n  arrowDownward: {\r\n    transform: \"translate(0,10px) scale(1,1.5)\",\r\n    color: unavailable,\r\n  },\r\n});\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport {\r\n  AccessTime as AccessTimeIcon,\r\n  AirportShuttle as AirportShuttleIcon,\r\n  ArrowDownward as ArrowDownwardIcon,\r\n  ArrowUpward as ArrowUpwardIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n  Info as InfoIcon,\r\n  Remove as RemoveIcon,\r\n} from \"@material-ui/icons\";\r\nimport {\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  Collapse,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormGroup,\r\n  IconButton,\r\n  MenuItem,\r\n  Select,\r\n  Switch,\r\n  Tooltip,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { cloneDeep, isEqual, isUndefined, range } from \"lodash\";\r\nimport { fetchPreference, selectPreference, updatePreference } from \"../../controllers/preference/action\";\r\nimport { selectUser, updateUser } from \"controllers/user/action\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { connect } from \"react-redux\";\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport moment from \"moment\";\r\nimport styles from \"./styles\";\r\nimport { vehicle } from \"parking-common\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nclass PrkControl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      expanded: false,\r\n    };\r\n  }\r\n\r\n  isLogin = isTrue(process.env.REACT_APP_LOGIN);\r\n  isMarkers = isTrue(process.env.REACT_APP_MARKERS);\r\n  isPredictions = isTrue(process.env.REACT_APP_PREDICTIONS);\r\n  isDeferred = isTrue(process.env.REACT_APP_DEFERRED);\r\n  isVehicleType = isTrue(process.env.REACT_APP_VEHICLE_TYPE);\r\n  isVehicleLength = isTrue(process.env.REACT_APP_VEHICLE_LENGTH);\r\n\r\n  componentDidMount() {\r\n    this.props.fetchPreference();\r\n    this.updateLayoutProperties();\r\n  }\r\n\r\n  getLayoutProperty = (id, property) => {\r\n    const { mapStyle } = this.props;\r\n    if (mapStyle) {\r\n      const { layers } = mapStyle;\r\n      const layer = layers.find((layer) => layer.id === id);\r\n      return layer && layer.layout[property];\r\n    }\r\n  };\r\n\r\n  setLayoutProperty = (id, property, value) => {\r\n    const { mapStyle, onMapStyle } = this.props;\r\n    if (mapStyle) {\r\n      const updated = JSON.parse(JSON.stringify(mapStyle));\r\n      const { layers } = updated;\r\n      const ids = Array.isArray(id) ? id : [id];\r\n      layers.filter((layer) => ids.includes(layer.id)).forEach((layer) => (layer.layout[property] = value));\r\n      onMapStyle(updated);\r\n    }\r\n  };\r\n\r\n  updateLayoutProperties = () => {\r\n    const { mapStyle, onMapStyle, user, preference } = this.props;\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    if (mapStyle) {\r\n      const updated = JSON.parse(JSON.stringify(mapStyle));\r\n      const { layers } = updated;\r\n      [\r\n        {\r\n          id: [\"spaces\", \"spaces-border\", \"spaces-symbol\", \"spaces-polygon\", \"spaces-stroke\"],\r\n          property: \"visibility\",\r\n          value: this.isMarkers && preferences.markers ? \"visible\" : \"none\",\r\n        },\r\n        {\r\n          id: \"predictions\",\r\n          property: \"visibility\",\r\n          value: this.isPredictions && preferences.predictions ? \"visible\" : \"none\",\r\n        },\r\n      ].forEach(({ id, property, value }) => {\r\n        const ids = Array.isArray(id) ? id : [id];\r\n        layers.filter((layer) => ids.includes(layer.id)).forEach((layer) => (layer.layout[property] = value));\r\n      });\r\n      onMapStyle(updated);\r\n    }\r\n  };\r\n\r\n  updateUserPreferences = (key, value) => {\r\n    const { user } = this.props;\r\n    if (this.isLogin && user) {\r\n      const { preferences } = user;\r\n      const prev = cloneDeep(preferences);\r\n      const temp = cloneDeep(preferences);\r\n      temp[key] = value;\r\n      this.props.updateUser({ preferences: temp });\r\n      if (!isEqual(prev, temp)) {\r\n        this.props.onChange();\r\n      }\r\n    } else {\r\n      const { preference } = this.props;\r\n      const prev = cloneDeep(preference);\r\n      const temp = cloneDeep(preference);\r\n      temp[key] = value;\r\n      this.props.updatePreference(temp);\r\n      if (!isEqual(prev, temp)) {\r\n        this.props.onChange();\r\n      }\r\n    }\r\n  };\r\n\r\n  handleChange = (key) => (event, value) => {\r\n    switch (key) {\r\n      case \"markers\":\r\n        this.setState({ [key]: value });\r\n        this.setLayoutProperty(\r\n          [\"spaces\", \"spaces-border\", \"spaces-symbol\", \"spaces-heatmap\"],\r\n          \"visibility\",\r\n          value ? \"visible\" : \"none\"\r\n        );\r\n        this.updateUserPreferences(key, value);\r\n        break;\r\n      case \"predictions\":\r\n        this.setState({ [key]: value });\r\n        this.setLayoutProperty(\"predictions\", \"visibility\", value ? \"visible\" : \"none\");\r\n        this.updateUserPreferences(key, value);\r\n        break;\r\n      case \"availability\":\r\n      case \"requirement\":\r\n      case \"vehicle\":\r\n      case \"deferred\":\r\n        // console.log({ key, value: event.target.value });\r\n        // this.setState({ [key]: event.target.value });\r\n        this.updateUserPreferences(key, event.target.value);\r\n        break;\r\n      default:\r\n        this.setState({ [key]: value });\r\n    }\r\n  };\r\n\r\n  renderExtraSpaces() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !(user && user.scope && user.scope.includes(\"user\"));\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    return (\r\n      this.isMarkers && (\r\n        <FormControl className={classes.form} component=\"fieldset\">\r\n          <FormGroup aria-label=\"position\">\r\n            <div className={classes.formEntry}>\r\n              <FormControlLabel\r\n                value=\"markers\"\r\n                control={\r\n                  <Switch\r\n                    checked={preferences.markers}\r\n                    color=\"primary\"\r\n                    onChange={this.handleChange(\"markers\")}\r\n                    disabled={guest}\r\n                  />\r\n                }\r\n                label=\"Display Extra Spaces\"\r\n                labelPlacement=\"end\"\r\n              />\r\n              <Tooltip\r\n                title={`Display extra spaces that do not have real time occupancy ${\r\n                  this.isPredictions ? \"or prediction \" : \"\"\r\n                }information.`}\r\n              >\r\n                <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n              </Tooltip>\r\n            </div>\r\n          </FormGroup>\r\n        </FormControl>\r\n      )\r\n    );\r\n  }\r\n\r\n  renderPredictions() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !(user && user.scope && user.scope.includes(\"user\"));\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    return (\r\n      this.isPredictions && (\r\n        <FormControl className={classes.form} component=\"fieldset\">\r\n          <FormGroup aria-label=\"position\">\r\n            <div className={classes.formEntry}>\r\n              <FormControlLabel\r\n                value=\"predictions\"\r\n                control={\r\n                  <Switch\r\n                    checked={preferences.predictions}\r\n                    color=\"primary\"\r\n                    onChange={this.handleChange(\"predictions\")}\r\n                    disabled={guest}\r\n                  />\r\n                }\r\n                label=\"Display Predictions\"\r\n                labelPlacement=\"end\"\r\n              />\r\n              <Tooltip title=\"Length of time in the future to display predicted availability of spaces.\">\r\n                <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n              </Tooltip>\r\n            </div>\r\n            <div className={classes.formEntry}>\r\n              <Select\r\n                className={classes.selectAvailability}\r\n                color=\"primary\"\r\n                value={Boolean(preferences.availability) ? preferences.availability : 5}\r\n                onChange={this.handleChange(\"availability\")}\r\n                disabled={guest || (user && !user.preferences.predictions)}\r\n              >\r\n                <MenuItem value={5}>5 minutes</MenuItem>\r\n                <MenuItem value={15}>15 minutes</MenuItem>\r\n                <MenuItem value={30}>30 minutes</MenuItem>\r\n              </Select>\r\n            </div>\r\n          </FormGroup>\r\n        </FormControl>\r\n      )\r\n    );\r\n  }\r\n\r\n  renderDeferred() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !user?.scope?.includes(\"user\");\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    const m = moment().startOf(\"minutes\").get(\"minutes\");\r\n    const t = moment()\r\n      .startOf(\"minutes\")\r\n      .set(\"minutes\", Math.floor(m / 15) * 15);\r\n    const k = t.get(\"hours\") * 60 + t.get(\"minutes\");\r\n    return (\r\n      this.isDeferred && (\r\n        <FormControl className={classes.form} component=\"fieldset\">\r\n          <FormGroup aria-label=\"position\">\r\n            <div className={classes.formEntry}>\r\n              <AccessTimeIcon className={classes.timeIcon} color=\"primary\" />\r\n              <Typography className={classes.labelRequirement} variant=\"body1\">\r\n                Time Available\r\n              </Typography>\r\n              <Tooltip title=\"Specific time of the day to determine availability according to space type.\">\r\n                <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n              </Tooltip>\r\n            </div>\r\n            <div className={classes.formEntry}>\r\n              <Select\r\n                key={`deferred-select-${k}`}\r\n                className={classes.selectDeferred}\r\n                color=\"primary\"\r\n                value={!isUndefined(preferences.deferred) ? preferences.deferred : 0}\r\n                onChange={this.handleChange(\"deferred\")}\r\n                disabled={guest || (user && !user.preferences.deferred)}\r\n                renderValue={(v) =>\r\n                  t\r\n                    .clone()\r\n                    .add(v * 15, \"minutes\")\r\n                    .format(\"hh:mm a\")\r\n                }\r\n              >\r\n                {range(0, 10).map((v) => {\r\n                  return (\r\n                    <MenuItem key={`deferred-item-${k + v * 15}-${v}`} value={v}>\r\n                      {t\r\n                        .clone()\r\n                        .add(v * 15, \"minutes\")\r\n                        .format(\"hh:mm a\")}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </div>\r\n          </FormGroup>\r\n        </FormControl>\r\n      )\r\n    );\r\n  }\r\n\r\n  renderVehicleType() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !(user && user.scope && user.scope.includes(\"user\"));\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    return (\r\n      this.isVehicleType && (\r\n        <FormControl className={classes.form} component=\"fieldset\">\r\n          <FormGroup aria-label=\"position\">\r\n            <div className={classes.formEntry}>\r\n              <AirportShuttleIcon className={classes.truckIcon} color=\"primary\" />\r\n              <Typography className={classes.labelRequirement} variant=\"body1\">\r\n                Vehicle Type\r\n              </Typography>\r\n              <Tooltip title=\"Vehicle type to determine applicable spots for parking.\">\r\n                <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n              </Tooltip>\r\n            </div>\r\n            <div className={classes.formEntry}>\r\n              <Select\r\n                className={classes.selectRequirement}\r\n                color=\"primary\"\r\n                value={preferences.vehicle ? preferences.vehicle : vehicle.Passenger.label}\r\n                onChange={this.handleChange(\"vehicle\")}\r\n                disabled={guest}\r\n              >\r\n                {/* {vehicle.values().map((v) => (\r\n                  <MenuItem key={v.name} value={v.label}>\r\n                    {v.label}\r\n                  </MenuItem>\r\n                ))} */}\r\n                <MenuItem value={\"All\"}>All</MenuItem>\r\n                <MenuItem value={vehicle.Passenger.label}>Paid</MenuItem>\r\n                <MenuItem value={vehicle.Commercial.label}>{vehicle.Commercial.label}</MenuItem>\r\n                <MenuItem value={vehicle.Transport.label}>Bus</MenuItem>\r\n              </Select>\r\n            </div>\r\n          </FormGroup>\r\n        </FormControl>\r\n      )\r\n    );\r\n  }\r\n\r\n  renderVehicleLength() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !(user && user.scope && user.scope.includes(\"user\"));\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    return (\r\n      this.isVehicleLength && (\r\n        <FormControl className={classes.form} component=\"fieldset\">\r\n          <FormGroup aria-label=\"position\">\r\n            <div className={classes.formEntry}>\r\n              <AirportShuttleIcon className={classes.truckIcon} color=\"primary\" />\r\n              <Typography className={classes.labelRequirement} variant=\"body1\">\r\n                Vehicle Length\r\n              </Typography>\r\n              <Tooltip title=\"Vehicle length or minimum length of available space required for parking.\">\r\n                <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n              </Tooltip>\r\n            </div>\r\n            <div className={classes.formEntry}>\r\n              <Select\r\n                className={classes.selectRequirement}\r\n                color=\"primary\"\r\n                value={Boolean(preferences.requirement) ? preferences.requirement : 20}\r\n                onChange={this.handleChange(\"requirement\")}\r\n                disabled={guest}\r\n              >\r\n                <MenuItem value={20}>20 feet</MenuItem>\r\n                <MenuItem value={25}>25 feet</MenuItem>\r\n                <MenuItem value={30}>30 feet</MenuItem>\r\n                <MenuItem value={40}>40 feet</MenuItem>\r\n                <MenuItem value={50}>50 feet</MenuItem>\r\n                <MenuItem value={60}>60 feet</MenuItem>\r\n              </Select>\r\n            </div>\r\n          </FormGroup>\r\n        </FormControl>\r\n      )\r\n    );\r\n  }\r\n\r\n  renderLegend() {\r\n    const { classes, user, preference } = this.props;\r\n    const guest = this.isLogin && !(user && user.scope && user.scope.includes(\"user\"));\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    return (\r\n      <>\r\n        <div className={classes.formEntry}>\r\n          <ArrowUpwardIcon className={clsx(classes.avatar, classes.arrowUpward)} />\r\n          <Typography className={clsx(classes.avatar, classes.label, classes.labelAvailable)}>\r\n            {guest || !preferences.predictions ? \"Parking Available\" : \"Open parking highly likely\"}\r\n          </Typography>\r\n          <Tooltip\r\n            title={\r\n              guest || !preferences.predictions ? (\r\n                <span>\r\n                  <p>Gray: The space does not have real time status available.</p>\r\n                  <p>Green: There is currently enough space available to park.</p>\r\n                  <p>Yellow: There may be enough space available to park.</p>\r\n                  {/* <p>\r\n                    Yellow: The entire space is currently open, but there is not enough total space to park. There may\r\n                    be enough room to park if adjoining sections are open.\r\n                  </p> */}\r\n                  <p>Red: There is currently not enough space available to park.</p>\r\n                </span>\r\n              ) : (\r\n                <span>\r\n                  <p>Gray: The space does not have real time status available.</p>\r\n                  <p>Green: It is likely that enough space will be available to park.</p>\r\n                  <p>\r\n                    Yellow: It is likely that the entire space will be open, but there is not enough total space to\r\n                    park. There may be enough room to park if adjoining sections are open.\r\n                  </p>\r\n                  <p>Red: It is likely that there will not be enough space available to park.</p>\r\n                </span>\r\n              )\r\n            }\r\n          >\r\n            <InfoIcon className={classes.infoIcon} color=\"primary\" />\r\n          </Tooltip>\r\n        </div>\r\n        <div className={classes.formEntry}>\r\n          <RemoveIcon className={clsx(classes.avatar, classes.unknown)} />\r\n          <Typography className={clsx(classes.avatar, classes.label)}></Typography>\r\n        </div>\r\n        <div className={classes.formEntry}>\r\n          <ArrowDownwardIcon className={clsx(classes.avatar, classes.arrowDownward)} />\r\n          <Typography className={clsx(classes.avatar, classes.label)}>\r\n            {guest || !preferences.predictions ? \"Parking Unavailable\" : \"Open parking unlikely\"}\r\n          </Typography>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { expanded } = this.state;\r\n    return (\r\n      <div className={classes.root}>\r\n        <Card className={classes.card}>\r\n          <CardActions className={classes.actions}>\r\n            <Typography variant=\"body1\" className={classes.title}>\r\n              Dynacurb Parking App\r\n            </Typography>\r\n            <IconButton\r\n              className={clsx(classes.icons, classes.expand, {\r\n                [classes.expandOpen]: expanded,\r\n              })}\r\n              onClick={(action) => this.handleChange(\"expanded\")(action, !expanded)}\r\n              aria-expanded={expanded}\r\n              aria-label=\"show more\"\r\n            >\r\n              <ExpandMoreIcon />\r\n            </IconButton>\r\n          </CardActions>\r\n          <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n            <CardContent className={classes.content}>\r\n              {this.renderExtraSpaces()}\r\n              {this.renderPredictions()}\r\n              {this.renderDeferred()}\r\n              {this.renderVehicleType()}\r\n              {this.renderVehicleLength()}\r\n              {this.renderLegend()}\r\n            </CardContent>\r\n          </Collapse>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPrkControl.propTypes = {\r\n  mapStyle: PropTypes.object,\r\n  onMapStyle: PropTypes.func.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  preference: selectPreference(state),\r\n  user: selectUser(state),\r\n});\r\n\r\nconst mapActionToProps = {\r\n  fetchPreference,\r\n  updatePreference,\r\n  updateUser,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(withStyles(styles)(PrkControl));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  content: {\r\n    padding: \"0 24px 4px 24px\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress\r\n} from \"@material-ui/core\";\r\n\r\nclass PrkDialog extends React.Component {\r\n  static defaultProps = {\r\n    open: false\r\n  };\r\n\r\n  handleClick = button => () => {\r\n    if (button.onClick != null) {\r\n      button.onClick();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      classes,\r\n      title,\r\n      children,\r\n      buttons,\r\n      open,\r\n      busy,\r\n      fullScreen,\r\n      fullWidth\r\n    } = this.props;\r\n    return (\r\n      <Dialog\r\n        fullScreen={fullScreen ? true : false}\r\n        fullWidth={fullWidth ? true : false}\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n        <DialogContent className={classes.content}>{children}</DialogContent>\r\n        <DialogActions>\r\n          {busy ? <CircularProgress /> : null}\r\n          {buttons &&\r\n            buttons.map(button => (\r\n              <Button\r\n                key={button.label}\r\n                onClick={this.handleClick(button)}\r\n                variant={button.variant}\r\n                color=\"primary\"\r\n                disabled={button.disabled}\r\n              >\r\n                {button.label}\r\n              </Button>\r\n            ))}\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nPrkDialog.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  children: PropTypes.element.isRequired,\r\n  buttons: PropTypes.arrayOf(PropTypes.object.isRequired),\r\n  open: PropTypes.bool.isRequired,\r\n  fullScreen: PropTypes.bool,\r\n  fullWidth: PropTypes.bool\r\n};\r\n\r\nexport default withStyles(styles)(PrkDialog);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  root: {\r\n    height: \"0px\",\r\n    bottom: 0,\r\n    top: \"auto\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { AppBar, Snackbar, IconButton } from \"@material-ui/core\";\r\nimport { Close as CloseIcon } from \"@material-ui/icons\";\r\nimport { error } from \"constants/palette\";\r\nimport { clearError, selectErrorTokens } from \"controllers/error/action\";\r\n\r\nclass PrkFooter extends React.Component {\r\n  handleClear = key => () => {\r\n    this.props.clearError(key);\r\n  };\r\n\r\n  render() {\r\n    const { classes, errors } = this.props;\r\n    const key =\r\n      errors &&\r\n      Object.keys(errors)\r\n        .filter(k => !errors[k].cleared)\r\n        .sort((a, b) => errors[a].timestamp - errors[b].timestamp)\r\n        .find(() => true);\r\n    const token = errors && key && errors[key];\r\n    return (\r\n      <React.Fragment>\r\n        <AppBar position=\"fixed\" color=\"primary\" className={classes.root} />\r\n        <Snackbar\r\n          anchorOrigin={{\r\n            vertical: \"bottom\",\r\n            horizontal: \"center\"\r\n          }}\r\n          ContentProps={{ style: { background: error } }}\r\n          open={token !== null && token !== undefined}\r\n          autoHideDuration={Math.min(\r\n            Math.max(\r\n              (token && token.error ? token.error.length : 0) * 100,\r\n              5000\r\n            ),\r\n            15000\r\n          )}\r\n          onClose={this.handleClear(key)}\r\n          message={token && token.error}\r\n          action={\r\n            <React.Fragment>\r\n              <IconButton\r\n                size=\"small\"\r\n                aria-label=\"clear\"\r\n                color=\"inherit\"\r\n                onClick={this.handleClear(key)}\r\n              >\r\n                <CloseIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </React.Fragment>\r\n          }\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  errors: selectErrorTokens(state)\r\n});\r\n\r\nconst mapActionToProps = {\r\n  clearError\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapActionToProps\r\n)(withStyles(styles)(PrkFooter));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  root: {\r\n    display: \"-webkit-inline-box\",\r\n    textAlign: \"right\",\r\n    margin: \"1em\",\r\n    position: \"absolute\",\r\n    right: \"0px\",\r\n    zIndex: 1000\r\n  },\r\n  space: { paddingRight: \".5em\" },\r\n  icon: { paddingTop: \".1em\" },\r\n  title: { paddingTop: \".1em\", paddingLeft: \".1em\", paddingRight: \".5em\" },\r\n  button: {}\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { Paper, Typography, Button } from \"@material-ui/core\";\r\nimport { AccountCircle as AccountCircleIcon } from \"@material-ui/icons\";\r\nimport { logoutUser, selectUser } from \"controllers/user/action\";\r\n\r\nclass PrkHeader extends React.Component {\r\n  findUsername = () => {\r\n    const { user } = this.props;\r\n    if (!user) {\r\n      return \"Unknown\";\r\n    } else if (user.scope === \"\") {\r\n      return \"\";\r\n    } else {\r\n      return user.email;\r\n    }\r\n  };\r\n\r\n  findButtonText = () => {\r\n    const { user } = this.props;\r\n    if (!user) {\r\n      return \"Sign In\";\r\n    } else if (user.scope === \"\") {\r\n      return \"Sign in for Predictions\";\r\n    } else {\r\n      return \"Log Out\";\r\n    }\r\n  };\r\n\r\n  handleLogout = () => {\r\n    this.props.logoutUser();\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <Paper className={classes.root}>\r\n        <div className={classes.space} />\r\n        <AccountCircleIcon className={classes.icon} />\r\n        <Typography variant=\"body1\" className={classes.title}>\r\n          {this.findUsername()}\r\n        </Typography>\r\n        <Button\r\n          variant=\"text\"\r\n          size=\"small\"\r\n          className={classes.button}\r\n          onClick={this.handleLogout}\r\n        >\r\n          {this.findButtonText()}\r\n        </Button>\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  user: selectUser(state)\r\n});\r\n\r\nconst mapActionToProps = {\r\n  logoutUser\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapActionToProps\r\n)(withStyles(styles)(PrkHeader));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = (theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n  },\r\n  view: {\r\n    overflow: \"hidden\",\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n});\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { withTheme } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport clsx from \"clsx\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { PrkBusy, PrkFooter, PrkHeader } from \"..\";\r\nimport { getDocumentHeight, isTrue } from \"../../utils/utils\";\r\nimport styles from \"./styles\";\r\n\r\nclass PrkLayout extends React.Component {\r\n  state = { error: null, info: null };\r\n\r\n  isLogin = isTrue(process.env.REACT_APP_LOGIN);\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", this.updatePageSize);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updatePageSize);\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    this.setState({ error: error, info: info });\r\n  }\r\n\r\n  updatePageSize = () => {\r\n    this.forceUpdate();\r\n  };\r\n\r\n  render() {\r\n    const { classes, page, theme } = this.props;\r\n    const { error } = this.state;\r\n    if (error) {\r\n      return <Redirect push to={`/error?message=${error.message}`} />;\r\n    }\r\n    const height = getDocumentHeight() - theme.mixins.toolbar.minHeight - 1;\r\n    return (\r\n      <div className={classes.root}>\r\n        {this.isLogin && <PrkHeader page={page} />}\r\n        {/* {name !== \"Error\" && <PrkNavigation page={page} />} */}\r\n        <div className={classes.content}>\r\n          <div className={classes.toolbar} />\r\n          <div className={clsx(classes.view)} style={{ height: height }}>\r\n            {this.props.children}\r\n          </div>\r\n        </div>\r\n        <PrkFooter />\r\n        <PrkBusy />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPrkLayout.propTypes = {\r\n  page: PropTypes.object.isRequired,\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({});\r\n\r\nconst mapActionToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(withTheme(withStyles(styles)(PrkLayout)));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  form: {},\r\n  padding: {\r\n    marginTop: \"1em\"\r\n  },\r\n  text: {\r\n    marginTop: \".5em\",\r\n    width: \"100%\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { TextField, Grid, Tabs, Tab } from \"@material-ui/core\";\r\nimport { PrkDialog, PrkTheme, PrkFooter } from \"components\";\r\nimport {\r\n  continueUser,\r\n  loginUser,\r\n  selectLoginUser\r\n} from \"controllers/user/action\";\r\nimport { createUser, selectCreateUser } from \"controllers/users/action\";\r\n\r\nclass PrkLogin extends React.Component {\r\n  state = {\r\n    tab: 0,\r\n    email: \"\",\r\n    password: \"\",\r\n    confirm: \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { continueUser } = this.props;\r\n    continueUser();\r\n  }\r\n\r\n  validate = () => {\r\n    const { email, password, confirm, tab } = this.state;\r\n    switch (tab) {\r\n      case 0:\r\n        return email && password;\r\n      case 1:\r\n        return email && password && password === confirm;\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  handleLogin = () => {\r\n    if (this.validate()) {\r\n      const { email, password } = this.state;\r\n      this.props.loginUser({\r\n        email: email,\r\n        password: password\r\n      });\r\n      this.setState({\r\n        password: \"\",\r\n        confirm: \"\"\r\n      });\r\n    }\r\n  };\r\n\r\n  handleCreate = () => {\r\n    if (this.validate()) {\r\n      const { email, password } = this.state;\r\n      this.props.createUser({\r\n        email: email,\r\n        password: password\r\n      });\r\n      this.setState({\r\n        tab: 0,\r\n        password: \"\",\r\n        confirm: \"\"\r\n      });\r\n    }\r\n  };\r\n\r\n  handleGuest = () => {\r\n    this.props.loginUser({\r\n      email: \"guest.parking@pnnl.gov\",\r\n      password: \"guest\"\r\n    });\r\n    this.setState({\r\n      password: \"\",\r\n      confirm: \"\"\r\n    });\r\n  };\r\n\r\n  handleChange = key => (event, value) => {\r\n    this.setState({\r\n      [key]: event.target && event.target.value ? event.target.value : value\r\n    });\r\n  };\r\n\r\n  handleRef = ref => {\r\n    this.dialog = ref;\r\n  };\r\n\r\n  buttons = () => {\r\n    const { tab } = this.state;\r\n    switch (tab) {\r\n      case 0:\r\n        return [\r\n          {\r\n            label: \"Sign In\",\r\n            disabled: !this.validate(),\r\n            variant: \"contained\",\r\n            onClick: this.handleLogin\r\n          },\r\n          {\r\n            label: \"Continue as Guest\",\r\n            disabled: false,\r\n            variant: \"text\",\r\n            onClick: this.handleGuest\r\n          }\r\n        ];\r\n      case 1:\r\n        return [\r\n          {\r\n            label: \"Submit\",\r\n            disabled: !this.validate(),\r\n            variant: \"contained\",\r\n            onClick: this.handleCreate\r\n          }\r\n        ];\r\n      default:\r\n        return [];\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { classes, auth } = this.props;\r\n    const { email, password, confirm, tab } = this.state;\r\n    if (auth) {\r\n      return null;\r\n    }\r\n    return (\r\n      <PrkTheme>\r\n        <PrkDialog\r\n          fullScreen={false}\r\n          fullWidth={true}\r\n          open={!auth}\r\n          title={\"\"}\r\n          buttons={this.buttons()}\r\n        >\r\n          <form className={classes.form} noValidate autoComplete=\"off\">\r\n            <Grid container spacing={0}>\r\n              <Grid item xs={12}>\r\n                <Tabs value={tab} onChange={this.handleChange(\"tab\")}>\r\n                  <Tab label=\"Sign In\" value={0} />\r\n                  <Tab label=\"New Account\" value={1} />\r\n                </Tabs>\r\n              </Grid>\r\n              <Grid item xs={12} className={classes.padding} />\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  id=\"email\"\r\n                  label=\"Login Email\"\r\n                  className={classes.text}\r\n                  value={email}\r\n                  onChange={this.handleChange(\"email\")}\r\n                  margin=\"none\"\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  id=\"password\"\r\n                  label=\"Password\"\r\n                  className={classes.text}\r\n                  value={password}\r\n                  onChange={this.handleChange(\"password\")}\r\n                  type=\"password\"\r\n                  margin=\"none\"\r\n                />\r\n              </Grid>\r\n              {tab === 1 && (\r\n                <Grid item xs={12}>\r\n                  <TextField\r\n                    id=\"confirm\"\r\n                    label=\"Confirm Password\"\r\n                    className={classes.text}\r\n                    value={confirm}\r\n                    onChange={this.handleChange(\"confirm\")}\r\n                    type=\"password\"\r\n                    margin=\"none\"\r\n                  />\r\n                </Grid>\r\n              )}\r\n              <Grid item xs={12} className={classes.padding} />\r\n            </Grid>\r\n          </form>\r\n        </PrkDialog>\r\n        <PrkFooter />\r\n      </PrkTheme>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  auth: selectLoginUser(state),\r\n  created: selectCreateUser(state)\r\n});\r\n\r\nconst mapActionToProps = {\r\n  continueUser,\r\n  loginUser,\r\n  createUser\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapActionToProps\r\n)(withStyles(styles)(PrkLogin));\r\n","import ReactGA from \"react-ga4\";\r\nimport { isEmpty } from \"lodash\";\r\n\r\nexport class Analytics {\r\n  static instance;\r\n\r\n  /**\r\n   * Singleton getter method.\r\n   *\r\n   * @returns the single instance\r\n   */\r\n  static getInstance() {\r\n    if (!Analytics.instance) {\r\n      Analytics.instance = new Analytics();\r\n    }\r\n    return Analytics.instance;\r\n  }\r\n\r\n  _initialized;\r\n\r\n  constructor() {\r\n    this._initialized = false;\r\n    this.initialize();\r\n  }\r\n\r\n  initialize = () => {\r\n    if (!this._initialized && !isEmpty(process.env.REACT_APP_GA_CLIENT_ID)) {\r\n      ReactGA.initialize(process.env.REACT_APP_GA_CLIENT_ID);\r\n      this._initialized = true;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Called for a page view.\r\n   *\r\n   * @param path\r\n   * @param query\r\n   */\r\n  pageview = (path, query = \"\") => {\r\n    if (this._initialized) {\r\n      ReactGA.send({ hitType: \"pageview\", page: `${path}${query}`, title: \"Page View\" });\r\n    } else {\r\n      console.log(`Analytics Debug Page View: ${path}${query}`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Called for explicit user actions.\r\n   *\r\n   * @param category\r\n   * @param action\r\n   * @param label\r\n   */\r\n  event = (category, action, label = \"\") => {\r\n    if (this._initialized) {\r\n      ReactGA.event({ category, action, label });\r\n    } else {\r\n      console.log(`Analytics Debug Event: ${category} -> ${action}${label ? \" (\" + label + \")\" : \"\"}`);\r\n    }\r\n  };\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport { PrkLogin, PrkNotice } from \"../components\";\r\n\r\nimport { Analytics } from \"../utils/analytics\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { isTrue } from \"../utils/utils\";\r\nimport { selectNotice } from \"../controllers/common/action\";\r\nimport { selectUser } from \"../controllers/user/action\";\r\n\r\nclass Root extends React.Component {\r\n  isNotice = isTrue(process.env.REACT_APP_NOTICE);\r\n\r\n  isLogin = isTrue(process.env.REACT_APP_LOGIN);\r\n\r\n  componentDidMount() {\r\n    const { page } = this.props;\r\n    Analytics.getInstance().pageview(page?.path ?? \"/unknown\");\r\n  }\r\n\r\n  render() {\r\n    const { notice, user, page, renderRoute } = this.props;\r\n    if (this.isNotice && !notice) {\r\n      return <PrkNotice />;\r\n    } else if (this.isLogin && page.user && !user) {\r\n      return <PrkLogin />;\r\n    } else {\r\n      return renderRoute(this.props);\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  notice: selectNotice(state),\r\n  user: selectUser(state),\r\n});\r\n\r\nconst mapActionToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(Root);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  verifiedTint,\r\n  errorTint,\r\n  infoTint,\r\n  warningTint\r\n} from \"constants/palette\";\r\n\r\nconst styles = {\r\n  success: {\r\n    backgroundColor: verifiedTint\r\n  },\r\n  error: {\r\n    backgroundColor: errorTint\r\n  },\r\n  info: {\r\n    backgroundColor: infoTint\r\n  },\r\n  warning: {\r\n    backgroundColor: warningTint\r\n  },\r\n  icon: {\r\n    fontSize: 20\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: \"1em\"\r\n  },\r\n  message: {\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    textAlign: \"left\"\r\n  },\r\n  snackbar: {\r\n    display: \"inline-block\"\r\n  },\r\n  center: {\r\n    textAlign: \"center\",\r\n    height: \"100%\"\r\n  },\r\n  pad: {\r\n    padding: 80\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { SnackbarContent } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  CheckCircle as CheckCircleIcon,\r\n  Error as ErrorIcon,\r\n  Info as InfoIcon,\r\n  Warning as WarningIcon,\r\n} from \"@material-ui/icons\";\r\nimport clsx from \"clsx\";\r\nimport _ from \"lodash\";\r\nimport PropTypes from \"prop-types\";\r\nimport queryString from \"query-string\";\r\nimport React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport styles from \"./styles\";\r\n\r\nconst icons = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nclass Error extends React.Component {\r\n  state = {\r\n    message: \"\",\r\n  };\r\n\r\n  static defaultProps = {\r\n    variant: \"error\",\r\n    label: \"Parking has encountered an error.\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { location } = this.props;\r\n    const query = queryString.parse(location.search);\r\n    if (!_.isEmpty(query.message)) {\r\n      this.setState({ message: query.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { variant, label, classes } = this.props;\r\n    const { message } = this.state;\r\n    const Icon = icons[variant];\r\n    return (\r\n      <div className={clsx(classes.center, classes.pad)}>\r\n        <SnackbarContent\r\n          className={clsx(classes[variant], classes.snackbar)}\r\n          aria-describedby=\"client-snackbar\"\r\n          message={\r\n            <span id=\"client-snackbar\" className={classes.message}>\r\n              <Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n              {label}\r\n              <br />\r\n              {message}\r\n            </span>\r\n          }\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nError.propTypes = {\r\n  variant: PropTypes.oneOf([\"success\", \"warning\", \"error\", \"info\"]),\r\n};\r\n\r\nexport default withRouter(withStyles(styles)(Error));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { Error as ErrorIcon } from \"@material-ui/icons\";\r\nimport Element from \"./index\";\r\n\r\nconst route = {\r\n  sequence: 100,\r\n  name: \"Error\",\r\n  label: \"Error\",\r\n  path: \"/error\",\r\n  hidden: true,\r\n  element: Element,\r\n  icon: ErrorIcon,\r\n};\r\n\r\nexport default route;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { PrkLayout } from \"../../components\";\r\nimport RouteBase from \"../RouteBase\";\r\nimport Error from \"./Error\";\r\n\r\nconst Root = (props) => (\r\n  <RouteBase\r\n    {...props}\r\n    renderRoute={(p) => (\r\n      <PrkLayout {...p}>\r\n        <Error {...p} />\r\n      </PrkLayout>\r\n    )}\r\n  />\r\n);\r\n\r\nexport default Root;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  verifiedTint,\r\n  errorTint,\r\n  infoTint,\r\n  warningTint\r\n} from \"constants/palette\";\r\n\r\nconst styles = {\r\n  success: {\r\n    backgroundColor: verifiedTint\r\n  },\r\n  error: {\r\n    backgroundColor: errorTint\r\n  },\r\n  info: {\r\n    backgroundColor: infoTint\r\n  },\r\n  warning: {\r\n    backgroundColor: warningTint\r\n  },\r\n  icon: {\r\n    fontSize: 20\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: \"1em\"\r\n  },\r\n  message: {\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    textAlign: \"left\"\r\n  },\r\n  snackbar: {\r\n    display: \"inline-block\"\r\n  },\r\n  center: {\r\n    textAlign: \"center\",\r\n    height: \"100%\"\r\n  },\r\n  pad: {\r\n    padding: 80\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { SnackbarContent } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  CheckCircle as CheckCircleIcon,\r\n  Error as ErrorIcon,\r\n  Info as InfoIcon,\r\n  Warning as WarningIcon,\r\n} from \"@material-ui/icons\";\r\nimport clsx from \"clsx\";\r\nimport _ from \"lodash\";\r\nimport PropTypes from \"prop-types\";\r\nimport queryString from \"query-string\";\r\nimport React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport styles from \"./styles\";\r\n\r\nconst icons = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nclass NotFound extends React.Component {\r\n  state = {\r\n    message: \"Uh oh, the page you requested could not be found.\",\r\n  };\r\n\r\n  static defaultProps = {\r\n    variant: \"info\",\r\n    label: \"Parking page not found.\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { location } = this.props;\r\n    const query = queryString.parse(location.search);\r\n    if (!_.isEmpty(query.message)) {\r\n      this.setState({ message: query.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { variant, label, classes } = this.props;\r\n    const { message } = this.state;\r\n    const Icon = icons[variant];\r\n    return (\r\n      <div className={clsx(classes.center, classes.pad)}>\r\n        <SnackbarContent\r\n          className={clsx(classes[variant], classes.snackbar)}\r\n          aria-describedby=\"client-snackbar\"\r\n          message={\r\n            <span id=\"client-snackbar\" className={classes.message}>\r\n              <Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n              {label}\r\n              <br />\r\n              {message}\r\n            </span>\r\n          }\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nNotFound.propTypes = {\r\n  variant: PropTypes.oneOf([\"success\", \"warning\", \"error\", \"info\"]),\r\n};\r\n\r\nexport default withRouter(withStyles(styles)(NotFound));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { Error as ErrorIcon } from \"@material-ui/icons\";\r\nimport Element from \"./index\";\r\n\r\nconst route = {\r\n  sequence: 1000,\r\n  name: \"NotFound\",\r\n  label: \"Not Found\",\r\n  path: \"*\",\r\n  hidden: true,\r\n  element: Element,\r\n  icon: ErrorIcon,\r\n};\r\n\r\nexport default route;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { PrkLayout } from \"../../components\";\r\nimport RouteBase from \"../RouteBase\";\r\nimport NotFound from \"./NotFound\";\r\n\r\nconst Root = (props) => (\r\n  <RouteBase\r\n    {...props}\r\n    renderRoute={(p) => (\r\n      <PrkLayout {...p}>\r\n        <NotFound {...p} />\r\n      </PrkLayout>\r\n    )}\r\n  />\r\n);\r\n\r\nexport default Root;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { available, unknown, unavailable, warning, darkest } from \"constants/palette\";\r\n\r\nconst styles = {\r\n  popup: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      borderRadius: \"10px\",\r\n    },\r\n  },\r\n  available: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      border: `3px solid ${available}`,\r\n    },\r\n  },\r\n  unknown: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      border: `3px solid ${unknown}`,\r\n    },\r\n  },\r\n  spaces: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      border: `3px solid ${darkest}`,\r\n    },\r\n  },\r\n  occupied: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      border: `3px solid ${unavailable}`,\r\n    },\r\n  },\r\n  indeterminate: {\r\n    \"& div.mapboxgl-popup-content\": {\r\n      border: `3px solid ${warning}`,\r\n    },\r\n  },\r\n  popupHeader: {\r\n    display: \"flex\",\r\n  },\r\n  popupSpacer: {\r\n    flex: \"1 0 auto\",\r\n  },\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\n\r\nimport { Grid, IconButton, Typography } from \"@material-ui/core\";\r\nimport ReactMapGL, { GeolocateControl, Popup, ScaleControl } from \"react-map-gl\";\r\nimport { capitalize, debounce, get, isArray, isEqual, isNumber, isString } from \"lodash\";\r\nimport { fetchMapStyle, selectMapStyle } from \"controllers/map/action\";\r\nimport { fetchPreference, selectPreference, updatePreference } from \"../../controllers/preference/action\";\r\nimport { selectLoginUser, selectUser } from \"controllers/user/action\";\r\n\r\nimport { Close as CloseIcon } from \"@material-ui/icons\";\r\nimport { PrkControl } from \"components\";\r\nimport React from \"react\";\r\nimport { vehicle as VehicleType } from \"parking-common\";\r\nimport clsx from \"clsx\";\r\nimport { connect } from \"react-redux\";\r\nimport { isTrue } from \"../../utils/utils\";\r\nimport moment from \"moment\";\r\nimport styles from \"./styles\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nclass PrkMap extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.map = React.createRef();\r\n    this.state = {\r\n      width: 0,\r\n      height: 0,\r\n      viewport: {\r\n        latitude: 47.61344885026525,\r\n        longitude: -122.34430506224587,\r\n        zoom: 15.0,\r\n        bearing: 0,\r\n        pitch: 0,\r\n      },\r\n      mapStyle: props.mapStyle,\r\n    };\r\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\r\n    this.querySourceData = this.querySourceData.bind(this);\r\n    this.querySourceDataDebounced = debounce(this.querySourceData, 500);\r\n  }\r\n\r\n  isLogin = isTrue(process.env.REACT_APP_LOGIN);\r\n  isAuthenticate = isTrue(process.env.REACT_APP_AUTHENTICATE);\r\n  isPredictions = isTrue(process.env.REACT_APP_PREDICTIONS);\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (!state.mapStyle && props.mapStyle) {\r\n      return { mapStyle: props.mapStyle };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { fetchMapStyle } = this.props;\r\n    this.props.fetchPreference();\r\n    fetchMapStyle();\r\n    this.updateWindowDimensions();\r\n    window.addEventListener(\"resize\", this.updateWindowDimensions);\r\n    const intid = window.setInterval(this.querySourceDataDebounced, parseInt(process.env.REACT_APP_POLLING));\r\n    this.setState({ intid });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { intid } = this.state;\r\n    window.clearInterval(intid);\r\n    window.removeEventListener(\"resize\", this.updateWindowDimensions);\r\n  }\r\n\r\n  updateWindowDimensions() {\r\n    this.setState({ width: window.innerWidth, height: window.innerHeight });\r\n  }\r\n\r\n  templateFormat = (template, props) => {\r\n    return template.replace(/{([^{}]+)}/g, (v, k) => get(props, k, `{${k}}`));\r\n  };\r\n\r\n  querySourceData() {\r\n    if (this.map && this.map.current) {\r\n      const { viewport } = this.state;\r\n      const { user, preference } = this.props;\r\n      const { longitude, latitude, zoom } = viewport;\r\n      const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n      const predict = this.isPredictions && get(preferences, \"predictions\", false);\r\n      const m = this.map.current.getMap();\r\n      if (m && m.getStyle) {\r\n        const bounds = m.getBounds();\r\n        const availability = get(preferences, \"availability\", 5);\r\n        const requirement = get(preferences, \"requirement\", 20);\r\n        const vehicle = get(preferences, \"vehicle\", VehicleType.Passenger.label);\r\n        const deferred = get(preferences, \"deferred\", 8);\r\n        const uuid = moment().valueOf();\r\n        const params = {\r\n          x: longitude,\r\n          y: latitude,\r\n          z: zoom,\r\n          n: bounds._ne.lat,\r\n          e: bounds._ne.lng,\r\n          s: bounds._sw.lat,\r\n          w: bounds._sw.lng,\r\n          r: requirement,\r\n          a: availability,\r\n          v: vehicle,\r\n          d: deferred,\r\n          latitude,\r\n          longitude,\r\n          zoom,\r\n          bounds: [bounds._sw.lng, bounds._sw.lat, bounds._ne.lng, bounds._ne.lat],\r\n          requirement,\r\n          availability,\r\n          vehicle,\r\n          deferred,\r\n          uuid\r\n        };\r\n        [\"occupancies\", \"spaces\", \"clustered\"].forEach((s) => {\r\n          const source = m.getSource(s);\r\n          let url = source._options.data;\r\n          url = this.templateFormat(url, params);\r\n          if (s === \"occupancies\") {\r\n            if (predict) {\r\n              url = url.replace(\"occupancies\", \"predictions\");\r\n            }\r\n          }\r\n          source.setData(url);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  transformRequest = (url, resourceType) => {\r\n    const { auth } = this.props;\r\n    switch (resourceType) {\r\n      case \"Source\":\r\n      case \"Style\":\r\n      case \"Tile\":\r\n      case \"Glyphs\":\r\n        return {\r\n          url: url,\r\n          redirect: \"manual\",\r\n          ...(this.isAuthenticate\r\n            ? {\r\n                credentials: \"include\",\r\n                headers: {\r\n                  Authorization: `Token ${auth}`,\r\n                  \"Cache-Control\": \"no-store\",\r\n                },\r\n              }\r\n            : {\r\n                headers: {\r\n                  \"Cache-Control\": \"no-store\",\r\n                },\r\n              }),\r\n        };\r\n      default:\r\n        return {\r\n          url: url,\r\n        };\r\n    }\r\n  };\r\n\r\n  handleChange = (key) => (value) => {\r\n    const { viewport } = this.state;\r\n    switch (key) {\r\n      case \"viewport\":\r\n        if (value.zoom !== undefined) {\r\n          let zoom = value.zoom;\r\n          zoom = Math.min(16.5, zoom);\r\n          zoom = Math.max(5.5, zoom);\r\n          if (zoom !== value.zoom && zoom === viewport.zoom && [16.5, 5.5].includes(zoom)) {\r\n            value.latitude = viewport.latitude;\r\n            value.longitude = viewport.longitude;\r\n          }\r\n          value.zoom = zoom;\r\n        }\r\n        this.setState({ [key]: value }, this.querySourceDataDebounced());\r\n        break;\r\n      default:\r\n      // no need to handle all cases\r\n    }\r\n    this.setState({ [key]: value });\r\n  };\r\n\r\n  handleLoad = (event) => {\r\n    console.log(\"Map-GL finished initial loading.\");\r\n    this.querySourceDataDebounced();\r\n  };\r\n\r\n  handleViewStateChange = () => {\r\n    // hide the popup\r\n    this.setState({ popupInfo: null });\r\n  };\r\n\r\n  handleError = (event) => {\r\n    console.error(event);\r\n  };\r\n\r\n  handleMapStyle = (event) => {\r\n    this.querySourceDataDebounced();\r\n  };\r\n\r\n  handleClick = (event) => {\r\n    this.handleMouseDown(event);\r\n  };\r\n\r\n  handleMouseMove = (event) => {\r\n    this.handleMouseDown(event);\r\n  };\r\n\r\n  handleMouseDown = (event) => {\r\n    const map = this.map.current && this.map.current.getMap();\r\n    if (map) {\r\n      const features = map.queryRenderedFeatures([event.center.x, event.center.y], {\r\n        // filtering on layers isn't working for some reason\r\n        // layers: [\"spaces\", \"occupied\", \"available\"]\r\n      });\r\n      if (features.length > 0) {\r\n        const feature = features[0];\r\n        const layer = feature.layer.id && feature.layer.id.split(\"-\")[0];\r\n        switch (layer) {\r\n          case \"spaces\":\r\n          case \"indeterminate\":\r\n          case \"available\":\r\n          case \"unknown\":\r\n          case \"occupied\":\r\n            const popupInfo = {\r\n              longitude: event.lngLat[0],\r\n              latitude: event.lngLat[1],\r\n              layer: layer,\r\n              properties: feature.properties,\r\n            };\r\n            Object.keys(popupInfo.properties).forEach(\r\n              (key) =>\r\n                (popupInfo.properties[key] =\r\n                  popupInfo.properties[key] === \"null\"\r\n                    ? null\r\n                    : typeof popupInfo.properties[key] === \"string\"\r\n                    ? popupInfo.properties[key].replace(\"_\", \" \")\r\n                    : popupInfo.properties[key])\r\n            );\r\n            this.setState({ popupInfo });\r\n            break;\r\n          default:\r\n        }\r\n      } else {\r\n        this.setState({ popupInfo: null });\r\n      }\r\n    }\r\n  };\r\n\r\n  isAuthenticated = () => {\r\n    const { auth } = this.props;\r\n    const { mapStyle } = this.state;\r\n    return (this.isAuthenticate ? auth : true) && mapStyle;\r\n  };\r\n\r\n  renderPopup() {\r\n    const { classes, user, preference } = this.props;\r\n    const preferences = (this.isLogin && user ? user.preferences : preference) || {};\r\n    const predict = get(preferences, \"predictions\", false);\r\n    const availability = get(preferences, \"availability\", 5);\r\n    const { popupInfo } = this.state;\r\n    const {\r\n      state,\r\n      sensors,\r\n      precise,\r\n      current,\r\n      available,\r\n      required,\r\n      shapeLength,\r\n      occupancies,\r\n      occupancy,\r\n      predictions,\r\n      prediction,\r\n      blockId,\r\n      blockfaceId,\r\n      cvlzId,\r\n      spaceType,\r\n      spaceTyped,\r\n    } = popupInfo ? popupInfo.properties : {};\r\n    let total = 0;\r\n    if (isArray(sensors)) {\r\n      total = sensors.length;\r\n    } else if (isNumber(sensors)) {\r\n      total = sensors;\r\n    } else if (isString(sensors)) {\r\n      total = JSON.parse(sensors).length;\r\n    }\r\n    const open = occupancies ? total - occupancy : 0;\r\n    const segment = shapeLength / Math.max(1, total);\r\n    const min = open < total ? segment * Math.ceil(open / 2) : segment * open;\r\n    const max = segment * open;\r\n    const extra = { min: min, max: max };\r\n    if (occupancies && predictions && predict) {\r\n      if (isNumber(prediction)) {\r\n        const po = total - prediction;\r\n        const pmin = po < total ? segment * Math.ceil(po / 2) : segment * po;\r\n        const pmax = segment * po;\r\n        extra.min = pmin;\r\n        extra.max = pmax;\r\n      } else {\r\n        extra.unavailable = true;\r\n      }\r\n    }\r\n    return (\r\n      popupInfo && (\r\n        <Popup\r\n          className={clsx(classes.popup, classes[popupInfo.layer])}\r\n          tipSize={5}\r\n          anchor=\"top\"\r\n          longitude={popupInfo.longitude}\r\n          latitude={popupInfo.latitude}\r\n          closeButton={false}\r\n        >\r\n          <div className={classes.popupHeader}>\r\n            <div className={classes.popupSpacer} />\r\n            <IconButton\r\n              size=\"small\"\r\n              aria-label=\"clear\"\r\n              color=\"inherit\"\r\n              onClick={() => this.setState({ popupInfo: null })}\r\n            >\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </div>\r\n          {process.env.NODE_ENV === \"development\" && (\r\n            <React.Fragment>\r\n              <Typography variant=\"caption\">{`${capitalize(blockId)} - ${blockfaceId} - ${cvlzId}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`${open} out of ${total} open`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`current: ${current}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`available: ${available}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`prediction: ${prediction}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`required: ${required}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`shapeLength: ${shapeLength}`}</Typography>\r\n              <br />\r\n              <Typography variant=\"caption\">{`state (occupied): ${state}`}</Typography>\r\n              <br />\r\n            </React.Fragment>\r\n          )}\r\n          <Typography>{`${spaceType}: ${spaceTyped}`}</Typography>\r\n          <Typography>{`${Math.round(shapeLength)} ft total length`}</Typography>\r\n          {!occupancies ? (\r\n            <Typography>No occupancy data available</Typography>\r\n          ) : precise ? (\r\n            <Typography>{`${Math.round(current)} ft available now`}</Typography>\r\n          ) : isEqual(min, max) ? (\r\n            <Typography>{`${Math.round(min)} ft available now`}</Typography>\r\n          ) : (\r\n            <Typography>{`${Math.round(min)} to ${Math.round(max)} ft available now`}</Typography>\r\n          )}\r\n          {predict ? (\r\n            !predictions || extra.unavailable ? (\r\n              <Typography>No prediction data available</Typography>\r\n            ) : precise ? (\r\n              <Typography>{`${Math.round(available)} ft available within ${availability} minutes`}</Typography>\r\n            ) : isEqual(extra.min, extra.max) ? (\r\n              <Typography>{`${Math.round(extra.min)} ft available within ${availability} minutes`}</Typography>\r\n            ) : (\r\n              <Typography>{`${Math.round(extra.min)} to ${Math.round(\r\n                extra.max\r\n              )} ft available within ${availability} minutes`}</Typography>\r\n            )\r\n          ) : null}\r\n        </Popup>\r\n      )\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { mapStyle, viewport, width, height } = this.state;\r\n    return (\r\n      <Grid container alignContent=\"center\" justifyContent=\"center\" spacing={0}>\r\n        <Grid item xs={12}>\r\n          {this.isAuthenticated() && (\r\n            <ReactMapGL\r\n              ref={this.map}\r\n              {...viewport}\r\n              width={width}\r\n              height={height}\r\n              mapStyle={mapStyle}\r\n              onViewportChange={this.handleChange(\"viewport\")}\r\n              onViewStateChange={this.handleViewStateChange}\r\n              onLoad={this.handleLoad}\r\n              onError={this.handleError}\r\n              onMapStyle={this.handleMapStyle}\r\n              // onMouseMove={this.handleMouseMove}\r\n              onMouseDown={this.handleMouseDown}\r\n              onClick={this.handleClick}\r\n              transformRequest={this.transformRequest}\r\n              // transitionDuration={1000}\r\n              // transitionInterpolator={new FlyToInterpolator()}\r\n              disableTokenWarning={true}\r\n              mapOptions={{\r\n                userProperties: true,\r\n                customAttribution:\r\n                  '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n              }}\r\n            >\r\n              {this.renderPopup()}\r\n              <PrkControl\r\n                mapStyle={mapStyle}\r\n                onMapStyle={this.handleChange(\"mapStyle\")}\r\n                onChange={this.querySourceDataDebounced}\r\n              />\r\n              <GeolocateControl\r\n                style={{ position: \"absolute\", left: \".5em\", bottom: \".5em\" }}\r\n                // onViewportChange={this.handleChange(\"viewport\")}\r\n                positionOptions={{ enableHighAccuracy: true }}\r\n                // trackUserLocation={true}\r\n                showUserLocation={true}\r\n              />\r\n              <ScaleControl style={{ position: \"absolute\", left: \"3em\", bottom: \".5em\" }} unit=\"imperial\" />\r\n            </ReactMapGL>\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: selectLoginUser(state),\r\n  mapStyle: selectMapStyle(state),\r\n  preference: selectPreference(state),\r\n  user: selectUser(state),\r\n});\r\n\r\nconst mapActionToProps = {\r\n  fetchPreference,\r\n  updatePreference,\r\n  fetchMapStyle,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(withStyles(styles)(PrkMap));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport errorRoute from \"./Error/route\";\r\nimport notFoundRoute from \"./NotFound/route\";\r\nimport mapRoute from \"./PrkMap/route\";\r\n\r\nexport { default as Error } from \"./Error\";\r\nexport { default as NotFound } from \"./NotFound\";\r\nexport { default as PrkMap } from \"./PrkMap\";\r\n\r\nexport const routes = [mapRoute, notFoundRoute, errorRoute]\r\n  .sort((a, b) => a.sequence - b.sequence)\r\n  .map((route, index) => ({\r\n    ...route,\r\n    index,\r\n  }));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { Apps as AppsIcon } from \"@material-ui/icons\";\r\nimport Element from \"./index\";\r\n\r\nconst route = {\r\n  sequence: 10,\r\n  name: \"Parking\",\r\n  label: \"Parking\",\r\n  path: \"/\",\r\n  exact: true,\r\n  element: Element,\r\n  icon: AppsIcon,\r\n  user: true,\r\n};\r\n\r\nexport default route;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { PrkLayout } from \"../../components\";\r\nimport RouteBase from \"../RouteBase\";\r\nimport PrkMap from \"./PrkMap\";\r\n\r\nconst Root = (props) => (\r\n  <RouteBase\r\n    {...props}\r\n    renderRoute={(p) => (\r\n      <PrkLayout {...p}>\r\n        <PrkMap {...p} />\r\n      </PrkLayout>\r\n    )}\r\n  />\r\n);\r\n\r\nexport default Root;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass PrkLink extends React.Component {\r\n  render() {\r\n    return <Button component={Link} {...this.props}></Button>;\r\n  }\r\n}\r\n\r\nexport default PrkLink;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { background, primary, secondary } from \"constants/palette\";\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    zIndex: theme.zIndex.drawer,\r\n  },\r\n  drawer: {\r\n    // width: set in inline styles\r\n    zIndex: \"+1\",\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  list: {\r\n    marginTop: \"0px\",\r\n  },\r\n  listItemNotSelected: {\r\n    marginLeft: \"5px\",\r\n    paddingTop: \"10px\",\r\n    paddingBottom: \"10px\",\r\n  },\r\n  listItemSelected: {\r\n    color: primary,\r\n    background: background,\r\n    textTransform: \"none\",\r\n    borderLeft: `5px solid ${secondary}`,\r\n    borderRadius: \"0px\",\r\n    paddingTop: \"10px\",\r\n    paddingBottom: \"10px\",\r\n  },\r\n  listItemIcon: {\r\n    minWidth: \"50px\",\r\n  },\r\n  listItemText: {\r\n    textTransform: \"none\",\r\n    marginTop: \"0px\",\r\n    marginBottom: \"0px\",\r\n  },\r\n  noPadding: {\r\n    padding: 0,\r\n  },\r\n  noStyle: {\r\n    display: \"block\",\r\n    padding: 0,\r\n    textTransform: \"unset\",\r\n  },\r\n});\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport {\r\n  Drawer,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  Tooltip,\r\n  withWidth,\r\n} from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport clsx from \"clsx\";\r\nimport { selectUser } from \"controllers/user/action\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { routes } from \"routes\";\r\nimport PrkLink from \"./PrkLink\";\r\nimport styles from \"./styles\";\r\n\r\nconst NavigationPrkLink = (label) =>\r\n  React.forwardRef((props, ref) => {\r\n    return (\r\n      <PrkLink {...props} aria-label={label} ref={ref}>\r\n        {props.children}\r\n      </PrkLink>\r\n    );\r\n  });\r\n\r\nclass PrkNavigation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { page } = props;\r\n    this.home = page && page.path === \"/\";\r\n    this.state = {\r\n      open: true,\r\n      windowWidth: window.innerWidth,\r\n    };\r\n  }\r\n\r\n  handleChange = (key) => (event, value) => {\r\n    switch (key) {\r\n      default:\r\n        this.setState({ [key]: value });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { classes, page, user } = this.props;\r\n    const { open } = this.state;\r\n    const name = page && page.name;\r\n    const temp = routes.filter(\r\n      (route) =>\r\n        !route.hidden &&\r\n        (!route.admin || (route.admin && user && user.CanEditAccounts))\r\n    );\r\n    const navWidth = page.indent ? 200 : 50;\r\n    const indentWidth = page.indent ? 250 : 70;\r\n    return (\r\n      <Drawer\r\n        className={classes.drawer}\r\n        style={{ width: `${indentWidth - 20}px` }}\r\n        variant=\"persistent\"\r\n        anchor=\"left\"\r\n        open={open}\r\n        PaperProps={{ style: { width: `${navWidth}px`, overflow: \"hidden\" } }}\r\n      >\r\n        <div className={classes.toolbar} />\r\n        <List component=\"nav\" className={classes.list}>\r\n          {temp.map((route) => {\r\n            const PrkIcon = route.icon;\r\n            const selected = route.name === name;\r\n            return (\r\n              <ListItem\r\n                button\r\n                disableGutters\r\n                className={clsx(\r\n                  selected\r\n                    ? classes.listItemSelected\r\n                    : classes.listItemNotSelected\r\n                )}\r\n                key={`list-item-${route.name}`}\r\n                component={NavigationPrkLink(route.label)}\r\n                to={route.path}\r\n                onClick={this.handleChange(\"route\")}\r\n              >\r\n                <React.Fragment>\r\n                  <Tooltip title={route.label}>\r\n                    <ListItemIcon key={`list-item-icon-${route.name}`}>\r\n                      <PrkIcon color={selected ? \"primary\" : \"inherit\"} />\r\n                    </ListItemIcon>\r\n                  </Tooltip>\r\n                </React.Fragment>\r\n              </ListItem>\r\n            );\r\n          })}\r\n        </List>\r\n      </Drawer>\r\n    );\r\n  }\r\n}\r\n\r\nPrkNavigation.propTypes = {\r\n  page: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: selectUser(state),\r\n});\r\n\r\nconst mapActionToProps = {};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapActionToProps\r\n)(withWidth()(withStyles(styles)(PrkNavigation)));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  error: {\r\n    fontSize: \".8rem\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","import React, { Component } from \"react\";\r\nimport { selectNotice, setNotice } from \"controllers/common/action\";\r\n\r\nimport { PrkDialog } from \"components\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { connect } from \"react-redux\";\r\nimport { continueUser } from \"controllers/user/action\";\r\nimport styles from \"./styles\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nclass PrkNotice extends Component {\r\n  componentDidMount() {\r\n    this.props.continueUser();\r\n  }\r\n\r\n  handleAcknowledge = () => {\r\n    this.props.setNotice(\"viewed\");\r\n  };\r\n\r\n  buttons = () => {\r\n    return [\r\n      {\r\n        disabled: false,\r\n        label: \"Acknowledge\",\r\n        onClick: this.handleAcknowledge,\r\n        type: \"primary\",\r\n      },\r\n    ];\r\n  };\r\n\r\n  render() {\r\n    const { notice } = this.props;\r\n    if (notice) {\r\n      return null;\r\n    }\r\n    return (\r\n      <PrkDialog title={\"Dynacurb Parking App\"} maxWidth=\"md\" open={!notice} buttons={this.buttons()}>\r\n        <React.Fragment>\r\n          <Typography variant=\"h6\">Clicking the acknowledgement button below confirms:</Typography>\r\n          <Typography variant=\"subtitle1\"> You will not use this application while operating a vehicle.</Typography>\r\n          <Typography variant=\"subtitle1\">\r\n             This is an experimental/prototype application designed to assist drivers in locating available parking\r\n            spots more quickly.\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\">\r\n             Parking availability predictions are based upon past occupancy patterns and no accuracy guarantees are\r\n            made.\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\">\r\n             This is not a reservation system and spots are filled on a first come, first serve basis.\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\">\r\n             Authorized commercial use of this application is limited to drivers who have received prior approval from\r\n            their employer.\r\n          </Typography>\r\n        </React.Fragment>\r\n      </PrkDialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  notice: selectNotice(state),\r\n});\r\n\r\nconst mapActionToProps = {\r\n  continueUser,\r\n  setNotice,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(withStyles(styles)(PrkNotice));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {\r\n  stepper: {\r\n    flex: \"1 0 auto\",\r\n    background: \"transparent\"\r\n  }\r\n};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { withWidth } from \"@material-ui/core\";\r\nimport { Stepper, Step, StepLabel, Button, Toolbar } from \"@material-ui/core\";\r\nimport {\r\n  ArrowBack as ArrowBackIcon,\r\n  ArrowForward as ArrowForwardIcon\r\n} from \"@material-ui/icons\";\r\n\r\nclass PrkStepper extends React.Component {\r\n  static defaultProps = {\r\n    disabled: []\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      step: props.step\r\n    };\r\n  }\r\n\r\n  notifyStepChange = step => {\r\n    if (this.props.onStepChange != null) {\r\n      this.props.onStepChange(step);\r\n    }\r\n  };\r\n\r\n  handleNext = () => {\r\n    const step = this.state.step + 1;\r\n    this.setState({\r\n      step: step\r\n    });\r\n    this.notifyStepChange(step);\r\n  };\r\n\r\n  handleBack = () => {\r\n    const step = this.state.step - 1;\r\n    this.setState({\r\n      step: step\r\n    });\r\n    this.notifyStepChange(step);\r\n  };\r\n\r\n  handleReset = () => {\r\n    this.setState({\r\n      step: 0\r\n    });\r\n    this.notifyStepChange(0);\r\n  };\r\n\r\n  render() {\r\n    const { steps, disabled, classes, width } = this.props;\r\n    const { step } = this.state;\r\n    var icon = false;\r\n    switch (width) {\r\n      case \"xs\":\r\n      case \"sm\":\r\n        icon = true;\r\n        break;\r\n      default:\r\n        icon = false;\r\n    }\r\n    return (\r\n      <Toolbar>\r\n        <Button\r\n          style={{ minWidth: icon ? 16 : 64 }}\r\n          disabled={step === 0 || disabled.indexOf(step - 1) !== -1}\r\n          onClick={this.handleBack.bind(this)}\r\n          color=\"secondary\"\r\n          variant=\"contained\"\r\n        >\r\n          {icon ? <ArrowBackIcon /> : \"Back\"}\r\n        </Button>\r\n        <Stepper activeStep={step} className={classes.stepper}>\r\n          {steps.map(function(item, index) {\r\n            return (\r\n              <Step key={item.name}>\r\n                <StepLabel>{item.name}</StepLabel>\r\n              </Step>\r\n            );\r\n          })}\r\n        </Stepper>\r\n        <Button\r\n          style={{ minWidth: icon ? 16 : 64 }}\r\n          disabled={\r\n            step === steps.length - 1 || disabled.indexOf(step + 1) !== -1\r\n          }\r\n          onClick={this.handleNext.bind(this)}\r\n          color=\"secondary\"\r\n          variant=\"contained\"\r\n        >\r\n          {icon ? <ArrowForwardIcon /> : \"Next\"}\r\n        </Button>\r\n      </Toolbar>\r\n    );\r\n  }\r\n}\r\n\r\nPrkStepper.propTypes = {\r\n  step: PropTypes.number.isRequired,\r\n  steps: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      name: PropTypes.string.isRequired\r\n    })\r\n  ).isRequired,\r\n  disabled: PropTypes.arrayOf(PropTypes.number.isRequired),\r\n  onStepChange: PropTypes.func\r\n};\r\n\r\nexport default withWidth()(withStyles(styles)(PrkStepper));\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nconst styles = {};\r\n\r\nexport default styles;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { createTheme } from \"@material-ui/core/styles\";\r\nimport { background, error, lighter, primary, secondary, text } from \"constants/palette\";\r\n\r\nconst typography = {\r\n  useNextVariants: true,\r\n};\r\n\r\nconst overrides = {\r\n  MuiCssBaseline: {\r\n    \"@global\": {\r\n      body: {\r\n        // backgroundImage: 'url(\"/images/parking-lg-10.png\")',\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundPosition: \"right\",\r\n        backgroundAttachment: \"fixed\",\r\n      },\r\n    },\r\n  },\r\n  MuiStepIcon: {\r\n    root: {\r\n      \"&$completed\": {\r\n        color: secondary,\r\n      },\r\n      \"&$active\": {\r\n        color: secondary,\r\n      },\r\n    },\r\n    active: {},\r\n    completed: {},\r\n  },\r\n  MuiList: {\r\n    root: {\r\n      width: \"100%\",\r\n    },\r\n    padding: {\r\n      paddingTop: \"0\",\r\n      paddingBottom: \"0\",\r\n    },\r\n  },\r\n  MuiExpansionPanelSummary: {\r\n    root: {\r\n      padding: \"0 16px 0 16px\",\r\n    },\r\n  },\r\n  MuiExpansionPanelDetails: {\r\n    root: {\r\n      padding: \"0\",\r\n    },\r\n  },\r\n};\r\n\r\nconst palette = {\r\n  type: \"light\",\r\n  primary: {\r\n    main: primary,\r\n    contrastText: text.light,\r\n  },\r\n  secondary: {\r\n    main: secondary,\r\n    contrastText: text.light,\r\n  },\r\n  error: {\r\n    main: error,\r\n    contrastText: text.light,\r\n  },\r\n  background: {\r\n    paper: lighter,\r\n    default: background,\r\n  },\r\n};\r\n\r\nconst mixins = {\r\n  toolbar: {\r\n    minHeight: 0,\r\n    \"@media (min-width:0px) and (orientation: landscape)\": {\r\n      minHeight: 0,\r\n    },\r\n    \"@media (min-width:600px)\": {\r\n      minHeight: 0,\r\n    },\r\n  },\r\n};\r\n\r\nconst name = \"Yellow Orange Science Blue Spectacled Bear\";\r\n\r\nconst theme = createTheme({ mixins, typography, overrides, palette, name });\r\n\r\nexport default theme;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MuiThemeProvider, withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./styles\";\r\nimport { CssBaseline } from \"@material-ui/core\";\r\nimport theme from \"./theme\";\r\n\r\nclass PrkTheme extends React.Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <MuiThemeProvider theme={theme}>\r\n          <CssBaseline />\r\n          {this.props.children}\r\n        </MuiThemeProvider>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nPrkTheme.propTypes = {\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(PrkTheme);\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport rootSaga from \"controllers/saga\";\r\nimport configureStore from \"controllers/store\";\r\nimport { isEmpty, isEqual, max, omit } from \"lodash\";\r\nimport { Provider } from \"react-redux\";\r\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\r\nimport { PrkTheme } from \"./components\";\r\nimport { routes } from \"./routes\";\r\n\r\nconst reduxStore = configureStore(window.REDUX_INITIAL_DATA);\r\nreduxStore.runSaga(rootSaga);\r\n\r\nlet current = [];\r\n\r\nconst printRoute = (route) => {\r\n  if (route) {\r\n    if (!isEmpty(route.path)) {\r\n      current.push([`(${route.id})`, `[${route.name}]`, `${route.path}`]);\r\n    }\r\n  }\r\n};\r\n\r\nconst printRoutes = () => {\r\n  const prev = Array.from(current);\r\n  current = [[\"id\", \"name\", \"path\"]];\r\n  routes.forEach((r) => printRoute(r));\r\n  const [m0, m1] = [max(current.map((c) => c[0].length)), max(current.map((c) => c[1].length))];\r\n  current = current.map(\r\n    (c, i) =>\r\n      `${\"\\xa0\".repeat(3 - `${i}`.length)}${c[0]}${\"\\xa0\".repeat(m0 - c[0].length + 1)}${c[1]}${\"\\xa0\".repeat(\r\n        m1 - c[1].length + 1\r\n      )}${c[2]}`\r\n  );\r\n  if (!isEqual(prev, current)) {\r\n    // keep this logging statement as it only prints for development\r\n    console.log({ routes: current });\r\n  }\r\n};\r\n\r\nclass Router extends React.Component {\r\n  renderRoute = (route) => {\r\n    const Element = route.element;\r\n    return (\r\n      <Route\r\n        key={`route-${route.name}`}\r\n        exact={route.exact}\r\n        path={route.path}\r\n        render={() => <Element page={omit(route, [\"element\"])} />}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      printRoutes();\r\n    }\r\n    return (\r\n      <Provider store={reduxStore}>\r\n        <PrkTheme>\r\n          <HashRouter>\r\n            <Switch>{routes.map((route) => this.renderRoute(route))}</Switch>\r\n          </HashRouter>\r\n        </PrkTheme>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Router;\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport { fromJS } from \"immutable\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\n// import logger from \"redux-logger\";\r\nimport reducer from \"./reducer\";\r\n\r\nexport default function configureStore(initialState) {\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  let enhancers = null;\r\n  let middleware = [];\r\n  switch (process.env.NODE_ENV) {\r\n    case \"production\":\r\n    case \"test\":\r\n      middleware = [sagaMiddleware];\r\n      enhancers = applyMiddleware(...middleware);\r\n      break;\r\n    default:\r\n      middleware = [sagaMiddleware];\r\n      // uncomment to enable logging redux store actions\r\n      // middleware = [logger, sagaMiddleware];\r\n      enhancers = applyMiddleware(...middleware);\r\n      const composeEnhancers = composeWithDevTools({\r\n        trace: true,\r\n        traceLimit: 10\r\n      });\r\n      enhancers = composeEnhancers(applyMiddleware(...middleware));\r\n  }\r\n  return {\r\n    ...createStore(reducer, fromJS(initialState), enhancers),\r\n    runSaga: sagaMiddleware.run\r\n  };\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\n// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","// This material was prepared as an account of work sponsored by an agency of the United\r\n// States Government. Neither the United States Government nor the United States\r\n// Department of Energy, nor Battelle, nor any of their employees, nor any jurisdiction or\r\n// organization that has cooperated in the development of these materials, makes any\r\n// warranty, express or implied, or assumes any legal liability or responsibility for the\r\n// accuracy, completeness, or usefulness or any information, apparatus, product, software,\r\n// or process disclosed, or represents that its use would not infringe privately owned rights.\r\n// Reference herein to any specific commercial product, process, or service by trade name,\r\n// trademark, manufacturer, or otherwise does not necessarily constitute or imply its\r\n// endorsement, recommendation, or favoring by the United States Government or any\r\n// agency thereof, or Battelle Memorial Institute. The views and opinions of authors\r\n// expressed herein do not necessarily state or reflect those of the United States Government\r\n// or any agency thereof.\r\n//\r\n//                      PACIFIC NORTHWEST NATIONAL LABORATORY\r\n//                                   operated by\r\n//                                     BATTELLE\r\n//                                     for the\r\n//                        UNITED STATES DEPARTMENT OF ENERGY\r\n//                         under Contract DE-AC05-76RL01830\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Router from \"./Router\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<Router />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}